{"remainingRequest":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\chart.js\\dist\\chunks\\helpers.dataset.js","dependencies":[{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\chart.js\\dist\\chunks\\helpers.dataset.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.$ = unclipArea;\nexports.C = _isPointInArea;\nexports.D = getAngleFromPoint;\nexports.E = toPadding;\nexports.F = each;\nexports.G = getMaximumSize;\nexports.I = _getParentNode;\nexports.J = readUsedSize;\nexports.L = throttled;\nexports.M = _isDomSupported;\nexports.N = _factorize;\nexports.O = finiteOrDefault;\nexports.Q = callback;\nexports.R = _addGrace;\nexports.S = _limitValue;\nexports.U = toDegrees;\nexports.V = _measureText;\nexports.W = _int16Range;\nexports.X = _alignPixel;\nexports.Y = clipArea;\nexports.Z = renderText;\nexports._ = _arrayUnique;\nexports.a = resolve;\nexports.a$ = getStyle;\nexports.a0 = toFont;\nexports.a4 = merge;\nexports.a5 = _capitalize;\nexports.a8 = _attachContext;\nexports.a9 = _createResolver;\nexports.aA = getRtlAdapter;\nexports.aB = overrideTextDirection;\nexports.aD = restoreTextDirection;\nexports.aE = drawPointLegend;\nexports.aF = distanceBetweenPoints;\nexports.aG = noop;\nexports.aH = _setMinAndMaxByKey;\nexports.aI = niceNum;\nexports.aJ = almostWhole;\nexports.aK = almostEquals;\nexports.aL = _decimalPlaces;\nexports.aO = _longestText;\nexports.aP = _filterBetween;\nexports.aQ = _lookup;\nexports.aR = isPatternOrGradient;\nexports.aS = getHoverColor;\nexports.aT = clone;\nexports.aU = _merger;\nexports.aV = _mergerIf;\nexports.aW = _deprecated;\nexports.aX = _splitKey;\nexports.aY = toFontString;\nexports.aZ = splineCurve;\nexports.a_ = splineCurveMonotone;\nexports.aa = _descriptors;\nexports.ab = mergeIf;\nexports.ad = debounce;\nexports.ae = retinaScale;\nexports.af = clearCanvas;\nexports.ah = getDatasetClipArea;\nexports.ai = _elementsEqual;\nexports.aj = _isClickEvent;\nexports.ak = _isBetween;\nexports.al = _readValueToProps;\nexports.am = _updateBezierControlPoints;\nexports.an = _computeSegments;\nexports.ao = _boundSegments;\nexports.ap = _steppedInterpolation;\nexports.aq = _bezierInterpolation;\nexports.ar = _pointInLine;\nexports.as = _steppedLineTo;\nexports.at = _bezierCurveTo;\nexports.au = drawPoint;\nexports.av = addRoundedRectPath;\nexports.aw = toTRBL;\nexports.ax = toTRBLCorners;\nexports.ay = _boundSegment;\nexports.az = _normalizeAngle;\nexports.b = isArray;\nexports.b0 = fontString;\nexports.b1 = toLineHeight;\nexports.b7 = _angleDiff;\nexports.c = color;\nexports.f = resolveObjectKey;\nexports.g = isNumberFinite;\nexports.i = isObject;\nexports.j = createContext;\nexports.k = isNullOrUndef;\nexports.l = listenArrayEvents;\nexports.o = formatNumber;\nexports.p = _angleBetween;\nexports.q = _getStartAndCountOfVisiblePoints;\nexports.t = toRadians;\nexports.u = unlistenArrayEvents;\nexports.v = valueOrDefault;\nexports.w = _scaleRangesChanged;\nexports.x = isNumber;\nexports.y = _parseObjectDataRadialScale;\nexports.z = getRelativePosition;\nexports.s = exports.r = exports.n = exports.m = exports.h = exports.e = exports.d = exports.b6 = exports.b5 = exports.b4 = exports.b3 = exports.b2 = exports.ag = exports.ac = exports.aN = exports.aM = exports.aC = exports.a7 = exports.a6 = exports.a3 = exports.a2 = exports.a1 = exports.T = exports.P = exports.K = exports.H = exports.B = exports.A = void 0;\n\nrequire(\"core-js/modules/es6.number.epsilon\");\n\nrequire(\"core-js/modules/es6.reflect.own-keys\");\n\nrequire(\"core-js/modules/es6.reflect.has\");\n\nrequire(\"core-js/modules/es6.reflect.get-prototype-of\");\n\nrequire(\"core-js/modules/es6.reflect.get-own-property-descriptor\");\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/toConsumableArray\"));\n\nrequire(\"core-js/modules/es6.regexp.match\");\n\nrequire(\"core-js/modules/es6.array.fill\");\n\nvar _defineProperty2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/defineProperty\"));\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/createClass\"));\n\nrequire(\"core-js/modules/es6.string.starts-with\");\n\nrequire(\"core-js/modules/es7.array.includes\");\n\nrequire(\"core-js/modules/es6.string.includes\");\n\nrequire(\"core-js/modules/es6.map\");\n\nrequire(\"core-js/modules/es6.array.find-index\");\n\nrequire(\"core-js/modules/es6.array.from\");\n\nrequire(\"core-js/modules/es6.string.iterator\");\n\nrequire(\"core-js/modules/es6.set\");\n\nvar _typeof2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/typeof\"));\n\nrequire(\"core-js/modules/es6.array.sort\");\n\nrequire(\"core-js/modules/es6.math.sign\");\n\nrequire(\"core-js/modules/es6.math.log10\");\n\nrequire(\"core-js/modules/es7.symbol.async-iterator\");\n\nrequire(\"core-js/modules/es6.symbol\");\n\nrequire(\"core-js/modules/es6.regexp.split\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"core-js/modules/es6.string.ends-with\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nvar _color = require(\"@kurkle/color\");\n\n/*!\n * Chart.js v4.4.9\n * https://www.chartjs.org\n * (c) 2025 Chart.js Contributors\n * Released under the MIT License\n */\n\n/**\n * @namespace Chart.helpers\n */\n\n/**\n* An empty function that can be used, for example, for optional callback.\n*/\nfunction noop() {}\n/* noop */\n\n/**\n * Returns a unique id, sequentially generated from a global variable.\n */\n\n\nvar uid = function () {\n  var id = 0;\n  return function () {\n    return id++;\n  };\n}();\n/**\n * Returns true if `value` is neither null nor undefined, else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */\n\n\nexports.ac = uid;\n\nfunction isNullOrUndef(value) {\n  return value === null || value === undefined;\n}\n/**\n * Returns true if `value` is an array (including typed arrays), else returns false.\n * @param value - The value to test.\n * @function\n */\n\n\nfunction isArray(value) {\n  if (Array.isArray && Array.isArray(value)) {\n    return true;\n  }\n\n  var type = Object.prototype.toString.call(value);\n\n  if (type.slice(0, 7) === '[object' && type.slice(-6) === 'Array]') {\n    return true;\n  }\n\n  return false;\n}\n/**\n * Returns true if `value` is an object (excluding null), else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */\n\n\nfunction isObject(value) {\n  return value !== null && Object.prototype.toString.call(value) === '[object Object]';\n}\n/**\n * Returns true if `value` is a finite number, else returns false\n * @param value  - The value to test.\n */\n\n\nfunction isNumberFinite(value) {\n  return (typeof value === 'number' || value instanceof Number) && isFinite(+value);\n}\n/**\n * Returns `value` if finite, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is not finite.\n */\n\n\nfunction finiteOrDefault(value, defaultValue) {\n  return isNumberFinite(value) ? value : defaultValue;\n}\n/**\n * Returns `value` if defined, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is undefined.\n */\n\n\nfunction valueOrDefault(value, defaultValue) {\n  return typeof value === 'undefined' ? defaultValue : value;\n}\n\nvar toPercentage = function toPercentage(value, dimension) {\n  return typeof value === 'string' && value.endsWith('%') ? parseFloat(value) / 100 : +value / dimension;\n};\n\nexports.m = toPercentage;\n\nvar toDimension = function toDimension(value, dimension) {\n  return typeof value === 'string' && value.endsWith('%') ? parseFloat(value) / 100 * dimension : +value;\n};\n/**\n * Calls `fn` with the given `args` in the scope defined by `thisArg` and returns the\n * value returned by `fn`. If `fn` is not a function, this method returns undefined.\n * @param fn - The function to call.\n * @param args - The arguments with which `fn` should be called.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n */\n\n\nexports.n = toDimension;\n\nfunction callback(fn, args, thisArg) {\n  if (fn && typeof fn.call === 'function') {\n    return fn.apply(thisArg, args);\n  }\n}\n\nfunction each(loopable, fn, thisArg, reverse) {\n  var i, len, keys;\n\n  if (isArray(loopable)) {\n    len = loopable.length;\n\n    if (reverse) {\n      for (i = len - 1; i >= 0; i--) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    } else {\n      for (i = 0; i < len; i++) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    }\n  } else if (isObject(loopable)) {\n    keys = Object.keys(loopable);\n    len = keys.length;\n\n    for (i = 0; i < len; i++) {\n      fn.call(thisArg, loopable[keys[i]], keys[i]);\n    }\n  }\n}\n/**\n * Returns true if the `a0` and `a1` arrays have the same content, else returns false.\n * @param a0 - The array to compare\n * @param a1 - The array to compare\n * @private\n */\n\n\nfunction _elementsEqual(a0, a1) {\n  var i, ilen, v0, v1;\n\n  if (!a0 || !a1 || a0.length !== a1.length) {\n    return false;\n  }\n\n  for (i = 0, ilen = a0.length; i < ilen; ++i) {\n    v0 = a0[i];\n    v1 = a1[i];\n\n    if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/**\n * Returns a deep copy of `source` without keeping references on objects and arrays.\n * @param source - The value to clone.\n */\n\n\nfunction clone(source) {\n  if (isArray(source)) {\n    return source.map(clone);\n  }\n\n  if (isObject(source)) {\n    var target = Object.create(null);\n    var keys = Object.keys(source);\n    var klen = keys.length;\n    var k = 0;\n\n    for (; k < klen; ++k) {\n      target[keys[k]] = clone(source[keys[k]]);\n    }\n\n    return target;\n  }\n\n  return source;\n}\n\nfunction isValidKey(key) {\n  return ['__proto__', 'prototype', 'constructor'].indexOf(key) === -1;\n}\n/**\n * The default merger when Chart.helpers.merge is called without merger option.\n * Note(SB): also used by mergeConfig and mergeScaleConfig as fallback.\n * @private\n */\n\n\nfunction _merger(key, target, source, options) {\n  if (!isValidKey(key)) {\n    return;\n  }\n\n  var tval = target[key];\n  var sval = source[key];\n\n  if (isObject(tval) && isObject(sval)) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    merge(tval, sval, options);\n  } else {\n    target[key] = clone(sval);\n  }\n}\n\nfunction merge(target, source, options) {\n  var sources = isArray(source) ? source : [source];\n  var ilen = sources.length;\n\n  if (!isObject(target)) {\n    return target;\n  }\n\n  options = options || {};\n  var merger = options.merger || _merger;\n  var current;\n\n  for (var i = 0; i < ilen; ++i) {\n    current = sources[i];\n\n    if (!isObject(current)) {\n      continue;\n    }\n\n    var keys = Object.keys(current);\n\n    for (var k = 0, klen = keys.length; k < klen; ++k) {\n      merger(keys[k], target, current, options);\n    }\n  }\n\n  return target;\n}\n\nfunction mergeIf(target, source) {\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return merge(target, source, {\n    merger: _mergerIf\n  });\n}\n/**\n * Merges source[key] in target[key] only if target[key] is undefined.\n * @private\n */\n\n\nfunction _mergerIf(key, target, source) {\n  if (!isValidKey(key)) {\n    return;\n  }\n\n  var tval = target[key];\n  var sval = source[key];\n\n  if (isObject(tval) && isObject(sval)) {\n    mergeIf(tval, sval);\n  } else if (!Object.prototype.hasOwnProperty.call(target, key)) {\n    target[key] = clone(sval);\n  }\n}\n/**\n * @private\n */\n\n\nfunction _deprecated(scope, value, previous, current) {\n  if (value !== undefined) {\n    console.warn(scope + ': \"' + previous + '\" is deprecated. Please use \"' + current + '\" instead');\n  }\n} // resolveObjectKey resolver cache\n\n\nvar keyResolvers = {\n  // Chart.helpers.core resolveObjectKey should resolve empty key to root object\n  '': function _(v) {\n    return v;\n  },\n  // default resolvers\n  x: function x(o) {\n    return o.x;\n  },\n  y: function y(o) {\n    return o.y;\n  }\n};\n/**\n * @private\n */\n\nfunction _splitKey(key) {\n  var parts = key.split('.');\n  var keys = [];\n  var tmp = '';\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = parts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var part = _step.value;\n      tmp += part;\n\n      if (tmp.endsWith('\\\\')) {\n        tmp = tmp.slice(0, -1) + '.';\n      } else {\n        keys.push(tmp);\n        tmp = '';\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return != null) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return keys;\n}\n\nfunction _getKeyResolver(key) {\n  var keys = _splitKey(key);\n\n  return function (obj) {\n    var _iteratorNormalCompletion2 = true;\n    var _didIteratorError2 = false;\n    var _iteratorError2 = undefined;\n\n    try {\n      for (var _iterator2 = keys[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n        var k = _step2.value;\n\n        if (k === '') {\n          break;\n        }\n\n        obj = obj && obj[k];\n      }\n    } catch (err) {\n      _didIteratorError2 = true;\n      _iteratorError2 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n          _iterator2.return();\n        }\n      } finally {\n        if (_didIteratorError2) {\n          throw _iteratorError2;\n        }\n      }\n    }\n\n    return obj;\n  };\n}\n\nfunction resolveObjectKey(obj, key) {\n  var resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));\n\n  return resolver(obj);\n}\n/**\n * @private\n */\n\n\nfunction _capitalize(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nvar defined = function defined(value) {\n  return typeof value !== 'undefined';\n};\n\nexports.h = defined;\n\nvar isFunction = function isFunction(value) {\n  return typeof value === 'function';\n}; // Adapted from https://stackoverflow.com/questions/31128855/comparing-ecma6-sets-for-equality#31129384\n\n\nexports.a7 = isFunction;\n\nvar setsEqual = function setsEqual(a, b) {\n  if (a.size !== b.size) {\n    return false;\n  }\n\n  var _iteratorNormalCompletion3 = true;\n  var _didIteratorError3 = false;\n  var _iteratorError3 = undefined;\n\n  try {\n    for (var _iterator3 = a[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n      var item = _step3.value;\n\n      if (!b.has(item)) {\n        return false;\n      }\n    }\n  } catch (err) {\n    _didIteratorError3 = true;\n    _iteratorError3 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n        _iterator3.return();\n      }\n    } finally {\n      if (_didIteratorError3) {\n        throw _iteratorError3;\n      }\n    }\n  }\n\n  return true;\n};\n/**\n * @param e - The event\n * @private\n */\n\n\nexports.ag = setsEqual;\n\nfunction _isClickEvent(e) {\n  return e.type === 'mouseup' || e.type === 'click' || e.type === 'contextmenu';\n}\n/**\n * @alias Chart.helpers.math\n * @namespace\n */\n\n\nvar PI = Math.PI;\nexports.P = PI;\nvar TAU = 2 * PI;\nexports.T = TAU;\nvar PITAU = TAU + PI;\nexports.b2 = PITAU;\nvar INFINITY = Number.POSITIVE_INFINITY;\nexports.b3 = INFINITY;\nvar RAD_PER_DEG = PI / 180;\nexports.b4 = RAD_PER_DEG;\nvar HALF_PI = PI / 2;\nexports.H = HALF_PI;\nvar QUARTER_PI = PI / 4;\nexports.b5 = QUARTER_PI;\nvar TWO_THIRDS_PI = PI * 2 / 3;\nexports.b6 = TWO_THIRDS_PI;\nvar log10 = Math.log10;\nexports.aN = log10;\nvar sign = Math.sign;\nexports.s = sign;\n\nfunction almostEquals(x, y, epsilon) {\n  return Math.abs(x - y) < epsilon;\n}\n/**\n * Implementation of the nice number algorithm used in determining where axis labels will go\n */\n\n\nfunction niceNum(range) {\n  var roundedRange = Math.round(range);\n  range = almostEquals(range, roundedRange, range / 1000) ? roundedRange : range;\n  var niceRange = Math.pow(10, Math.floor(log10(range)));\n  var fraction = range / niceRange;\n  var niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;\n  return niceFraction * niceRange;\n}\n/**\n * Returns an array of factors sorted from 1 to sqrt(value)\n * @private\n */\n\n\nfunction _factorize(value) {\n  var result = [];\n  var sqrt = Math.sqrt(value);\n  var i;\n\n  for (i = 1; i < sqrt; i++) {\n    if (value % i === 0) {\n      result.push(i);\n      result.push(value / i);\n    }\n  }\n\n  if (sqrt === (sqrt | 0)) {\n    result.push(sqrt);\n  }\n\n  result.sort(function (a, b) {\n    return a - b;\n  }).pop();\n  return result;\n}\n/**\n * Verifies that attempting to coerce n to string or number won't throw a TypeError.\n */\n\n\nfunction isNonPrimitive(n) {\n  return (0, _typeof2.default)(n) === 'symbol' || (0, _typeof2.default)(n) === 'object' && n !== null && !(Symbol.toPrimitive in n || 'toString' in n || 'valueOf' in n);\n}\n\nfunction isNumber(n) {\n  return !isNonPrimitive(n) && !isNaN(parseFloat(n)) && isFinite(n);\n}\n\nfunction almostWhole(x, epsilon) {\n  var rounded = Math.round(x);\n  return rounded - epsilon <= x && rounded + epsilon >= x;\n}\n/**\n * @private\n */\n\n\nfunction _setMinAndMaxByKey(array, target, property) {\n  var i, ilen, value;\n\n  for (i = 0, ilen = array.length; i < ilen; i++) {\n    value = array[i][property];\n\n    if (!isNaN(value)) {\n      target.min = Math.min(target.min, value);\n      target.max = Math.max(target.max, value);\n    }\n  }\n}\n\nfunction toRadians(degrees) {\n  return degrees * (PI / 180);\n}\n\nfunction toDegrees(radians) {\n  return radians * (180 / PI);\n}\n/**\n * Returns the number of decimal places\n * i.e. the number of digits after the decimal point, of the value of this Number.\n * @param x - A number.\n * @returns The number of decimal places.\n * @private\n */\n\n\nfunction _decimalPlaces(x) {\n  if (!isNumberFinite(x)) {\n    return;\n  }\n\n  var e = 1;\n  var p = 0;\n\n  while (Math.round(x * e) / e !== x) {\n    e *= 10;\n    p++;\n  }\n\n  return p;\n} // Gets the angle from vertical upright to the point about a centre.\n\n\nfunction getAngleFromPoint(centrePoint, anglePoint) {\n  var distanceFromXCenter = anglePoint.x - centrePoint.x;\n  var distanceFromYCenter = anglePoint.y - centrePoint.y;\n  var radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n  var angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n  if (angle < -0.5 * PI) {\n    angle += TAU; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n  }\n\n  return {\n    angle: angle,\n    distance: radialDistanceFromCenter\n  };\n}\n\nfunction distanceBetweenPoints(pt1, pt2) {\n  return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n}\n/**\n * Shortest distance between angles, in either direction.\n * @private\n */\n\n\nfunction _angleDiff(a, b) {\n  return (a - b + PITAU) % TAU - PI;\n}\n/**\n * Normalize angle to be between 0 and 2*PI\n * @private\n */\n\n\nfunction _normalizeAngle(a) {\n  return (a % TAU + TAU) % TAU;\n}\n/**\n * @private\n */\n\n\nfunction _angleBetween(angle, start, end, sameAngleIsFullCircle) {\n  var a = _normalizeAngle(angle);\n\n  var s = _normalizeAngle(start);\n\n  var e = _normalizeAngle(end);\n\n  var angleToStart = _normalizeAngle(s - a);\n\n  var angleToEnd = _normalizeAngle(e - a);\n\n  var startToAngle = _normalizeAngle(a - s);\n\n  var endToAngle = _normalizeAngle(a - e);\n\n  return a === s || a === e || sameAngleIsFullCircle && s === e || angleToStart > angleToEnd && startToAngle < endToAngle;\n}\n/**\n * Limit `value` between `min` and `max`\n * @param value\n * @param min\n * @param max\n * @private\n */\n\n\nfunction _limitValue(value, min, max) {\n  return Math.max(min, Math.min(max, value));\n}\n/**\n * @param {number} value\n * @private\n */\n\n\nfunction _int16Range(value) {\n  return _limitValue(value, -32768, 32767);\n}\n/**\n * @param value\n * @param start\n * @param end\n * @param [epsilon]\n * @private\n */\n\n\nfunction _isBetween(value, start, end) {\n  var epsilon = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1e-6;\n  return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;\n}\n\nfunction _lookup(table, value, cmp) {\n  cmp = cmp || function (index) {\n    return table[index] < value;\n  };\n\n  var hi = table.length - 1;\n  var lo = 0;\n  var mid;\n\n  while (hi - lo > 1) {\n    mid = lo + hi >> 1;\n\n    if (cmp(mid)) {\n      lo = mid;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return {\n    lo: lo,\n    hi: hi\n  };\n}\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @param last - lookup last index\n * @private\n */\n\n\nvar _lookupByKey = function _lookupByKey(table, key, value, last) {\n  return _lookup(table, value, last ? function (index) {\n    var ti = table[index][key];\n    return ti < value || ti === value && table[index + 1][key] === value;\n  } : function (index) {\n    return table[index][key] < value;\n  });\n};\n/**\n * Reverse binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @private\n */\n\n\nexports.B = _lookupByKey;\n\nvar _rlookupByKey = function _rlookupByKey(table, key, value) {\n  return _lookup(table, value, function (index) {\n    return table[index][key] >= value;\n  });\n};\n/**\n * Return subset of `values` between `min` and `max` inclusive.\n * Values are assumed to be in sorted order.\n * @param values - sorted array of values\n * @param min - min value\n * @param max - max value\n */\n\n\nexports.A = _rlookupByKey;\n\nfunction _filterBetween(values, min, max) {\n  var start = 0;\n  var end = values.length;\n\n  while (start < end && values[start] < min) {\n    start++;\n  }\n\n  while (end > start && values[end - 1] > max) {\n    end--;\n  }\n\n  return start > 0 || end < values.length ? values.slice(start, end) : values;\n}\n\nvar arrayEvents = ['push', 'pop', 'shift', 'splice', 'unshift'];\n\nfunction listenArrayEvents(array, listener) {\n  if (array._chartjs) {\n    array._chartjs.listeners.push(listener);\n\n    return;\n  }\n\n  Object.defineProperty(array, '_chartjs', {\n    configurable: true,\n    enumerable: false,\n    value: {\n      listeners: [listener]\n    }\n  });\n  arrayEvents.forEach(function (key) {\n    var method = '_onData' + _capitalize(key);\n\n    var base = array[key];\n    Object.defineProperty(array, key, {\n      configurable: true,\n      enumerable: false,\n      value: function value() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        var res = base.apply(this, args);\n\n        array._chartjs.listeners.forEach(function (object) {\n          if (typeof object[method] === 'function') {\n            object[method].apply(object, args);\n          }\n        });\n\n        return res;\n      }\n    });\n  });\n}\n\nfunction unlistenArrayEvents(array, listener) {\n  var stub = array._chartjs;\n\n  if (!stub) {\n    return;\n  }\n\n  var listeners = stub.listeners;\n  var index = listeners.indexOf(listener);\n\n  if (index !== -1) {\n    listeners.splice(index, 1);\n  }\n\n  if (listeners.length > 0) {\n    return;\n  }\n\n  arrayEvents.forEach(function (key) {\n    delete array[key];\n  });\n  delete array._chartjs;\n}\n/**\n * @param items\n */\n\n\nfunction _arrayUnique(items) {\n  var set = new Set(items);\n\n  if (set.size === items.length) {\n    return items;\n  }\n\n  return Array.from(set);\n}\n\nfunction fontString(pixelSize, fontStyle, fontFamily) {\n  return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n}\n/**\n* Request animation polyfill\n*/\n\n\nvar requestAnimFrame = function () {\n  if (typeof window === 'undefined') {\n    return function (callback) {\n      return callback();\n    };\n  }\n\n  return window.requestAnimationFrame;\n}();\n/**\n * Throttles calling `fn` once per animation frame\n * Latest arguments are used on the actual call\n */\n\n\nexports.r = requestAnimFrame;\n\nfunction throttled(fn, thisArg) {\n  var argsToUse = [];\n  var ticking = false;\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    // Save the args for use later\n    argsToUse = args;\n\n    if (!ticking) {\n      ticking = true;\n      requestAnimFrame.call(window, function () {\n        ticking = false;\n        fn.apply(thisArg, argsToUse);\n      });\n    }\n  };\n}\n/**\n * Debounces calling `fn` for `delay` ms\n */\n\n\nfunction debounce(fn, delay) {\n  var timeout;\n  return function () {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    if (delay) {\n      clearTimeout(timeout);\n      timeout = setTimeout(fn, delay, args);\n    } else {\n      fn.apply(this, args);\n    }\n\n    return delay;\n  };\n}\n/**\n * Converts 'start' to 'left', 'end' to 'right' and others to 'center'\n * @private\n */\n\n\nvar _toLeftRightCenter = function _toLeftRightCenter(align) {\n  return align === 'start' ? 'left' : align === 'end' ? 'right' : 'center';\n};\n/**\n * Returns `start`, `end` or `(start + end) / 2` depending on `align`. Defaults to `center`\n * @private\n */\n\n\nexports.a1 = _toLeftRightCenter;\n\nvar _alignStartEnd = function _alignStartEnd(align, start, end) {\n  return align === 'start' ? start : align === 'end' ? end : (start + end) / 2;\n};\n/**\n * Returns `left`, `right` or `(left + right) / 2` depending on `align`. Defaults to `left`\n * @private\n */\n\n\nexports.a2 = _alignStartEnd;\n\nvar _textX = function _textX(align, left, right, rtl) {\n  var check = rtl ? 'left' : 'right';\n  return align === check ? right : align === 'center' ? (left + right) / 2 : left;\n};\n/**\n * Return start and count of visible points.\n * @private\n */\n\n\nexports.aC = _textX;\n\nfunction _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled) {\n  var pointCount = points.length;\n  var start = 0;\n  var count = pointCount;\n\n  if (meta._sorted) {\n    var iScale = meta.iScale,\n        vScale = meta.vScale,\n        _parsed = meta._parsed;\n    var spanGaps = meta.dataset ? meta.dataset.options ? meta.dataset.options.spanGaps : null : null;\n    var axis = iScale.axis;\n\n    var _iScale$getUserBounds = iScale.getUserBounds(),\n        min = _iScale$getUserBounds.min,\n        max = _iScale$getUserBounds.max,\n        minDefined = _iScale$getUserBounds.minDefined,\n        maxDefined = _iScale$getUserBounds.maxDefined;\n\n    if (minDefined) {\n      start = Math.min( // @ts-expect-error Need to type _parsed\n      _lookupByKey(_parsed, axis, min).lo, // @ts-expect-error Need to fix types on _lookupByKey\n      animationsDisabled ? pointCount : _lookupByKey(points, axis, iScale.getPixelForValue(min)).lo);\n\n      if (spanGaps) {\n        var distanceToDefinedLo = _parsed.slice(0, start + 1).reverse().findIndex(function (point) {\n          return !isNullOrUndef(point[vScale.axis]);\n        });\n\n        start -= Math.max(0, distanceToDefinedLo);\n      }\n\n      start = _limitValue(start, 0, pointCount - 1);\n    }\n\n    if (maxDefined) {\n      var end = Math.max( // @ts-expect-error Need to type _parsed\n      _lookupByKey(_parsed, iScale.axis, max, true).hi + 1, // @ts-expect-error Need to fix types on _lookupByKey\n      animationsDisabled ? 0 : _lookupByKey(points, axis, iScale.getPixelForValue(max), true).hi + 1);\n\n      if (spanGaps) {\n        var distanceToDefinedHi = _parsed.slice(end - 1).findIndex(function (point) {\n          return !isNullOrUndef(point[vScale.axis]);\n        });\n\n        end += Math.max(0, distanceToDefinedHi);\n      }\n\n      count = _limitValue(end, start, pointCount) - start;\n    } else {\n      count = pointCount - start;\n    }\n  }\n\n  return {\n    start: start,\n    count: count\n  };\n}\n/**\n * Checks if the scale ranges have changed.\n * @param {object} meta - dataset meta.\n * @returns {boolean}\n * @private\n */\n\n\nfunction _scaleRangesChanged(meta) {\n  var xScale = meta.xScale,\n      yScale = meta.yScale,\n      _scaleRanges = meta._scaleRanges;\n  var newRanges = {\n    xmin: xScale.min,\n    xmax: xScale.max,\n    ymin: yScale.min,\n    ymax: yScale.max\n  };\n\n  if (!_scaleRanges) {\n    meta._scaleRanges = newRanges;\n    return true;\n  }\n\n  var changed = _scaleRanges.xmin !== xScale.min || _scaleRanges.xmax !== xScale.max || _scaleRanges.ymin !== yScale.min || _scaleRanges.ymax !== yScale.max;\n  Object.assign(_scaleRanges, newRanges);\n  return changed;\n}\n\nvar atEdge = function atEdge(t) {\n  return t === 0 || t === 1;\n};\n\nvar elasticIn = function elasticIn(t, s, p) {\n  return -(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));\n};\n\nvar elasticOut = function elasticOut(t, s, p) {\n  return Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;\n};\n/**\n * Easing functions adapted from Robert Penner's easing equations.\n * @namespace Chart.helpers.easing.effects\n * @see http://www.robertpenner.com/easing/\n */\n\n\nvar effects = {\n  linear: function linear(t) {\n    return t;\n  },\n  easeInQuad: function easeInQuad(t) {\n    return t * t;\n  },\n  easeOutQuad: function easeOutQuad(t) {\n    return -t * (t - 2);\n  },\n  easeInOutQuad: function easeInOutQuad(t) {\n    return (t /= 0.5) < 1 ? 0.5 * t * t : -0.5 * (--t * (t - 2) - 1);\n  },\n  easeInCubic: function easeInCubic(t) {\n    return t * t * t;\n  },\n  easeOutCubic: function easeOutCubic(t) {\n    return (t -= 1) * t * t + 1;\n  },\n  easeInOutCubic: function easeInOutCubic(t) {\n    return (t /= 0.5) < 1 ? 0.5 * t * t * t : 0.5 * ((t -= 2) * t * t + 2);\n  },\n  easeInQuart: function easeInQuart(t) {\n    return t * t * t * t;\n  },\n  easeOutQuart: function easeOutQuart(t) {\n    return -((t -= 1) * t * t * t - 1);\n  },\n  easeInOutQuart: function easeInOutQuart(t) {\n    return (t /= 0.5) < 1 ? 0.5 * t * t * t * t : -0.5 * ((t -= 2) * t * t * t - 2);\n  },\n  easeInQuint: function easeInQuint(t) {\n    return t * t * t * t * t;\n  },\n  easeOutQuint: function easeOutQuint(t) {\n    return (t -= 1) * t * t * t * t + 1;\n  },\n  easeInOutQuint: function easeInOutQuint(t) {\n    return (t /= 0.5) < 1 ? 0.5 * t * t * t * t * t : 0.5 * ((t -= 2) * t * t * t * t + 2);\n  },\n  easeInSine: function easeInSine(t) {\n    return -Math.cos(t * HALF_PI) + 1;\n  },\n  easeOutSine: function easeOutSine(t) {\n    return Math.sin(t * HALF_PI);\n  },\n  easeInOutSine: function easeInOutSine(t) {\n    return -0.5 * (Math.cos(PI * t) - 1);\n  },\n  easeInExpo: function easeInExpo(t) {\n    return t === 0 ? 0 : Math.pow(2, 10 * (t - 1));\n  },\n  easeOutExpo: function easeOutExpo(t) {\n    return t === 1 ? 1 : -Math.pow(2, -10 * t) + 1;\n  },\n  easeInOutExpo: function easeInOutExpo(t) {\n    return atEdge(t) ? t : t < 0.5 ? 0.5 * Math.pow(2, 10 * (t * 2 - 1)) : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2);\n  },\n  easeInCirc: function easeInCirc(t) {\n    return t >= 1 ? t : -(Math.sqrt(1 - t * t) - 1);\n  },\n  easeOutCirc: function easeOutCirc(t) {\n    return Math.sqrt(1 - (t -= 1) * t);\n  },\n  easeInOutCirc: function easeInOutCirc(t) {\n    return (t /= 0.5) < 1 ? -0.5 * (Math.sqrt(1 - t * t) - 1) : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n  },\n  easeInElastic: function easeInElastic(t) {\n    return atEdge(t) ? t : elasticIn(t, 0.075, 0.3);\n  },\n  easeOutElastic: function easeOutElastic(t) {\n    return atEdge(t) ? t : elasticOut(t, 0.075, 0.3);\n  },\n  easeInOutElastic: function easeInOutElastic(t) {\n    var s = 0.1125;\n    var p = 0.45;\n    return atEdge(t) ? t : t < 0.5 ? 0.5 * elasticIn(t * 2, s, p) : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);\n  },\n  easeInBack: function easeInBack(t) {\n    var s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n  },\n  easeOutBack: function easeOutBack(t) {\n    var s = 1.70158;\n    return (t -= 1) * t * ((s + 1) * t + s) + 1;\n  },\n  easeInOutBack: function easeInOutBack(t) {\n    var s = 1.70158;\n\n    if ((t /= 0.5) < 1) {\n      return 0.5 * (t * t * (((s *= 1.525) + 1) * t - s));\n    }\n\n    return 0.5 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2);\n  },\n  easeInBounce: function easeInBounce(t) {\n    return 1 - effects.easeOutBounce(1 - t);\n  },\n  easeOutBounce: function easeOutBounce(t) {\n    var m = 7.5625;\n    var d = 2.75;\n\n    if (t < 1 / d) {\n      return m * t * t;\n    }\n\n    if (t < 2 / d) {\n      return m * (t -= 1.5 / d) * t + 0.75;\n    }\n\n    if (t < 2.5 / d) {\n      return m * (t -= 2.25 / d) * t + 0.9375;\n    }\n\n    return m * (t -= 2.625 / d) * t + 0.984375;\n  },\n  easeInOutBounce: function easeInOutBounce(t) {\n    return t < 0.5 ? effects.easeInBounce(t * 2) * 0.5 : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5;\n  }\n};\nexports.e = effects;\n\nfunction isPatternOrGradient(value) {\n  if (value && (0, _typeof2.default)(value) === 'object') {\n    var type = value.toString();\n    return type === '[object CanvasPattern]' || type === '[object CanvasGradient]';\n  }\n\n  return false;\n}\n\nfunction color(value) {\n  return isPatternOrGradient(value) ? value : new _color.Color(value);\n}\n\nfunction getHoverColor(value) {\n  return isPatternOrGradient(value) ? value : new _color.Color(value).saturate(0.5).darken(0.1).hexString();\n}\n\nvar numbers = ['x', 'y', 'borderWidth', 'radius', 'tension'];\nvar colors = ['color', 'borderColor', 'backgroundColor'];\n\nfunction applyAnimationsDefaults(defaults) {\n  defaults.set('animation', {\n    delay: undefined,\n    duration: 1000,\n    easing: 'easeOutQuart',\n    fn: undefined,\n    from: undefined,\n    loop: undefined,\n    to: undefined,\n    type: undefined\n  });\n  defaults.describe('animation', {\n    _fallback: false,\n    _indexable: false,\n    _scriptable: function _scriptable(name) {\n      return name !== 'onProgress' && name !== 'onComplete' && name !== 'fn';\n    }\n  });\n  defaults.set('animations', {\n    colors: {\n      type: 'color',\n      properties: colors\n    },\n    numbers: {\n      type: 'number',\n      properties: numbers\n    }\n  });\n  defaults.describe('animations', {\n    _fallback: 'animation'\n  });\n  defaults.set('transitions', {\n    active: {\n      animation: {\n        duration: 400\n      }\n    },\n    resize: {\n      animation: {\n        duration: 0\n      }\n    },\n    show: {\n      animations: {\n        colors: {\n          from: 'transparent'\n        },\n        visible: {\n          type: 'boolean',\n          duration: 0\n        }\n      }\n    },\n    hide: {\n      animations: {\n        colors: {\n          to: 'transparent'\n        },\n        visible: {\n          type: 'boolean',\n          easing: 'linear',\n          fn: function fn(v) {\n            return v | 0;\n          }\n        }\n      }\n    }\n  });\n}\n\nfunction applyLayoutsDefaults(defaults) {\n  defaults.set('layout', {\n    autoPadding: true,\n    padding: {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    }\n  });\n}\n\nvar intlCache = new Map();\n\nfunction getNumberFormat(locale, options) {\n  options = options || {};\n  var cacheKey = locale + JSON.stringify(options);\n  var formatter = intlCache.get(cacheKey);\n\n  if (!formatter) {\n    formatter = new Intl.NumberFormat(locale, options);\n    intlCache.set(cacheKey, formatter);\n  }\n\n  return formatter;\n}\n\nfunction formatNumber(num, locale, options) {\n  return getNumberFormat(locale, options).format(num);\n}\n\nvar formatters = {\n  values: function values(value) {\n    return isArray(value) ? value : '' + value;\n  },\n  numeric: function numeric(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0';\n    }\n\n    var locale = this.chart.options.locale;\n    var notation;\n    var delta = tickValue;\n\n    if (ticks.length > 1) {\n      var maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));\n\n      if (maxTick < 1e-4 || maxTick > 1e+15) {\n        notation = 'scientific';\n      }\n\n      delta = calculateDelta(tickValue, ticks);\n    }\n\n    var logDelta = log10(Math.abs(delta));\n    var numDecimal = isNaN(logDelta) ? 1 : Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0);\n    var options = {\n      notation: notation,\n      minimumFractionDigits: numDecimal,\n      maximumFractionDigits: numDecimal\n    };\n    Object.assign(options, this.options.ticks.format);\n    return formatNumber(tickValue, locale, options);\n  },\n  logarithmic: function logarithmic(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0';\n    }\n\n    var remain = ticks[index].significand || tickValue / Math.pow(10, Math.floor(log10(tickValue)));\n\n    if ([1, 2, 3, 5, 10, 15].includes(remain) || index > 0.8 * ticks.length) {\n      return formatters.numeric.call(this, tickValue, index, ticks);\n    }\n\n    return '';\n  }\n};\n\nfunction calculateDelta(tickValue, ticks) {\n  var delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;\n\n  if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {\n    delta = tickValue - Math.floor(tickValue);\n  }\n\n  return delta;\n}\n\nvar Ticks = {\n  formatters: formatters\n};\nexports.aM = Ticks;\n\nfunction applyScaleDefaults(defaults) {\n  defaults.set('scale', {\n    display: true,\n    offset: false,\n    reverse: false,\n    beginAtZero: false,\n    bounds: 'ticks',\n    clip: true,\n    grace: 0,\n    grid: {\n      display: true,\n      lineWidth: 1,\n      drawOnChartArea: true,\n      drawTicks: true,\n      tickLength: 8,\n      tickWidth: function tickWidth(_ctx, options) {\n        return options.lineWidth;\n      },\n      tickColor: function tickColor(_ctx, options) {\n        return options.color;\n      },\n      offset: false\n    },\n    border: {\n      display: true,\n      dash: [],\n      dashOffset: 0.0,\n      width: 1\n    },\n    title: {\n      display: false,\n      text: '',\n      padding: {\n        top: 4,\n        bottom: 4\n      }\n    },\n    ticks: {\n      minRotation: 0,\n      maxRotation: 50,\n      mirror: false,\n      textStrokeWidth: 0,\n      textStrokeColor: '',\n      padding: 3,\n      display: true,\n      autoSkip: true,\n      autoSkipPadding: 3,\n      labelOffset: 0,\n      callback: Ticks.formatters.values,\n      minor: {},\n      major: {},\n      align: 'center',\n      crossAlign: 'near',\n      showLabelBackdrop: false,\n      backdropColor: 'rgba(255, 255, 255, 0.75)',\n      backdropPadding: 2\n    }\n  });\n  defaults.route('scale.ticks', 'color', '', 'color');\n  defaults.route('scale.grid', 'color', '', 'borderColor');\n  defaults.route('scale.border', 'color', '', 'borderColor');\n  defaults.route('scale.title', 'color', '', 'color');\n  defaults.describe('scale', {\n    _fallback: false,\n    _scriptable: function _scriptable(name) {\n      return !name.startsWith('before') && !name.startsWith('after') && name !== 'callback' && name !== 'parser';\n    },\n    _indexable: function _indexable(name) {\n      return name !== 'borderDash' && name !== 'tickBorderDash' && name !== 'dash';\n    }\n  });\n  defaults.describe('scales', {\n    _fallback: 'scale'\n  });\n  defaults.describe('scale.ticks', {\n    _scriptable: function _scriptable(name) {\n      return name !== 'backdropPadding' && name !== 'callback';\n    },\n    _indexable: function _indexable(name) {\n      return name !== 'backdropPadding';\n    }\n  });\n}\n\nvar overrides = Object.create(null);\nexports.a3 = overrides;\nvar descriptors = Object.create(null);\nexports.a6 = descriptors;\n\nfunction getScope$1(node, key) {\n  if (!key) {\n    return node;\n  }\n\n  var keys = key.split('.');\n\n  for (var i = 0, n = keys.length; i < n; ++i) {\n    var k = keys[i];\n    node = node[k] || (node[k] = Object.create(null));\n  }\n\n  return node;\n}\n\nfunction _set(root, scope, values) {\n  if (typeof scope === 'string') {\n    return merge(getScope$1(root, scope), values);\n  }\n\n  return merge(getScope$1(root, ''), scope);\n}\n\nvar Defaults =\n/*#__PURE__*/\nfunction () {\n  function Defaults(_descriptors, _appliers) {\n    (0, _classCallCheck2.default)(this, Defaults);\n    this.animation = undefined;\n    this.backgroundColor = 'rgba(0,0,0,0.1)';\n    this.borderColor = 'rgba(0,0,0,0.1)';\n    this.color = '#666';\n    this.datasets = {};\n\n    this.devicePixelRatio = function (context) {\n      return context.chart.platform.getDevicePixelRatio();\n    };\n\n    this.elements = {};\n    this.events = ['mousemove', 'mouseout', 'click', 'touchstart', 'touchmove'];\n    this.font = {\n      family: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n      size: 12,\n      style: 'normal',\n      lineHeight: 1.2,\n      weight: null\n    };\n    this.hover = {};\n\n    this.hoverBackgroundColor = function (ctx, options) {\n      return getHoverColor(options.backgroundColor);\n    };\n\n    this.hoverBorderColor = function (ctx, options) {\n      return getHoverColor(options.borderColor);\n    };\n\n    this.hoverColor = function (ctx, options) {\n      return getHoverColor(options.color);\n    };\n\n    this.indexAxis = 'x';\n    this.interaction = {\n      mode: 'nearest',\n      intersect: true,\n      includeInvisible: false\n    };\n    this.maintainAspectRatio = true;\n    this.onHover = null;\n    this.onClick = null;\n    this.parsing = true;\n    this.plugins = {};\n    this.responsive = true;\n    this.scale = undefined;\n    this.scales = {};\n    this.showLine = true;\n    this.drawActiveElementsOnTop = true;\n    this.describe(_descriptors);\n    this.apply(_appliers);\n  }\n\n  (0, _createClass2.default)(Defaults, [{\n    key: \"set\",\n    value: function set(scope, values) {\n      return _set(this, scope, values);\n    }\n  }, {\n    key: \"get\",\n    value: function get(scope) {\n      return getScope$1(this, scope);\n    }\n  }, {\n    key: \"describe\",\n    value: function describe(scope, values) {\n      return _set(descriptors, scope, values);\n    }\n  }, {\n    key: \"override\",\n    value: function override(scope, values) {\n      return _set(overrides, scope, values);\n    }\n  }, {\n    key: \"route\",\n    value: function route(scope, name, targetScope, targetName) {\n      var _Object$definePropert;\n\n      var scopeObject = getScope$1(this, scope);\n      var targetScopeObject = getScope$1(this, targetScope);\n      var privateName = '_' + name;\n      Object.defineProperties(scopeObject, (_Object$definePropert = {}, (0, _defineProperty2.default)(_Object$definePropert, privateName, {\n        value: scopeObject[name],\n        writable: true\n      }), (0, _defineProperty2.default)(_Object$definePropert, name, {\n        enumerable: true,\n        get: function get() {\n          var local = this[privateName];\n          var target = targetScopeObject[targetName];\n\n          if (isObject(local)) {\n            return Object.assign({}, target, local);\n          }\n\n          return valueOrDefault(local, target);\n        },\n        set: function set(value) {\n          this[privateName] = value;\n        }\n      }), _Object$definePropert));\n    }\n  }, {\n    key: \"apply\",\n    value: function apply(appliers) {\n      var _this = this;\n\n      appliers.forEach(function (apply) {\n        return apply(_this);\n      });\n    }\n  }]);\n  return Defaults;\n}();\n\nvar defaults =\n/* #__PURE__ */\nnew Defaults({\n  _scriptable: function _scriptable(name) {\n    return !name.startsWith('on');\n  },\n  _indexable: function _indexable(name) {\n    return name !== 'events';\n  },\n  hover: {\n    _fallback: 'interaction'\n  },\n  interaction: {\n    _scriptable: false,\n    _indexable: false\n  }\n}, [applyAnimationsDefaults, applyLayoutsDefaults, applyScaleDefaults]);\n/**\n * Converts the given font object into a CSS font string.\n * @param font - A font object.\n * @return The CSS font string. See https://developer.mozilla.org/en-US/docs/Web/CSS/font\n * @private\n */\n\nexports.d = defaults;\n\nfunction toFontString(font) {\n  if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {\n    return null;\n  }\n\n  return (font.style ? font.style + ' ' : '') + (font.weight ? font.weight + ' ' : '') + font.size + 'px ' + font.family;\n}\n/**\n * @private\n */\n\n\nfunction _measureText(ctx, data, gc, longest, string) {\n  var textWidth = data[string];\n\n  if (!textWidth) {\n    textWidth = data[string] = ctx.measureText(string).width;\n    gc.push(string);\n  }\n\n  if (textWidth > longest) {\n    longest = textWidth;\n  }\n\n  return longest;\n}\n/**\n * @private\n */\n// eslint-disable-next-line complexity\n\n\nfunction _longestText(ctx, font, arrayOfThings, cache) {\n  cache = cache || {};\n  var data = cache.data = cache.data || {};\n  var gc = cache.garbageCollect = cache.garbageCollect || [];\n\n  if (cache.font !== font) {\n    data = cache.data = {};\n    gc = cache.garbageCollect = [];\n    cache.font = font;\n  }\n\n  ctx.save();\n  ctx.font = font;\n  var longest = 0;\n  var ilen = arrayOfThings.length;\n  var i, j, jlen, thing, nestedThing;\n\n  for (i = 0; i < ilen; i++) {\n    thing = arrayOfThings[i]; // Undefined strings and arrays should not be measured\n\n    if (thing !== undefined && thing !== null && !isArray(thing)) {\n      longest = _measureText(ctx, data, gc, longest, thing);\n    } else if (isArray(thing)) {\n      // if it is an array lets measure each element\n      // to do maybe simplify this function a bit so we can do this more recursively?\n      for (j = 0, jlen = thing.length; j < jlen; j++) {\n        nestedThing = thing[j]; // Undefined strings and arrays should not be measured\n\n        if (nestedThing !== undefined && nestedThing !== null && !isArray(nestedThing)) {\n          longest = _measureText(ctx, data, gc, longest, nestedThing);\n        }\n      }\n    }\n  }\n\n  ctx.restore();\n  var gcLen = gc.length / 2;\n\n  if (gcLen > arrayOfThings.length) {\n    for (i = 0; i < gcLen; i++) {\n      delete data[gc[i]];\n    }\n\n    gc.splice(0, gcLen);\n  }\n\n  return longest;\n}\n/**\n * Returns the aligned pixel value to avoid anti-aliasing blur\n * @param chart - The chart instance.\n * @param pixel - A pixel value.\n * @param width - The width of the element.\n * @returns The aligned pixel value.\n * @private\n */\n\n\nfunction _alignPixel(chart, pixel, width) {\n  var devicePixelRatio = chart.currentDevicePixelRatio;\n  var halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;\n  return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\n}\n/**\n * Clears the entire canvas.\n */\n\n\nfunction clearCanvas(canvas, ctx) {\n  if (!ctx && !canvas) {\n    return;\n  }\n\n  ctx = ctx || canvas.getContext('2d');\n  ctx.save(); // canvas.width and canvas.height do not consider the canvas transform,\n  // while clearRect does\n\n  ctx.resetTransform();\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.restore();\n}\n\nfunction drawPoint(ctx, options, x, y) {\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  drawPointLegend(ctx, options, x, y, null);\n} // eslint-disable-next-line complexity\n\n\nfunction drawPointLegend(ctx, options, x, y, w) {\n  var type, xOffset, yOffset, size, cornerRadius, width, xOffsetW, yOffsetW;\n  var style = options.pointStyle;\n  var rotation = options.rotation;\n  var radius = options.radius;\n  var rad = (rotation || 0) * RAD_PER_DEG;\n\n  if (style && (0, _typeof2.default)(style) === 'object') {\n    type = style.toString();\n\n    if (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.rotate(rad);\n      ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\n      ctx.restore();\n      return;\n    }\n  }\n\n  if (isNaN(radius) || radius <= 0) {\n    return;\n  }\n\n  ctx.beginPath();\n\n  switch (style) {\n    // Default includes circle\n    default:\n      if (w) {\n        ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);\n      } else {\n        ctx.arc(x, y, radius, 0, TAU);\n      }\n\n      ctx.closePath();\n      break;\n\n    case 'triangle':\n      width = w ? w / 2 : radius;\n      ctx.moveTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n      rad += TWO_THIRDS_PI;\n      ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n      rad += TWO_THIRDS_PI;\n      ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n      ctx.closePath();\n      break;\n\n    case 'rectRounded':\n      // NOTE: the rounded rect implementation changed to use `arc` instead of\n      // `quadraticCurveTo` since it generates better results when rect is\n      // almost a circle. 0.516 (instead of 0.5) produces results with visually\n      // closer proportion to the previous impl and it is inscribed in the\n      // circle with `radius`. For more details, see the following PRs:\n      // https://github.com/chartjs/Chart.js/issues/5597\n      // https://github.com/chartjs/Chart.js/issues/5858\n      cornerRadius = radius * 0.516;\n      size = radius - cornerRadius;\n      xOffset = Math.cos(rad + QUARTER_PI) * size;\n      xOffsetW = Math.cos(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n      yOffset = Math.sin(rad + QUARTER_PI) * size;\n      yOffsetW = Math.sin(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n      ctx.arc(x - xOffsetW, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\n      ctx.arc(x + yOffsetW, y - xOffset, cornerRadius, rad - HALF_PI, rad);\n      ctx.arc(x + xOffsetW, y + yOffset, cornerRadius, rad, rad + HALF_PI);\n      ctx.arc(x - yOffsetW, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\n      ctx.closePath();\n      break;\n\n    case 'rect':\n      if (!rotation) {\n        size = Math.SQRT1_2 * radius;\n        width = w ? w / 2 : size;\n        ctx.rect(x - width, y - size, 2 * width, 2 * size);\n        break;\n      }\n\n      rad += QUARTER_PI;\n\n    /* falls through */\n\n    case 'rectRot':\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      ctx.closePath();\n      break;\n\n    case 'crossRot':\n      rad += QUARTER_PI;\n\n    /* falls through */\n\n    case 'cross':\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.moveTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      break;\n\n    case 'star':\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.moveTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      rad += QUARTER_PI;\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.moveTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      break;\n\n    case 'line':\n      xOffset = w ? w / 2 : Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      ctx.moveTo(x - xOffset, y - yOffset);\n      ctx.lineTo(x + xOffset, y + yOffset);\n      break;\n\n    case 'dash':\n      ctx.moveTo(x, y);\n      ctx.lineTo(x + Math.cos(rad) * (w ? w / 2 : radius), y + Math.sin(rad) * radius);\n      break;\n\n    case false:\n      ctx.closePath();\n      break;\n  }\n\n  ctx.fill();\n\n  if (options.borderWidth > 0) {\n    ctx.stroke();\n  }\n}\n/**\n * Returns true if the point is inside the rectangle\n * @param point - The point to test\n * @param area - The rectangle\n * @param margin - allowed margin\n * @private\n */\n\n\nfunction _isPointInArea(point, area, margin) {\n  margin = margin || 0.5; // margin - default is to match rounded decimals\n\n  return !area || point && point.x > area.left - margin && point.x < area.right + margin && point.y > area.top - margin && point.y < area.bottom + margin;\n}\n\nfunction clipArea(ctx, area) {\n  ctx.save();\n  ctx.beginPath();\n  ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\n  ctx.clip();\n}\n\nfunction unclipArea(ctx) {\n  ctx.restore();\n}\n/**\n * @private\n */\n\n\nfunction _steppedLineTo(ctx, previous, target, flip, mode) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n\n  if (mode === 'middle') {\n    var midpoint = (previous.x + target.x) / 2.0;\n    ctx.lineTo(midpoint, previous.y);\n    ctx.lineTo(midpoint, target.y);\n  } else if (mode === 'after' !== !!flip) {\n    ctx.lineTo(previous.x, target.y);\n  } else {\n    ctx.lineTo(target.x, previous.y);\n  }\n\n  ctx.lineTo(target.x, target.y);\n}\n/**\n * @private\n */\n\n\nfunction _bezierCurveTo(ctx, previous, target, flip) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n\n  ctx.bezierCurveTo(flip ? previous.cp1x : previous.cp2x, flip ? previous.cp1y : previous.cp2y, flip ? target.cp2x : target.cp1x, flip ? target.cp2y : target.cp1y, target.x, target.y);\n}\n\nfunction setRenderOpts(ctx, opts) {\n  if (opts.translation) {\n    ctx.translate(opts.translation[0], opts.translation[1]);\n  }\n\n  if (!isNullOrUndef(opts.rotation)) {\n    ctx.rotate(opts.rotation);\n  }\n\n  if (opts.color) {\n    ctx.fillStyle = opts.color;\n  }\n\n  if (opts.textAlign) {\n    ctx.textAlign = opts.textAlign;\n  }\n\n  if (opts.textBaseline) {\n    ctx.textBaseline = opts.textBaseline;\n  }\n}\n\nfunction decorateText(ctx, x, y, line, opts) {\n  if (opts.strikethrough || opts.underline) {\n    /**\n    * Now that IE11 support has been dropped, we can use more\n    * of the TextMetrics object. The actual bounding boxes\n    * are unflagged in Chrome, Firefox, Edge, and Safari so they\n    * can be safely used.\n    * See https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics#Browser_compatibility\n    */\n    var metrics = ctx.measureText(line);\n    var left = x - metrics.actualBoundingBoxLeft;\n    var right = x + metrics.actualBoundingBoxRight;\n    var top = y - metrics.actualBoundingBoxAscent;\n    var bottom = y + metrics.actualBoundingBoxDescent;\n    var yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;\n    ctx.strokeStyle = ctx.fillStyle;\n    ctx.beginPath();\n    ctx.lineWidth = opts.decorationWidth || 2;\n    ctx.moveTo(left, yDecoration);\n    ctx.lineTo(right, yDecoration);\n    ctx.stroke();\n  }\n}\n\nfunction drawBackdrop(ctx, opts) {\n  var oldColor = ctx.fillStyle;\n  ctx.fillStyle = opts.color;\n  ctx.fillRect(opts.left, opts.top, opts.width, opts.height);\n  ctx.fillStyle = oldColor;\n}\n/**\n * Render text onto the canvas\n */\n\n\nfunction renderText(ctx, text, x, y, font) {\n  var opts = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n  var lines = isArray(text) ? text : [text];\n  var stroke = opts.strokeWidth > 0 && opts.strokeColor !== '';\n  var i, line;\n  ctx.save();\n  ctx.font = font.string;\n  setRenderOpts(ctx, opts);\n\n  for (i = 0; i < lines.length; ++i) {\n    line = lines[i];\n\n    if (opts.backdrop) {\n      drawBackdrop(ctx, opts.backdrop);\n    }\n\n    if (stroke) {\n      if (opts.strokeColor) {\n        ctx.strokeStyle = opts.strokeColor;\n      }\n\n      if (!isNullOrUndef(opts.strokeWidth)) {\n        ctx.lineWidth = opts.strokeWidth;\n      }\n\n      ctx.strokeText(line, x, y, opts.maxWidth);\n    }\n\n    ctx.fillText(line, x, y, opts.maxWidth);\n    decorateText(ctx, x, y, line, opts);\n    y += Number(font.lineHeight);\n  }\n\n  ctx.restore();\n}\n/**\n * Add a path of a rectangle with rounded corners to the current sub-path\n * @param ctx - Context\n * @param rect - Bounding rect\n */\n\n\nfunction addRoundedRectPath(ctx, rect) {\n  var x = rect.x,\n      y = rect.y,\n      w = rect.w,\n      h = rect.h,\n      radius = rect.radius; // top left arc\n\n  ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, 1.5 * PI, PI, true); // line from top left to bottom left\n\n  ctx.lineTo(x, y + h - radius.bottomLeft); // bottom left arc\n\n  ctx.arc(x + radius.bottomLeft, y + h - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true); // line from bottom left to bottom right\n\n  ctx.lineTo(x + w - radius.bottomRight, y + h); // bottom right arc\n\n  ctx.arc(x + w - radius.bottomRight, y + h - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true); // line from bottom right to top right\n\n  ctx.lineTo(x + w, y + radius.topRight); // top right arc\n\n  ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true); // line from top right to top left\n\n  ctx.lineTo(x + radius.topLeft, y);\n}\n\nvar LINE_HEIGHT = /^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/;\nvar FONT_STYLE = /^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;\n/**\n * @alias Chart.helpers.options\n * @namespace\n */\n\n/**\n* Converts the given line height `value` in pixels for a specific font `size`.\n* @param value - The lineHeight to parse (eg. 1.6, '14px', '75%', '1.6em').\n* @param size - The font size (in pixels) used to resolve relative `value`.\n* @returns The effective line height in pixels (size * 1.2 if value is invalid).\n* @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\n* @since 2.7.0\n*/\n\nfunction toLineHeight(value, size) {\n  var matches = ('' + value).match(LINE_HEIGHT);\n\n  if (!matches || matches[1] === 'normal') {\n    return size * 1.2;\n  }\n\n  value = +matches[2];\n\n  switch (matches[3]) {\n    case 'px':\n      return value;\n\n    case '%':\n      value /= 100;\n      break;\n  }\n\n  return size * value;\n}\n\nvar numberOrZero = function numberOrZero(v) {\n  return +v || 0;\n};\n\nfunction _readValueToProps(value, props) {\n  var ret = {};\n  var objProps = isObject(props);\n  var keys = objProps ? Object.keys(props) : props;\n  var read = isObject(value) ? objProps ? function (prop) {\n    return valueOrDefault(value[prop], value[props[prop]]);\n  } : function (prop) {\n    return value[prop];\n  } : function () {\n    return value;\n  };\n  var _iteratorNormalCompletion4 = true;\n  var _didIteratorError4 = false;\n  var _iteratorError4 = undefined;\n\n  try {\n    for (var _iterator4 = keys[Symbol.iterator](), _step4; !(_iteratorNormalCompletion4 = (_step4 = _iterator4.next()).done); _iteratorNormalCompletion4 = true) {\n      var prop = _step4.value;\n      ret[prop] = numberOrZero(read(prop));\n    }\n  } catch (err) {\n    _didIteratorError4 = true;\n    _iteratorError4 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion4 && _iterator4.return != null) {\n        _iterator4.return();\n      }\n    } finally {\n      if (_didIteratorError4) {\n        throw _iteratorError4;\n      }\n    }\n  }\n\n  return ret;\n}\n/**\n * Converts the given value into a TRBL object.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left)\n * @since 3.0.0\n */\n\n\nfunction toTRBL(value) {\n  return _readValueToProps(value, {\n    top: 'y',\n    right: 'x',\n    bottom: 'y',\n    left: 'x'\n  });\n}\n/**\n * Converts the given value into a TRBL corners object (similar with css border-radius).\n * @param value - If a number, set the value to all TRBL corner components,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n * @returns The TRBL corner values (topLeft, topRight, bottomLeft, bottomRight)\n * @since 3.0.0\n */\n\n\nfunction toTRBLCorners(value) {\n  return _readValueToProps(value, ['topLeft', 'topRight', 'bottomLeft', 'bottomRight']);\n}\n/**\n * Converts the given value into a padding object with pre-computed width/height.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left, width, height)\n * @since 2.7.0\n */\n\n\nfunction toPadding(value) {\n  var obj = toTRBL(value);\n  obj.width = obj.left + obj.right;\n  obj.height = obj.top + obj.bottom;\n  return obj;\n}\n/**\n * Parses font options and returns the font object.\n * @param options - A object that contains font options to be parsed.\n * @param fallback - A object that contains fallback font options.\n * @return The font object.\n * @private\n */\n\n\nfunction toFont(options, fallback) {\n  options = options || {};\n  fallback = fallback || defaults.font;\n  var size = valueOrDefault(options.size, fallback.size);\n\n  if (typeof size === 'string') {\n    size = parseInt(size, 10);\n  }\n\n  var style = valueOrDefault(options.style, fallback.style);\n\n  if (style && !('' + style).match(FONT_STYLE)) {\n    console.warn('Invalid font style specified: \"' + style + '\"');\n    style = undefined;\n  }\n\n  var font = {\n    family: valueOrDefault(options.family, fallback.family),\n    lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),\n    size: size,\n    style: style,\n    weight: valueOrDefault(options.weight, fallback.weight),\n    string: ''\n  };\n  font.string = toFontString(font);\n  return font;\n}\n/**\n * Evaluates the given `inputs` sequentially and returns the first defined value.\n * @param inputs - An array of values, falling back to the last value.\n * @param context - If defined and the current value is a function, the value\n * is called with `context` as first argument and the result becomes the new input.\n * @param index - If defined and the current value is an array, the value\n * at `index` become the new input.\n * @param info - object to return information about resolution in\n * @param info.cacheable - Will be set to `false` if option is not cacheable.\n * @since 2.7.0\n */\n\n\nfunction resolve(inputs, context, index, info) {\n  var cacheable = true;\n  var i, ilen, value;\n\n  for (i = 0, ilen = inputs.length; i < ilen; ++i) {\n    value = inputs[i];\n\n    if (value === undefined) {\n      continue;\n    }\n\n    if (context !== undefined && typeof value === 'function') {\n      value = value(context);\n      cacheable = false;\n    }\n\n    if (index !== undefined && isArray(value)) {\n      value = value[index % value.length];\n      cacheable = false;\n    }\n\n    if (value !== undefined) {\n      if (info && !cacheable) {\n        info.cacheable = false;\n      }\n\n      return value;\n    }\n  }\n}\n/**\n * @param minmax\n * @param grace\n * @param beginAtZero\n * @private\n */\n\n\nfunction _addGrace(minmax, grace, beginAtZero) {\n  var min = minmax.min,\n      max = minmax.max;\n  var change = toDimension(grace, (max - min) / 2);\n\n  var keepZero = function keepZero(value, add) {\n    return beginAtZero && value === 0 ? 0 : value + add;\n  };\n\n  return {\n    min: keepZero(min, -Math.abs(change)),\n    max: keepZero(max, change)\n  };\n}\n\nfunction createContext(parentContext, context) {\n  return Object.assign(Object.create(parentContext), context);\n}\n/**\n * Creates a Proxy for resolving raw values for options.\n * @param scopes - The option scopes to look for values, in resolution order\n * @param prefixes - The prefixes for values, in resolution order.\n * @param rootScopes - The root option scopes\n * @param fallback - Parent scopes fallback\n * @param getTarget - callback for getting the target for changed values\n * @returns Proxy\n * @private\n */\n\n\nfunction _createResolver(scopes) {\n  var _cache;\n\n  var prefixes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [''];\n  var rootScopes = arguments.length > 2 ? arguments[2] : undefined;\n  var fallback = arguments.length > 3 ? arguments[3] : undefined;\n  var getTarget = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : function () {\n    return scopes[0];\n  };\n  var finalRootScopes = rootScopes || scopes;\n\n  if (typeof fallback === 'undefined') {\n    fallback = _resolve('_fallback', scopes);\n  }\n\n  var cache = (_cache = {}, (0, _defineProperty2.default)(_cache, Symbol.toStringTag, 'Object'), (0, _defineProperty2.default)(_cache, \"_cacheable\", true), (0, _defineProperty2.default)(_cache, \"_scopes\", scopes), (0, _defineProperty2.default)(_cache, \"_rootScopes\", finalRootScopes), (0, _defineProperty2.default)(_cache, \"_fallback\", fallback), (0, _defineProperty2.default)(_cache, \"_getTarget\", getTarget), (0, _defineProperty2.default)(_cache, \"override\", function override(scope) {\n    return _createResolver([scope].concat((0, _toConsumableArray2.default)(scopes)), prefixes, finalRootScopes, fallback);\n  }), _cache);\n  return new Proxy(cache, {\n    /**\n    * A trap for the delete operator.\n    */\n    deleteProperty: function deleteProperty(target, prop) {\n      delete target[prop]; // remove from cache\n\n      delete target._keys; // remove cached keys\n\n      delete scopes[0][prop]; // remove from top level scope\n\n      return true;\n    },\n\n    /**\n    * A trap for getting property values.\n    */\n    get: function get(target, prop) {\n      return _cached(target, prop, function () {\n        return _resolveWithPrefixes(prop, prefixes, scopes, target);\n      });\n    },\n\n    /**\n    * A trap for Object.getOwnPropertyDescriptor.\n    * Also used by Object.hasOwnProperty.\n    */\n    getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, prop) {\n      return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);\n    },\n\n    /**\n    * A trap for Object.getPrototypeOf.\n    */\n    getPrototypeOf: function getPrototypeOf() {\n      return Reflect.getPrototypeOf(scopes[0]);\n    },\n\n    /**\n    * A trap for the in operator.\n    */\n    has: function has(target, prop) {\n      return getKeysFromAllScopes(target).includes(prop);\n    },\n\n    /**\n    * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n    */\n    ownKeys: function ownKeys(target) {\n      return getKeysFromAllScopes(target);\n    },\n\n    /**\n    * A trap for setting property values.\n    */\n    set: function set(target, prop, value) {\n      var storage = target._storage || (target._storage = getTarget());\n      target[prop] = storage[prop] = value; // set to top level scope + cache\n\n      delete target._keys; // remove cached keys\n\n      return true;\n    }\n  });\n}\n/**\n * Returns an Proxy for resolving option values with context.\n * @param proxy - The Proxy returned by `_createResolver`\n * @param context - Context object for scriptable/indexable options\n * @param subProxy - The proxy provided for scriptable options\n * @param descriptorDefaults - Defaults for descriptors\n * @private\n */\n\n\nfunction _attachContext(proxy, context, subProxy, descriptorDefaults) {\n  var cache = {\n    _cacheable: false,\n    _proxy: proxy,\n    _context: context,\n    _subProxy: subProxy,\n    _stack: new Set(),\n    _descriptors: _descriptors(proxy, descriptorDefaults),\n    setContext: function setContext(ctx) {\n      return _attachContext(proxy, ctx, subProxy, descriptorDefaults);\n    },\n    override: function override(scope) {\n      return _attachContext(proxy.override(scope), context, subProxy, descriptorDefaults);\n    }\n  };\n  return new Proxy(cache, {\n    /**\n    * A trap for the delete operator.\n    */\n    deleteProperty: function deleteProperty(target, prop) {\n      delete target[prop]; // remove from cache\n\n      delete proxy[prop]; // remove from proxy\n\n      return true;\n    },\n\n    /**\n    * A trap for getting property values.\n    */\n    get: function get(target, prop, receiver) {\n      return _cached(target, prop, function () {\n        return _resolveWithContext(target, prop, receiver);\n      });\n    },\n\n    /**\n    * A trap for Object.getOwnPropertyDescriptor.\n    * Also used by Object.hasOwnProperty.\n    */\n    getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, prop) {\n      return target._descriptors.allKeys ? Reflect.has(proxy, prop) ? {\n        enumerable: true,\n        configurable: true\n      } : undefined : Reflect.getOwnPropertyDescriptor(proxy, prop);\n    },\n\n    /**\n    * A trap for Object.getPrototypeOf.\n    */\n    getPrototypeOf: function getPrototypeOf() {\n      return Reflect.getPrototypeOf(proxy);\n    },\n\n    /**\n    * A trap for the in operator.\n    */\n    has: function has(target, prop) {\n      return Reflect.has(proxy, prop);\n    },\n\n    /**\n    * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n    */\n    ownKeys: function ownKeys() {\n      return Reflect.ownKeys(proxy);\n    },\n\n    /**\n    * A trap for setting property values.\n    */\n    set: function set(target, prop, value) {\n      proxy[prop] = value; // set to proxy\n\n      delete target[prop]; // remove from cache\n\n      return true;\n    }\n  });\n}\n/**\n * @private\n */\n\n\nfunction _descriptors(proxy) {\n  var defaults = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n    scriptable: true,\n    indexable: true\n  };\n\n  var _proxy$_scriptable = proxy._scriptable,\n      _scriptable = _proxy$_scriptable === void 0 ? defaults.scriptable : _proxy$_scriptable,\n      _proxy$_indexable = proxy._indexable,\n      _indexable = _proxy$_indexable === void 0 ? defaults.indexable : _proxy$_indexable,\n      _proxy$_allKeys = proxy._allKeys,\n      _allKeys = _proxy$_allKeys === void 0 ? defaults.allKeys : _proxy$_allKeys;\n\n  return {\n    allKeys: _allKeys,\n    scriptable: _scriptable,\n    indexable: _indexable,\n    isScriptable: isFunction(_scriptable) ? _scriptable : function () {\n      return _scriptable;\n    },\n    isIndexable: isFunction(_indexable) ? _indexable : function () {\n      return _indexable;\n    }\n  };\n}\n\nvar readKey = function readKey(prefix, name) {\n  return prefix ? prefix + _capitalize(name) : name;\n};\n\nvar needsSubResolver = function needsSubResolver(prop, value) {\n  return isObject(value) && prop !== 'adapters' && (Object.getPrototypeOf(value) === null || value.constructor === Object);\n};\n\nfunction _cached(target, prop, resolve) {\n  if (Object.prototype.hasOwnProperty.call(target, prop) || prop === 'constructor') {\n    return target[prop];\n  }\n\n  var value = resolve(); // cache the resolved value\n\n  target[prop] = value;\n  return value;\n}\n\nfunction _resolveWithContext(target, prop, receiver) {\n  var _proxy = target._proxy,\n      _context = target._context,\n      _subProxy = target._subProxy,\n      descriptors = target._descriptors;\n  var value = _proxy[prop]; // resolve from proxy\n  // resolve with context\n\n  if (isFunction(value) && descriptors.isScriptable(prop)) {\n    value = _resolveScriptable(prop, value, target, receiver);\n  }\n\n  if (isArray(value) && value.length) {\n    value = _resolveArray(prop, value, target, descriptors.isIndexable);\n  }\n\n  if (needsSubResolver(prop, value)) {\n    // if the resolved value is an object, create a sub resolver for it\n    value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors);\n  }\n\n  return value;\n}\n\nfunction _resolveScriptable(prop, getValue, target, receiver) {\n  var _proxy = target._proxy,\n      _context = target._context,\n      _subProxy = target._subProxy,\n      _stack = target._stack;\n\n  if (_stack.has(prop)) {\n    throw new Error('Recursion detected: ' + Array.from(_stack).join('->') + '->' + prop);\n  }\n\n  _stack.add(prop);\n\n  var value = getValue(_context, _subProxy || receiver);\n\n  _stack.delete(prop);\n\n  if (needsSubResolver(prop, value)) {\n    // When scriptable option returns an object, create a resolver on that.\n    value = createSubResolver(_proxy._scopes, _proxy, prop, value);\n  }\n\n  return value;\n}\n\nfunction _resolveArray(prop, value, target, isIndexable) {\n  var _proxy = target._proxy,\n      _context = target._context,\n      _subProxy = target._subProxy,\n      descriptors = target._descriptors;\n\n  if (typeof _context.index !== 'undefined' && isIndexable(prop)) {\n    return value[_context.index % value.length];\n  } else if (isObject(value[0])) {\n    // Array of objects, return array or resolvers\n    var arr = value;\n\n    var scopes = _proxy._scopes.filter(function (s) {\n      return s !== arr;\n    });\n\n    value = [];\n    var _iteratorNormalCompletion5 = true;\n    var _didIteratorError5 = false;\n    var _iteratorError5 = undefined;\n\n    try {\n      for (var _iterator5 = arr[Symbol.iterator](), _step5; !(_iteratorNormalCompletion5 = (_step5 = _iterator5.next()).done); _iteratorNormalCompletion5 = true) {\n        var item = _step5.value;\n        var resolver = createSubResolver(scopes, _proxy, prop, item);\n        value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors));\n      }\n    } catch (err) {\n      _didIteratorError5 = true;\n      _iteratorError5 = err;\n    } finally {\n      try {\n        if (!_iteratorNormalCompletion5 && _iterator5.return != null) {\n          _iterator5.return();\n        }\n      } finally {\n        if (_didIteratorError5) {\n          throw _iteratorError5;\n        }\n      }\n    }\n  }\n\n  return value;\n}\n\nfunction resolveFallback(fallback, prop, value) {\n  return isFunction(fallback) ? fallback(prop, value) : fallback;\n}\n\nvar getScope = function getScope(key, parent) {\n  return key === true ? parent : typeof key === 'string' ? resolveObjectKey(parent, key) : undefined;\n};\n\nfunction addScopes(set, parentScopes, key, parentFallback, value) {\n  var _iteratorNormalCompletion6 = true;\n  var _didIteratorError6 = false;\n  var _iteratorError6 = undefined;\n\n  try {\n    for (var _iterator6 = parentScopes[Symbol.iterator](), _step6; !(_iteratorNormalCompletion6 = (_step6 = _iterator6.next()).done); _iteratorNormalCompletion6 = true) {\n      var parent = _step6.value;\n      var scope = getScope(key, parent);\n\n      if (scope) {\n        set.add(scope);\n        var fallback = resolveFallback(scope._fallback, key, value);\n\n        if (typeof fallback !== 'undefined' && fallback !== key && fallback !== parentFallback) {\n          // When we reach the descriptor that defines a new _fallback, return that.\n          // The fallback will resume to that new scope.\n          return fallback;\n        }\n      } else if (scope === false && typeof parentFallback !== 'undefined' && key !== parentFallback) {\n        // Fallback to `false` results to `false`, when falling back to different key.\n        // For example `interaction` from `hover` or `plugins.tooltip` and `animation` from `animations`\n        return null;\n      }\n    }\n  } catch (err) {\n    _didIteratorError6 = true;\n    _iteratorError6 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion6 && _iterator6.return != null) {\n        _iterator6.return();\n      }\n    } finally {\n      if (_didIteratorError6) {\n        throw _iteratorError6;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction createSubResolver(parentScopes, resolver, prop, value) {\n  var rootScopes = resolver._rootScopes;\n  var fallback = resolveFallback(resolver._fallback, prop, value);\n  var allScopes = [].concat((0, _toConsumableArray2.default)(parentScopes), (0, _toConsumableArray2.default)(rootScopes));\n  var set = new Set();\n  set.add(value);\n  var key = addScopesFromKey(set, allScopes, prop, fallback || prop, value);\n\n  if (key === null) {\n    return false;\n  }\n\n  if (typeof fallback !== 'undefined' && fallback !== prop) {\n    key = addScopesFromKey(set, allScopes, fallback, key, value);\n\n    if (key === null) {\n      return false;\n    }\n  }\n\n  return _createResolver(Array.from(set), [''], rootScopes, fallback, function () {\n    return subGetTarget(resolver, prop, value);\n  });\n}\n\nfunction addScopesFromKey(set, allScopes, key, fallback, item) {\n  while (key) {\n    key = addScopes(set, allScopes, key, fallback, item);\n  }\n\n  return key;\n}\n\nfunction subGetTarget(resolver, prop, value) {\n  var parent = resolver._getTarget();\n\n  if (!(prop in parent)) {\n    parent[prop] = {};\n  }\n\n  var target = parent[prop];\n\n  if (isArray(target) && isObject(value)) {\n    // For array of objects, the object is used to store updated values\n    return value;\n  }\n\n  return target || {};\n}\n\nfunction _resolveWithPrefixes(prop, prefixes, scopes, proxy) {\n  var value;\n  var _iteratorNormalCompletion7 = true;\n  var _didIteratorError7 = false;\n  var _iteratorError7 = undefined;\n\n  try {\n    for (var _iterator7 = prefixes[Symbol.iterator](), _step7; !(_iteratorNormalCompletion7 = (_step7 = _iterator7.next()).done); _iteratorNormalCompletion7 = true) {\n      var prefix = _step7.value;\n      value = _resolve(readKey(prefix, prop), scopes);\n\n      if (typeof value !== 'undefined') {\n        return needsSubResolver(prop, value) ? createSubResolver(scopes, proxy, prop, value) : value;\n      }\n    }\n  } catch (err) {\n    _didIteratorError7 = true;\n    _iteratorError7 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion7 && _iterator7.return != null) {\n        _iterator7.return();\n      }\n    } finally {\n      if (_didIteratorError7) {\n        throw _iteratorError7;\n      }\n    }\n  }\n}\n\nfunction _resolve(key, scopes) {\n  var _iteratorNormalCompletion8 = true;\n  var _didIteratorError8 = false;\n  var _iteratorError8 = undefined;\n\n  try {\n    for (var _iterator8 = scopes[Symbol.iterator](), _step8; !(_iteratorNormalCompletion8 = (_step8 = _iterator8.next()).done); _iteratorNormalCompletion8 = true) {\n      var scope = _step8.value;\n\n      if (!scope) {\n        continue;\n      }\n\n      var value = scope[key];\n\n      if (typeof value !== 'undefined') {\n        return value;\n      }\n    }\n  } catch (err) {\n    _didIteratorError8 = true;\n    _iteratorError8 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion8 && _iterator8.return != null) {\n        _iterator8.return();\n      }\n    } finally {\n      if (_didIteratorError8) {\n        throw _iteratorError8;\n      }\n    }\n  }\n}\n\nfunction getKeysFromAllScopes(target) {\n  var keys = target._keys;\n\n  if (!keys) {\n    keys = target._keys = resolveKeysFromAllScopes(target._scopes);\n  }\n\n  return keys;\n}\n\nfunction resolveKeysFromAllScopes(scopes) {\n  var set = new Set();\n  var _iteratorNormalCompletion9 = true;\n  var _didIteratorError9 = false;\n  var _iteratorError9 = undefined;\n\n  try {\n    for (var _iterator9 = scopes[Symbol.iterator](), _step9; !(_iteratorNormalCompletion9 = (_step9 = _iterator9.next()).done); _iteratorNormalCompletion9 = true) {\n      var scope = _step9.value;\n      var _iteratorNormalCompletion10 = true;\n      var _didIteratorError10 = false;\n      var _iteratorError10 = undefined;\n\n      try {\n        for (var _iterator10 = Object.keys(scope).filter(function (k) {\n          return !k.startsWith('_');\n        })[Symbol.iterator](), _step10; !(_iteratorNormalCompletion10 = (_step10 = _iterator10.next()).done); _iteratorNormalCompletion10 = true) {\n          var key = _step10.value;\n          set.add(key);\n        }\n      } catch (err) {\n        _didIteratorError10 = true;\n        _iteratorError10 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion10 && _iterator10.return != null) {\n            _iterator10.return();\n          }\n        } finally {\n          if (_didIteratorError10) {\n            throw _iteratorError10;\n          }\n        }\n      }\n    }\n  } catch (err) {\n    _didIteratorError9 = true;\n    _iteratorError9 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion9 && _iterator9.return != null) {\n        _iterator9.return();\n      }\n    } finally {\n      if (_didIteratorError9) {\n        throw _iteratorError9;\n      }\n    }\n  }\n\n  return Array.from(set);\n}\n\nfunction _parseObjectDataRadialScale(meta, data, start, count) {\n  var iScale = meta.iScale;\n  var _this$_parsing$key = this._parsing.key,\n      key = _this$_parsing$key === void 0 ? 'r' : _this$_parsing$key;\n  var parsed = new Array(count);\n  var i, ilen, index, item;\n\n  for (i = 0, ilen = count; i < ilen; ++i) {\n    index = i + start;\n    item = data[index];\n    parsed[i] = {\n      r: iScale.parse(resolveObjectKey(item, key), index)\n    };\n  }\n\n  return parsed;\n}\n\nvar EPSILON = Number.EPSILON || 1e-14;\n\nvar getPoint = function getPoint(points, i) {\n  return i < points.length && !points[i].skip && points[i];\n};\n\nvar getValueAxis = function getValueAxis(indexAxis) {\n  return indexAxis === 'x' ? 'y' : 'x';\n};\n\nfunction splineCurve(firstPoint, middlePoint, afterPoint, t) {\n  // Props to Rob Spencer at scaled innovation for his post on splining between points\n  // http://scaledinnovation.com/analytics/splines/aboutSplines.html\n  // This function must also respect \"skipped\" points\n  var previous = firstPoint.skip ? middlePoint : firstPoint;\n  var current = middlePoint;\n  var next = afterPoint.skip ? middlePoint : afterPoint;\n  var d01 = distanceBetweenPoints(current, previous);\n  var d12 = distanceBetweenPoints(next, current);\n  var s01 = d01 / (d01 + d12);\n  var s12 = d12 / (d01 + d12); // If all points are the same, s01 & s02 will be inf\n\n  s01 = isNaN(s01) ? 0 : s01;\n  s12 = isNaN(s12) ? 0 : s12;\n  var fa = t * s01; // scaling factor for triangle Ta\n\n  var fb = t * s12;\n  return {\n    previous: {\n      x: current.x - fa * (next.x - previous.x),\n      y: current.y - fa * (next.y - previous.y)\n    },\n    next: {\n      x: current.x + fb * (next.x - previous.x),\n      y: current.y + fb * (next.y - previous.y)\n    }\n  };\n}\n/**\n * Adjust tangents to ensure monotonic properties\n */\n\n\nfunction monotoneAdjust(points, deltaK, mK) {\n  var pointsLen = points.length;\n  var alphaK, betaK, tauK, squaredMagnitude, pointCurrent;\n  var pointAfter = getPoint(points, 0);\n\n  for (var i = 0; i < pointsLen - 1; ++i) {\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n\n    if (!pointCurrent || !pointAfter) {\n      continue;\n    }\n\n    if (almostEquals(deltaK[i], 0, EPSILON)) {\n      mK[i] = mK[i + 1] = 0;\n      continue;\n    }\n\n    alphaK = mK[i] / deltaK[i];\n    betaK = mK[i + 1] / deltaK[i];\n    squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n\n    if (squaredMagnitude <= 9) {\n      continue;\n    }\n\n    tauK = 3 / Math.sqrt(squaredMagnitude);\n    mK[i] = alphaK * tauK * deltaK[i];\n    mK[i + 1] = betaK * tauK * deltaK[i];\n  }\n}\n\nfunction monotoneCompute(points, mK) {\n  var indexAxis = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'x';\n  var valueAxis = getValueAxis(indexAxis);\n  var pointsLen = points.length;\n  var delta, pointBefore, pointCurrent;\n  var pointAfter = getPoint(points, 0);\n\n  for (var i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n\n    if (!pointCurrent) {\n      continue;\n    }\n\n    var iPixel = pointCurrent[indexAxis];\n    var vPixel = pointCurrent[valueAxis];\n\n    if (pointBefore) {\n      delta = (iPixel - pointBefore[indexAxis]) / 3;\n      pointCurrent[\"cp1\".concat(indexAxis)] = iPixel - delta;\n      pointCurrent[\"cp1\".concat(valueAxis)] = vPixel - delta * mK[i];\n    }\n\n    if (pointAfter) {\n      delta = (pointAfter[indexAxis] - iPixel) / 3;\n      pointCurrent[\"cp2\".concat(indexAxis)] = iPixel + delta;\n      pointCurrent[\"cp2\".concat(valueAxis)] = vPixel + delta * mK[i];\n    }\n  }\n}\n/**\n * This function calculates Bézier control points in a similar way than |splineCurve|,\n * but preserves monotonicity of the provided data and ensures no local extremums are added\n * between the dataset discrete points due to the interpolation.\n * See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n */\n\n\nfunction splineCurveMonotone(points) {\n  var indexAxis = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'x';\n  var valueAxis = getValueAxis(indexAxis);\n  var pointsLen = points.length;\n  var deltaK = Array(pointsLen).fill(0);\n  var mK = Array(pointsLen); // Calculate slopes (deltaK) and initialize tangents (mK)\n\n  var i, pointBefore, pointCurrent;\n  var pointAfter = getPoint(points, 0);\n\n  for (i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n\n    if (!pointCurrent) {\n      continue;\n    }\n\n    if (pointAfter) {\n      var slopeDelta = pointAfter[indexAxis] - pointCurrent[indexAxis]; // In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n\n      deltaK[i] = slopeDelta !== 0 ? (pointAfter[valueAxis] - pointCurrent[valueAxis]) / slopeDelta : 0;\n    }\n\n    mK[i] = !pointBefore ? deltaK[i] : !pointAfter ? deltaK[i - 1] : sign(deltaK[i - 1]) !== sign(deltaK[i]) ? 0 : (deltaK[i - 1] + deltaK[i]) / 2;\n  }\n\n  monotoneAdjust(points, deltaK, mK);\n  monotoneCompute(points, mK, indexAxis);\n}\n\nfunction capControlPoint(pt, min, max) {\n  return Math.max(Math.min(pt, max), min);\n}\n\nfunction capBezierPoints(points, area) {\n  var i, ilen, point, inArea, inAreaPrev;\n\n  var inAreaNext = _isPointInArea(points[0], area);\n\n  for (i = 0, ilen = points.length; i < ilen; ++i) {\n    inAreaPrev = inArea;\n    inArea = inAreaNext;\n    inAreaNext = i < ilen - 1 && _isPointInArea(points[i + 1], area);\n\n    if (!inArea) {\n      continue;\n    }\n\n    point = points[i];\n\n    if (inAreaPrev) {\n      point.cp1x = capControlPoint(point.cp1x, area.left, area.right);\n      point.cp1y = capControlPoint(point.cp1y, area.top, area.bottom);\n    }\n\n    if (inAreaNext) {\n      point.cp2x = capControlPoint(point.cp2x, area.left, area.right);\n      point.cp2y = capControlPoint(point.cp2y, area.top, area.bottom);\n    }\n  }\n}\n/**\n * @private\n */\n\n\nfunction _updateBezierControlPoints(points, options, area, loop, indexAxis) {\n  var i, ilen, point, controlPoints; // Only consider points that are drawn in case the spanGaps option is used\n\n  if (options.spanGaps) {\n    points = points.filter(function (pt) {\n      return !pt.skip;\n    });\n  }\n\n  if (options.cubicInterpolationMode === 'monotone') {\n    splineCurveMonotone(points, indexAxis);\n  } else {\n    var prev = loop ? points[points.length - 1] : points[0];\n\n    for (i = 0, ilen = points.length; i < ilen; ++i) {\n      point = points[i];\n      controlPoints = splineCurve(prev, point, points[Math.min(i + 1, ilen - (loop ? 0 : 1)) % ilen], options.tension);\n      point.cp1x = controlPoints.previous.x;\n      point.cp1y = controlPoints.previous.y;\n      point.cp2x = controlPoints.next.x;\n      point.cp2y = controlPoints.next.y;\n      prev = point;\n    }\n  }\n\n  if (options.capBezierPoints) {\n    capBezierPoints(points, area);\n  }\n}\n/**\n * @private\n */\n\n\nfunction _isDomSupported() {\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n/**\n * @private\n */\n\n\nfunction _getParentNode(domNode) {\n  var parent = domNode.parentNode;\n\n  if (parent && parent.toString() === '[object ShadowRoot]') {\n    parent = parent.host;\n  }\n\n  return parent;\n}\n/**\n * convert max-width/max-height values that may be percentages into a number\n * @private\n */\n\n\nfunction parseMaxStyle(styleValue, node, parentProperty) {\n  var valueInPixels;\n\n  if (typeof styleValue === 'string') {\n    valueInPixels = parseInt(styleValue, 10);\n\n    if (styleValue.indexOf('%') !== -1) {\n      // percentage * size in dimension\n      valueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];\n    }\n  } else {\n    valueInPixels = styleValue;\n  }\n\n  return valueInPixels;\n}\n\nvar getComputedStyle = function getComputedStyle(element) {\n  return element.ownerDocument.defaultView.getComputedStyle(element, null);\n};\n\nfunction getStyle(el, property) {\n  return getComputedStyle(el).getPropertyValue(property);\n}\n\nvar positions = ['top', 'right', 'bottom', 'left'];\n\nfunction getPositionedStyle(styles, style, suffix) {\n  var result = {};\n  suffix = suffix ? '-' + suffix : '';\n\n  for (var i = 0; i < 4; i++) {\n    var pos = positions[i];\n    result[pos] = parseFloat(styles[style + '-' + pos + suffix]) || 0;\n  }\n\n  result.width = result.left + result.right;\n  result.height = result.top + result.bottom;\n  return result;\n}\n\nvar useOffsetPos = function useOffsetPos(x, y, target) {\n  return (x > 0 || y > 0) && (!target || !target.shadowRoot);\n};\n/**\n * @param e\n * @param canvas\n * @returns Canvas position\n */\n\n\nfunction getCanvasPosition(e, canvas) {\n  var touches = e.touches;\n  var source = touches && touches.length ? touches[0] : e;\n  var offsetX = source.offsetX,\n      offsetY = source.offsetY;\n  var box = false;\n  var x, y;\n\n  if (useOffsetPos(offsetX, offsetY, e.target)) {\n    x = offsetX;\n    y = offsetY;\n  } else {\n    var rect = canvas.getBoundingClientRect();\n    x = source.clientX - rect.left;\n    y = source.clientY - rect.top;\n    box = true;\n  }\n\n  return {\n    x: x,\n    y: y,\n    box: box\n  };\n}\n/**\n * Gets an event's x, y coordinates, relative to the chart area\n * @param event\n * @param chart\n * @returns x and y coordinates of the event\n */\n\n\nfunction getRelativePosition(event, chart) {\n  if ('native' in event) {\n    return event;\n  }\n\n  var canvas = chart.canvas,\n      currentDevicePixelRatio = chart.currentDevicePixelRatio;\n  var style = getComputedStyle(canvas);\n  var borderBox = style.boxSizing === 'border-box';\n  var paddings = getPositionedStyle(style, 'padding');\n  var borders = getPositionedStyle(style, 'border', 'width');\n\n  var _getCanvasPosition = getCanvasPosition(event, canvas),\n      x = _getCanvasPosition.x,\n      y = _getCanvasPosition.y,\n      box = _getCanvasPosition.box;\n\n  var xOffset = paddings.left + (box && borders.left);\n  var yOffset = paddings.top + (box && borders.top);\n  var width = chart.width,\n      height = chart.height;\n\n  if (borderBox) {\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n\n  return {\n    x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),\n    y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)\n  };\n}\n\nfunction getContainerSize(canvas, width, height) {\n  var maxWidth, maxHeight;\n\n  if (width === undefined || height === undefined) {\n    var container = canvas && _getParentNode(canvas);\n\n    if (!container) {\n      width = canvas.clientWidth;\n      height = canvas.clientHeight;\n    } else {\n      var rect = container.getBoundingClientRect(); // this is the border box of the container\n\n      var containerStyle = getComputedStyle(container);\n      var containerBorder = getPositionedStyle(containerStyle, 'border', 'width');\n      var containerPadding = getPositionedStyle(containerStyle, 'padding');\n      width = rect.width - containerPadding.width - containerBorder.width;\n      height = rect.height - containerPadding.height - containerBorder.height;\n      maxWidth = parseMaxStyle(containerStyle.maxWidth, container, 'clientWidth');\n      maxHeight = parseMaxStyle(containerStyle.maxHeight, container, 'clientHeight');\n    }\n  }\n\n  return {\n    width: width,\n    height: height,\n    maxWidth: maxWidth || INFINITY,\n    maxHeight: maxHeight || INFINITY\n  };\n}\n\nvar round1 = function round1(v) {\n  return Math.round(v * 10) / 10;\n}; // eslint-disable-next-line complexity\n\n\nfunction getMaximumSize(canvas, bbWidth, bbHeight, aspectRatio) {\n  var style = getComputedStyle(canvas);\n  var margins = getPositionedStyle(style, 'margin');\n  var maxWidth = parseMaxStyle(style.maxWidth, canvas, 'clientWidth') || INFINITY;\n  var maxHeight = parseMaxStyle(style.maxHeight, canvas, 'clientHeight') || INFINITY;\n  var containerSize = getContainerSize(canvas, bbWidth, bbHeight);\n  var width = containerSize.width,\n      height = containerSize.height;\n\n  if (style.boxSizing === 'content-box') {\n    var borders = getPositionedStyle(style, 'border', 'width');\n    var paddings = getPositionedStyle(style, 'padding');\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n\n  width = Math.max(0, width - margins.width);\n  height = Math.max(0, aspectRatio ? width / aspectRatio : height - margins.height);\n  width = round1(Math.min(width, maxWidth, containerSize.maxWidth));\n  height = round1(Math.min(height, maxHeight, containerSize.maxHeight));\n\n  if (width && !height) {\n    // https://github.com/chartjs/Chart.js/issues/4659\n    // If the canvas has width, but no height, default to aspectRatio of 2 (canvas default)\n    height = round1(width / 2);\n  }\n\n  var maintainHeight = bbWidth !== undefined || bbHeight !== undefined;\n\n  if (maintainHeight && aspectRatio && containerSize.height && height > containerSize.height) {\n    height = containerSize.height;\n    width = round1(Math.floor(height * aspectRatio));\n  }\n\n  return {\n    width: width,\n    height: height\n  };\n}\n/**\n * @param chart\n * @param forceRatio\n * @param forceStyle\n * @returns True if the canvas context size or transformation has changed.\n */\n\n\nfunction retinaScale(chart, forceRatio, forceStyle) {\n  var pixelRatio = forceRatio || 1;\n  var deviceHeight = Math.floor(chart.height * pixelRatio);\n  var deviceWidth = Math.floor(chart.width * pixelRatio);\n  chart.height = Math.floor(chart.height);\n  chart.width = Math.floor(chart.width);\n  var canvas = chart.canvas; // If no style has been set on the canvas, the render size is used as display size,\n  // making the chart visually bigger, so let's enforce it to the \"correct\" values.\n  // See https://github.com/chartjs/Chart.js/issues/3575\n\n  if (canvas.style && (forceStyle || !canvas.style.height && !canvas.style.width)) {\n    canvas.style.height = \"\".concat(chart.height, \"px\");\n    canvas.style.width = \"\".concat(chart.width, \"px\");\n  }\n\n  if (chart.currentDevicePixelRatio !== pixelRatio || canvas.height !== deviceHeight || canvas.width !== deviceWidth) {\n    chart.currentDevicePixelRatio = pixelRatio;\n    canvas.height = deviceHeight;\n    canvas.width = deviceWidth;\n    chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    return true;\n  }\n\n  return false;\n}\n/**\n * Detects support for options object argument in addEventListener.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n * @private\n */\n\n\nvar supportsEventListenerOptions = function () {\n  var passiveSupported = false;\n\n  try {\n    var options = {\n      get passive() {\n        passiveSupported = true;\n        return false;\n      }\n\n    };\n\n    if (_isDomSupported()) {\n      window.addEventListener('test', null, options);\n      window.removeEventListener('test', null, options);\n    }\n  } catch (e) {// continue regardless of error\n  }\n\n  return passiveSupported;\n}();\n/**\n * The \"used\" size is the final value of a dimension property after all calculations have\n * been performed. This method uses the computed style of `element` but returns undefined\n * if the computed style is not expressed in pixels. That can happen in some cases where\n * `element` has a size relative to its parent and this last one is not yet displayed,\n * for example because of `display: none` on a parent node.\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/used_value\n * @returns Size in pixels or undefined if unknown.\n */\n\n\nexports.K = supportsEventListenerOptions;\n\nfunction readUsedSize(element, property) {\n  var value = getStyle(element, property);\n  var matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\n  return matches ? +matches[1] : undefined;\n}\n/**\n * @private\n */\n\n\nfunction _pointInLine(p1, p2, t, mode) {\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: p1.y + t * (p2.y - p1.y)\n  };\n}\n/**\n * @private\n */\n\n\nfunction _steppedInterpolation(p1, p2, t, mode) {\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: mode === 'middle' ? t < 0.5 ? p1.y : p2.y : mode === 'after' ? t < 1 ? p1.y : p2.y : t > 0 ? p2.y : p1.y\n  };\n}\n/**\n * @private\n */\n\n\nfunction _bezierInterpolation(p1, p2, t, mode) {\n  var cp1 = {\n    x: p1.cp2x,\n    y: p1.cp2y\n  };\n  var cp2 = {\n    x: p2.cp1x,\n    y: p2.cp1y\n  };\n\n  var a = _pointInLine(p1, cp1, t);\n\n  var b = _pointInLine(cp1, cp2, t);\n\n  var c = _pointInLine(cp2, p2, t);\n\n  var d = _pointInLine(a, b, t);\n\n  var e = _pointInLine(b, c, t);\n\n  return _pointInLine(d, e, t);\n}\n\nvar getRightToLeftAdapter = function getRightToLeftAdapter(rectX, width) {\n  return {\n    x: function x(_x) {\n      return rectX + rectX + width - _x;\n    },\n    setWidth: function setWidth(w) {\n      width = w;\n    },\n    textAlign: function textAlign(align) {\n      if (align === 'center') {\n        return align;\n      }\n\n      return align === 'right' ? 'left' : 'right';\n    },\n    xPlus: function xPlus(x, value) {\n      return x - value;\n    },\n    leftForLtr: function leftForLtr(x, itemWidth) {\n      return x - itemWidth;\n    }\n  };\n};\n\nvar getLeftToRightAdapter = function getLeftToRightAdapter() {\n  return {\n    x: function x(_x2) {\n      return _x2;\n    },\n    setWidth: function setWidth(w) {},\n    textAlign: function textAlign(align) {\n      return align;\n    },\n    xPlus: function xPlus(x, value) {\n      return x + value;\n    },\n    leftForLtr: function leftForLtr(x, _itemWidth) {\n      return x;\n    }\n  };\n};\n\nfunction getRtlAdapter(rtl, rectX, width) {\n  return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();\n}\n\nfunction overrideTextDirection(ctx, direction) {\n  var style, original;\n\n  if (direction === 'ltr' || direction === 'rtl') {\n    style = ctx.canvas.style;\n    original = [style.getPropertyValue('direction'), style.getPropertyPriority('direction')];\n    style.setProperty('direction', direction, 'important');\n    ctx.prevTextDirection = original;\n  }\n}\n\nfunction restoreTextDirection(ctx, original) {\n  if (original !== undefined) {\n    delete ctx.prevTextDirection;\n    ctx.canvas.style.setProperty('direction', original[0], original[1]);\n  }\n}\n\nfunction propertyFn(property) {\n  if (property === 'angle') {\n    return {\n      between: _angleBetween,\n      compare: _angleDiff,\n      normalize: _normalizeAngle\n    };\n  }\n\n  return {\n    between: _isBetween,\n    compare: function compare(a, b) {\n      return a - b;\n    },\n    normalize: function normalize(x) {\n      return x;\n    }\n  };\n}\n\nfunction normalizeSegment(_ref) {\n  var start = _ref.start,\n      end = _ref.end,\n      count = _ref.count,\n      loop = _ref.loop,\n      style = _ref.style;\n  return {\n    start: start % count,\n    end: end % count,\n    loop: loop && (end - start + 1) % count === 0,\n    style: style\n  };\n}\n\nfunction getSegment(segment, points, bounds) {\n  var property = bounds.property,\n      startBound = bounds.start,\n      endBound = bounds.end;\n\n  var _propertyFn = propertyFn(property),\n      between = _propertyFn.between,\n      normalize = _propertyFn.normalize;\n\n  var count = points.length;\n  var start = segment.start,\n      end = segment.end,\n      loop = segment.loop;\n  var i, ilen;\n\n  if (loop) {\n    start += count;\n    end += count;\n\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      if (!between(normalize(points[start % count][property]), startBound, endBound)) {\n        break;\n      }\n\n      start--;\n      end--;\n    }\n\n    start %= count;\n    end %= count;\n  }\n\n  if (end < start) {\n    end += count;\n  }\n\n  return {\n    start: start,\n    end: end,\n    loop: loop,\n    style: segment.style\n  };\n}\n\nfunction _boundSegment(segment, points, bounds) {\n  if (!bounds) {\n    return [segment];\n  }\n\n  var property = bounds.property,\n      startBound = bounds.start,\n      endBound = bounds.end;\n  var count = points.length;\n\n  var _propertyFn2 = propertyFn(property),\n      compare = _propertyFn2.compare,\n      between = _propertyFn2.between,\n      normalize = _propertyFn2.normalize;\n\n  var _getSegment = getSegment(segment, points, bounds),\n      start = _getSegment.start,\n      end = _getSegment.end,\n      loop = _getSegment.loop,\n      style = _getSegment.style;\n\n  var result = [];\n  var inside = false;\n  var subStart = null;\n  var value, point, prevValue;\n\n  var startIsBefore = function startIsBefore() {\n    return between(startBound, prevValue, value) && compare(startBound, prevValue) !== 0;\n  };\n\n  var endIsBefore = function endIsBefore() {\n    return compare(endBound, value) === 0 || between(endBound, prevValue, value);\n  };\n\n  var shouldStart = function shouldStart() {\n    return inside || startIsBefore();\n  };\n\n  var shouldStop = function shouldStop() {\n    return !inside || endIsBefore();\n  };\n\n  for (var i = start, prev = start; i <= end; ++i) {\n    point = points[i % count];\n\n    if (point.skip) {\n      continue;\n    }\n\n    value = normalize(point[property]);\n\n    if (value === prevValue) {\n      continue;\n    }\n\n    inside = between(value, startBound, endBound);\n\n    if (subStart === null && shouldStart()) {\n      subStart = compare(value, startBound) === 0 ? i : prev;\n    }\n\n    if (subStart !== null && shouldStop()) {\n      result.push(normalizeSegment({\n        start: subStart,\n        end: i,\n        loop: loop,\n        count: count,\n        style: style\n      }));\n      subStart = null;\n    }\n\n    prev = i;\n    prevValue = value;\n  }\n\n  if (subStart !== null) {\n    result.push(normalizeSegment({\n      start: subStart,\n      end: end,\n      loop: loop,\n      count: count,\n      style: style\n    }));\n  }\n\n  return result;\n}\n\nfunction _boundSegments(line, bounds) {\n  var result = [];\n  var segments = line.segments;\n\n  for (var i = 0; i < segments.length; i++) {\n    var sub = _boundSegment(segments[i], line.points, bounds);\n\n    if (sub.length) {\n      result.push.apply(result, (0, _toConsumableArray2.default)(sub));\n    }\n  }\n\n  return result;\n}\n\nfunction findStartAndEnd(points, count, loop, spanGaps) {\n  var start = 0;\n  var end = count - 1;\n\n  if (loop && !spanGaps) {\n    while (start < count && !points[start].skip) {\n      start++;\n    }\n  }\n\n  while (start < count && points[start].skip) {\n    start++;\n  }\n\n  start %= count;\n\n  if (loop) {\n    end += start;\n  }\n\n  while (end > start && points[end % count].skip) {\n    end--;\n  }\n\n  end %= count;\n  return {\n    start: start,\n    end: end\n  };\n}\n\nfunction solidSegments(points, start, max, loop) {\n  var count = points.length;\n  var result = [];\n  var last = start;\n  var prev = points[start];\n  var end;\n\n  for (end = start + 1; end <= max; ++end) {\n    var cur = points[end % count];\n\n    if (cur.skip || cur.stop) {\n      if (!prev.skip) {\n        loop = false;\n        result.push({\n          start: start % count,\n          end: (end - 1) % count,\n          loop: loop\n        });\n        start = last = cur.stop ? end : null;\n      }\n    } else {\n      last = end;\n\n      if (prev.skip) {\n        start = end;\n      }\n    }\n\n    prev = cur;\n  }\n\n  if (last !== null) {\n    result.push({\n      start: start % count,\n      end: last % count,\n      loop: loop\n    });\n  }\n\n  return result;\n}\n\nfunction _computeSegments(line, segmentOptions) {\n  var points = line.points;\n  var spanGaps = line.options.spanGaps;\n  var count = points.length;\n\n  if (!count) {\n    return [];\n  }\n\n  var loop = !!line._loop;\n\n  var _findStartAndEnd = findStartAndEnd(points, count, loop, spanGaps),\n      start = _findStartAndEnd.start,\n      end = _findStartAndEnd.end;\n\n  if (spanGaps === true) {\n    return splitByStyles(line, [{\n      start: start,\n      end: end,\n      loop: loop\n    }], points, segmentOptions);\n  }\n\n  var max = end < start ? end + count : end;\n  var completeLoop = !!line._fullLoop && start === 0 && end === count - 1;\n  return splitByStyles(line, solidSegments(points, start, max, completeLoop), points, segmentOptions);\n}\n\nfunction splitByStyles(line, segments, points, segmentOptions) {\n  if (!segmentOptions || !segmentOptions.setContext || !points) {\n    return segments;\n  }\n\n  return doSplitByStyles(line, segments, points, segmentOptions);\n}\n\nfunction doSplitByStyles(line, segments, points, segmentOptions) {\n  var chartContext = line._chart.getContext();\n\n  var baseStyle = readStyle(line.options);\n  var datasetIndex = line._datasetIndex,\n      spanGaps = line.options.spanGaps;\n  var count = points.length;\n  var result = [];\n  var prevStyle = baseStyle;\n  var start = segments[0].start;\n  var i = start;\n\n  function addStyle(s, e, l, st) {\n    var dir = spanGaps ? -1 : 1;\n\n    if (s === e) {\n      return;\n    }\n\n    s += count;\n\n    while (points[s % count].skip) {\n      s -= dir;\n    }\n\n    while (points[e % count].skip) {\n      e += dir;\n    }\n\n    if (s % count !== e % count) {\n      result.push({\n        start: s % count,\n        end: e % count,\n        loop: l,\n        style: st\n      });\n      prevStyle = st;\n      start = e % count;\n    }\n  }\n\n  var _iteratorNormalCompletion11 = true;\n  var _didIteratorError11 = false;\n  var _iteratorError11 = undefined;\n\n  try {\n    for (var _iterator11 = segments[Symbol.iterator](), _step11; !(_iteratorNormalCompletion11 = (_step11 = _iterator11.next()).done); _iteratorNormalCompletion11 = true) {\n      var segment = _step11.value;\n      start = spanGaps ? start : segment.start;\n      var prev = points[start % count];\n      var style = void 0;\n\n      for (i = start + 1; i <= segment.end; i++) {\n        var pt = points[i % count];\n        style = readStyle(segmentOptions.setContext(createContext(chartContext, {\n          type: 'segment',\n          p0: prev,\n          p1: pt,\n          p0DataIndex: (i - 1) % count,\n          p1DataIndex: i % count,\n          datasetIndex: datasetIndex\n        })));\n\n        if (styleChanged(style, prevStyle)) {\n          addStyle(start, i - 1, segment.loop, prevStyle);\n        }\n\n        prev = pt;\n        prevStyle = style;\n      }\n\n      if (start < i - 1) {\n        addStyle(start, i - 1, segment.loop, prevStyle);\n      }\n    }\n  } catch (err) {\n    _didIteratorError11 = true;\n    _iteratorError11 = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion11 && _iterator11.return != null) {\n        _iterator11.return();\n      }\n    } finally {\n      if (_didIteratorError11) {\n        throw _iteratorError11;\n      }\n    }\n  }\n\n  return result;\n}\n\nfunction readStyle(options) {\n  return {\n    backgroundColor: options.backgroundColor,\n    borderCapStyle: options.borderCapStyle,\n    borderDash: options.borderDash,\n    borderDashOffset: options.borderDashOffset,\n    borderJoinStyle: options.borderJoinStyle,\n    borderWidth: options.borderWidth,\n    borderColor: options.borderColor\n  };\n}\n\nfunction styleChanged(style, prevStyle) {\n  if (!prevStyle) {\n    return false;\n  }\n\n  var cache = [];\n\n  var replacer = function replacer(key, value) {\n    if (!isPatternOrGradient(value)) {\n      return value;\n    }\n\n    if (!cache.includes(value)) {\n      cache.push(value);\n    }\n\n    return cache.indexOf(value);\n  };\n\n  return JSON.stringify(style, replacer) !== JSON.stringify(prevStyle, replacer);\n}\n\nfunction getSizeForArea(scale, chartArea, field) {\n  return scale.options.clip ? scale[field] : chartArea[field];\n}\n\nfunction getDatasetArea(meta, chartArea) {\n  var xScale = meta.xScale,\n      yScale = meta.yScale;\n\n  if (xScale && yScale) {\n    return {\n      left: getSizeForArea(xScale, chartArea, 'left'),\n      right: getSizeForArea(xScale, chartArea, 'right'),\n      top: getSizeForArea(yScale, chartArea, 'top'),\n      bottom: getSizeForArea(yScale, chartArea, 'bottom')\n    };\n  }\n\n  return chartArea;\n}\n\nfunction getDatasetClipArea(chart, meta) {\n  var clip = meta._clip;\n\n  if (clip.disabled) {\n    return false;\n  }\n\n  var area = getDatasetArea(meta, chart.chartArea);\n  return {\n    left: clip.left === false ? 0 : area.left - (clip.left === true ? 0 : clip.left),\n    right: clip.right === false ? chart.width : area.right + (clip.right === true ? 0 : clip.right),\n    top: clip.top === false ? 0 : area.top - (clip.top === true ? 0 : clip.top),\n    bottom: clip.bottom === false ? chart.height : area.bottom + (clip.bottom === true ? 0 : clip.bottom)\n  };\n}",{"version":3,"sources":["../../src/helpers/helpers.core.ts","../../src/helpers/helpers.math.ts","../../src/helpers/helpers.collection.ts","../../src/helpers/helpers.extras.ts","../../src/helpers/helpers.easing.ts","../../src/helpers/helpers.color.ts","../../src/core/core.animations.defaults.js","../../src/core/core.layouts.defaults.js","../../src/helpers/helpers.intl.ts","../../src/core/core.ticks.js","../../src/core/core.scale.defaults.js","../../src/core/core.defaults.js","../../src/helpers/helpers.canvas.ts","../../src/helpers/helpers.options.ts","../../src/helpers/helpers.config.ts","../../src/helpers/helpers.curve.ts","../../src/helpers/helpers.dom.ts","../../src/helpers/helpers.interpolation.ts","../../src/helpers/helpers.rtl.ts","../../src/helpers/helpers.segment.js","../../src/helpers/helpers.dataset.ts"],"names":["noop","uid","id","isNullOrUndef","value","undefined","isArray","Array","type","Object","prototype","toString","call","slice","isObject","isNumberFinite","Number","isFinite","finiteOrDefault","defaultValue","valueOrDefault","toPercentage","dimension","endsWith","parseFloat","toDimension","callback","fn","args","thisArg","apply","each","loopable","reverse","i","len","keys","length","_elementsEqual","a0","a1","ilen","v0","v1","datasetIndex","index","clone","source","map","target","create","klen","k","isValidKey","key","indexOf","_merger","options","tval","sval","merge","sources","merger","current","mergeIf","_mergerIf","hasOwnProperty","_deprecated","scope","previous","console","warn","keyResolvers","v","x","o","y","_splitKey","parts","split","tmp","part","push","_getKeyResolver","obj","resolveObjectKey","resolver","_capitalize","str","charAt","toUpperCase","defined","isFunction","setsEqual","a","b","size","item","has","_isClickEvent","e","PI","Math","TAU","PITAU","INFINITY","POSITIVE_INFINITY","RAD_PER_DEG","HALF_PI","QUARTER_PI","TWO_THIRDS_PI","log10","sign","almostEquals","epsilon","abs","niceNum","range","roundedRange","round","niceRange","pow","floor","fraction","niceFraction","_factorize","result","sqrt","sort","pop","isNonPrimitive","n","Symbol","toPrimitive","isNumber","isNaN","almostWhole","rounded","_setMinAndMaxByKey","array","property","min","max","toRadians","degrees","toDegrees","radians","_decimalPlaces","isFiniteNumber","p","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","distanceFromYCenter","radialDistanceFromCenter","angle","atan2","distance","distanceBetweenPoints","pt1","pt2","_angleDiff","_normalizeAngle","_angleBetween","start","end","sameAngleIsFullCircle","s","angleToStart","angleToEnd","startToAngle","endToAngle","_limitValue","_int16Range","_isBetween","_lookup","table","cmp","hi","lo","mid","_lookupByKey","last","ti","_rlookupByKey","_filterBetween","values","arrayEvents","listenArrayEvents","listener","_chartjs","listeners","defineProperty","configurable","enumerable","forEach","method","base","res","object","unlistenArrayEvents","stub","splice","_arrayUnique","items","set","Set","from","fontString","pixelSize","fontStyle","fontFamily","requestAnimFrame","window","requestAnimationFrame","throttled","argsToUse","ticking","debounce","delay","timeout","clearTimeout","setTimeout","_toLeftRightCenter","align","_alignStartEnd","_textX","left","right","rtl","check","_getStartAndCountOfVisiblePoints","meta","points","animationsDisabled","pointCount","count","_sorted","iScale","vScale","_parsed","spanGaps","dataset","axis","minDefined","maxDefined","getUserBounds","getPixelForValue","distanceToDefinedLo","findIndex","point","distanceToDefinedHi","_scaleRangesChanged","xScale","yScale","_scaleRanges","newRanges","xmin","xmax","ymin","ymax","changed","assign","atEdge","t","elasticIn","sin","elasticOut","effects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","m","d","easeInOutBounce","isPatternOrGradient","color","Color","getHoverColor","saturate","darken","hexString","numbers","colors","applyAnimationsDefaults","defaults","duration","easing","loop","to","describe","_fallback","_indexable","_scriptable","name","properties","active","animation","resize","show","animations","visible","hide","applyLayoutsDefaults","autoPadding","padding","top","bottom","intlCache","Map","getNumberFormat","locale","cacheKey","JSON","stringify","formatter","get","Intl","NumberFormat","formatNumber","num","format","formatters","numeric","tickValue","ticks","chart","notation","delta","maxTick","calculateDelta","logDelta","numDecimal","minimumFractionDigits","maximumFractionDigits","logarithmic","remain","significand","includes","applyScaleDefaults","display","offset","beginAtZero","bounds","clip","grace","grid","lineWidth","drawOnChartArea","drawTicks","tickLength","tickWidth","_ctx","tickColor","border","dash","dashOffset","width","title","text","minRotation","maxRotation","mirror","textStrokeWidth","textStrokeColor","autoSkip","autoSkipPadding","labelOffset","Ticks","minor","major","crossAlign","showLabelBackdrop","backdropColor","backdropPadding","route","startsWith","overrides","descriptors","getScope","node","root","Defaults","constructor","_descriptors","_appliers","backgroundColor","borderColor","datasets","devicePixelRatio","context","platform","getDevicePixelRatio","elements","events","font","family","style","lineHeight","weight","hover","hoverBackgroundColor","ctx","hoverBorderColor","hoverColor","indexAxis","interaction","mode","intersect","includeInvisible","maintainAspectRatio","onHover","onClick","parsing","plugins","responsive","scale","scales","showLine","drawActiveElementsOnTop","targetScope","targetName","scopeObject","targetScopeObject","privateName","defineProperties","writable","local","appliers","toFontString","_measureText","data","gc","longest","string","textWidth","measureText","_longestText","arrayOfThings","cache","garbageCollect","save","j","jlen","thing","nestedThing","restore","gcLen","_alignPixel","pixel","currentDevicePixelRatio","halfWidth","clearCanvas","canvas","getContext","resetTransform","clearRect","height","drawPoint","drawPointLegend","w","xOffset","yOffset","cornerRadius","xOffsetW","yOffsetW","pointStyle","rotation","radius","rad","translate","rotate","drawImage","beginPath","ellipse","arc","closePath","moveTo","lineTo","SQRT1_2","rect","fill","borderWidth","stroke","_isPointInArea","area","margin","clipArea","unclipArea","_steppedLineTo","flip","midpoint","_bezierCurveTo","bezierCurveTo","cp1x","cp2x","cp1y","cp2y","setRenderOpts","opts","translation","fillStyle","textAlign","textBaseline","decorateText","line","strikethrough","underline","metrics","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","yDecoration","strokeStyle","decorationWidth","drawBackdrop","oldColor","fillRect","renderText","lines","strokeWidth","strokeColor","backdrop","strokeText","maxWidth","fillText","addRoundedRectPath","h","topLeft","bottomLeft","bottomRight","topRight","LINE_HEIGHT","FONT_STYLE","toLineHeight","matches","match","numberOrZero","_readValueToProps","props","ret","objProps","read","prop","toTRBL","toTRBLCorners","toPadding","toFont","fallback","parseInt","resolve","inputs","info","cacheable","_addGrace","minmax","change","keepZero","add","createContext","parentContext","_createResolver","scopes","prefixes","rootScopes","getTarget","finalRootScopes","_resolve","toStringTag","Proxy","deleteProperty","_keys","_cached","_resolveWithPrefixes","getOwnPropertyDescriptor","Reflect","_scopes","getPrototypeOf","getKeysFromAllScopes","ownKeys","storage","_storage","_attachContext","proxy","subProxy","descriptorDefaults","_cacheable","_proxy","_context","_subProxy","_stack","setContext","override","receiver","_resolveWithContext","allKeys","scriptable","indexable","_allKeys","isScriptable","isIndexable","readKey","prefix","needsSubResolver","_resolveScriptable","_resolveArray","getValue","Error","join","delete","createSubResolver","arr","filter","resolveFallback","parent","addScopes","parentScopes","parentFallback","_rootScopes","allScopes","addScopesFromKey","subGetTarget","_getTarget","resolveKeysFromAllScopes","_parseObjectDataRadialScale","_parsing","parsed","r","parse","EPSILON","getPoint","skip","getValueAxis","splineCurve","firstPoint","middlePoint","afterPoint","next","d01","d12","s01","s12","fa","fb","monotoneAdjust","deltaK","mK","pointsLen","alphaK","betaK","tauK","squaredMagnitude","pointCurrent","pointAfter","monotoneCompute","valueAxis","pointBefore","iPixel","vPixel","splineCurveMonotone","slopeDelta","capControlPoint","pt","capBezierPoints","inArea","inAreaPrev","inAreaNext","_updateBezierControlPoints","controlPoints","cubicInterpolationMode","prev","tension","_isDomSupported","document","_getParentNode","domNode","parentNode","host","parseMaxStyle","styleValue","parentProperty","valueInPixels","getComputedStyle","element","ownerDocument","defaultView","getStyle","el","getPropertyValue","positions","getPositionedStyle","styles","suffix","pos","useOffsetPos","shadowRoot","getCanvasPosition","touches","offsetX","offsetY","box","getBoundingClientRect","clientX","clientY","getRelativePosition","event","borderBox","boxSizing","paddings","borders","getContainerSize","maxHeight","container","clientWidth","clientHeight","containerStyle","containerBorder","containerPadding","round1","getMaximumSize","bbWidth","bbHeight","aspectRatio","margins","containerSize","maintainHeight","retinaScale","forceRatio","forceStyle","pixelRatio","deviceHeight","deviceWidth","setTransform","supportsEventListenerOptions","passiveSupported","passive","addEventListener","removeEventListener","readUsedSize","_pointInLine","p1","p2","_steppedInterpolation","_bezierInterpolation","cp1","cp2","c","getRightToLeftAdapter","rectX","setWidth","xPlus","leftForLtr","itemWidth","getLeftToRightAdapter","_itemWidth","getRtlAdapter","overrideTextDirection","direction","original","getPropertyPriority","setProperty","prevTextDirection","restoreTextDirection","propertyFn","between","compare","normalize","normalizeSegment","getSegment","segment","startBound","endBound","_boundSegment","inside","subStart","prevValue","startIsBefore","endIsBefore","shouldStart","shouldStop","_boundSegments","segments","sub","findStartAndEnd","solidSegments","cur","stop","_computeSegments","segmentOptions","_loop","splitByStyles","completeLoop","_fullLoop","doSplitByStyles","chartContext","_chart","baseStyle","readStyle","_datasetIndex","prevStyle","addStyle","l","st","dir","p0","p0DataIndex","p1DataIndex","styleChanged","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","replacer","getSizeForArea","chartArea","field","getDatasetArea","getDatasetClipArea","_clip","disabled"],"mappings":"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","sourcesContent":["/**\n * @namespace Chart.helpers\n */\n\nimport type {AnyObject} from '../types/basic.js';\nimport type {ActiveDataPoint, ChartEvent} from '../types/index.js';\n\n/**\n * An empty function that can be used, for example, for optional callback.\n */\nexport function noop() {\n  /* noop */\n}\n\n/**\n * Returns a unique id, sequentially generated from a global variable.\n */\nexport const uid = (() => {\n  let id = 0;\n  return () => id++;\n})();\n\n/**\n * Returns true if `value` is neither null nor undefined, else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */\nexport function isNullOrUndef(value: unknown): value is null | undefined {\n  return value === null || value === undefined;\n}\n\n/**\n * Returns true if `value` is an array (including typed arrays), else returns false.\n * @param value - The value to test.\n * @function\n */\nexport function isArray<T = unknown>(value: unknown): value is T[] {\n  if (Array.isArray && Array.isArray(value)) {\n    return true;\n  }\n  const type = Object.prototype.toString.call(value);\n  if (type.slice(0, 7) === '[object' && type.slice(-6) === 'Array]') {\n    return true;\n  }\n  return false;\n}\n\n/**\n * Returns true if `value` is an object (excluding null), else returns false.\n * @param value - The value to test.\n * @since 2.7.0\n */\nexport function isObject(value: unknown): value is AnyObject {\n  return value !== null && Object.prototype.toString.call(value) === '[object Object]';\n}\n\n/**\n * Returns true if `value` is a finite number, else returns false\n * @param value  - The value to test.\n */\nfunction isNumberFinite(value: unknown): value is number {\n  return (typeof value === 'number' || value instanceof Number) && isFinite(+value);\n}\nexport {\n  isNumberFinite as isFinite,\n};\n\n/**\n * Returns `value` if finite, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is not finite.\n */\nexport function finiteOrDefault(value: unknown, defaultValue: number) {\n  return isNumberFinite(value) ? value : defaultValue;\n}\n\n/**\n * Returns `value` if defined, else returns `defaultValue`.\n * @param value - The value to return if defined.\n * @param defaultValue - The value to return if `value` is undefined.\n */\nexport function valueOrDefault<T>(value: T | undefined, defaultValue: T) {\n  return typeof value === 'undefined' ? defaultValue : value;\n}\n\nexport const toPercentage = (value: number | string, dimension: number) =>\n  typeof value === 'string' && value.endsWith('%') ?\n    parseFloat(value) / 100\n    : +value / dimension;\n\nexport const toDimension = (value: number | string, dimension: number) =>\n  typeof value === 'string' && value.endsWith('%') ?\n    parseFloat(value) / 100 * dimension\n    : +value;\n\n/**\n * Calls `fn` with the given `args` in the scope defined by `thisArg` and returns the\n * value returned by `fn`. If `fn` is not a function, this method returns undefined.\n * @param fn - The function to call.\n * @param args - The arguments with which `fn` should be called.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n */\nexport function callback<T extends (this: TA, ...restArgs: unknown[]) => R, TA, R>(\n  fn: T | undefined,\n  args: unknown[],\n  thisArg?: TA\n): R | undefined {\n  if (fn && typeof fn.call === 'function') {\n    return fn.apply(thisArg, args);\n  }\n}\n\n/**\n * Note(SB) for performance sake, this method should only be used when loopable type\n * is unknown or in none intensive code (not called often and small loopable). Else\n * it's preferable to use a regular for() loop and save extra function calls.\n * @param loopable - The object or array to be iterated.\n * @param fn - The function to call for each item.\n * @param [thisArg] - The value of `this` provided for the call to `fn`.\n * @param [reverse] - If true, iterates backward on the loopable.\n */\nexport function each<T, TA>(\n  loopable: Record<string, T>,\n  fn: (this: TA, v: T, i: string) => void,\n  thisArg?: TA,\n  reverse?: boolean\n): void;\nexport function each<T, TA>(\n  loopable: T[],\n  fn: (this: TA, v: T, i: number) => void,\n  thisArg?: TA,\n  reverse?: boolean\n): void;\nexport function each<T, TA>(\n  loopable: T[] | Record<string, T>,\n  fn: (this: TA, v: T, i: any) => void,\n  thisArg?: TA,\n  reverse?: boolean\n) {\n  let i: number, len: number, keys: string[];\n  if (isArray(loopable)) {\n    len = loopable.length;\n    if (reverse) {\n      for (i = len - 1; i >= 0; i--) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    } else {\n      for (i = 0; i < len; i++) {\n        fn.call(thisArg, loopable[i], i);\n      }\n    }\n  } else if (isObject(loopable)) {\n    keys = Object.keys(loopable);\n    len = keys.length;\n    for (i = 0; i < len; i++) {\n      fn.call(thisArg, loopable[keys[i]], keys[i]);\n    }\n  }\n}\n\n/**\n * Returns true if the `a0` and `a1` arrays have the same content, else returns false.\n * @param a0 - The array to compare\n * @param a1 - The array to compare\n * @private\n */\nexport function _elementsEqual(a0: ActiveDataPoint[], a1: ActiveDataPoint[]) {\n  let i: number, ilen: number, v0: ActiveDataPoint, v1: ActiveDataPoint;\n\n  if (!a0 || !a1 || a0.length !== a1.length) {\n    return false;\n  }\n\n  for (i = 0, ilen = a0.length; i < ilen; ++i) {\n    v0 = a0[i];\n    v1 = a1[i];\n\n    if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Returns a deep copy of `source` without keeping references on objects and arrays.\n * @param source - The value to clone.\n */\nexport function clone<T>(source: T): T {\n  if (isArray(source)) {\n    return source.map(clone) as unknown as T;\n  }\n\n  if (isObject(source)) {\n    const target = Object.create(null);\n    const keys = Object.keys(source);\n    const klen = keys.length;\n    let k = 0;\n\n    for (; k < klen; ++k) {\n      target[keys[k]] = clone(source[keys[k]]);\n    }\n\n    return target;\n  }\n\n  return source;\n}\n\nfunction isValidKey(key: string) {\n  return ['__proto__', 'prototype', 'constructor'].indexOf(key) === -1;\n}\n\n/**\n * The default merger when Chart.helpers.merge is called without merger option.\n * Note(SB): also used by mergeConfig and mergeScaleConfig as fallback.\n * @private\n */\nexport function _merger(key: string, target: AnyObject, source: AnyObject, options: AnyObject) {\n  if (!isValidKey(key)) {\n    return;\n  }\n\n  const tval = target[key];\n  const sval = source[key];\n\n  if (isObject(tval) && isObject(sval)) {\n    // eslint-disable-next-line @typescript-eslint/no-use-before-define\n    merge(tval, sval, options);\n  } else {\n    target[key] = clone(sval);\n  }\n}\n\nexport interface MergeOptions {\n  merger?: (key: string, target: AnyObject, source: AnyObject, options?: AnyObject) => void;\n}\n\n/**\n * Recursively deep copies `source` properties into `target` with the given `options`.\n * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\n * @param target - The target object in which all sources are merged into.\n * @param source - Object(s) to merge into `target`.\n * @param [options] - Merging options:\n * @param [options.merger] - The merge method (key, target, source, options)\n * @returns The `target` object.\n */\nexport function merge<T>(target: T, source: [], options?: MergeOptions): T;\nexport function merge<T, S1>(target: T, source: S1, options?: MergeOptions): T & S1;\nexport function merge<T, S1>(target: T, source: [S1], options?: MergeOptions): T & S1;\nexport function merge<T, S1, S2>(target: T, source: [S1, S2], options?: MergeOptions): T & S1 & S2;\nexport function merge<T, S1, S2, S3>(target: T, source: [S1, S2, S3], options?: MergeOptions): T & S1 & S2 & S3;\nexport function merge<T, S1, S2, S3, S4>(\n  target: T,\n  source: [S1, S2, S3, S4],\n  options?: MergeOptions\n): T & S1 & S2 & S3 & S4;\nexport function merge<T>(target: T, source: AnyObject[], options?: MergeOptions): AnyObject;\nexport function merge<T>(target: T, source: AnyObject[], options?: MergeOptions): AnyObject {\n  const sources = isArray(source) ? source : [source];\n  const ilen = sources.length;\n\n  if (!isObject(target)) {\n    return target as AnyObject;\n  }\n\n  options = options || {};\n  const merger = options.merger || _merger;\n  let current: AnyObject;\n\n  for (let i = 0; i < ilen; ++i) {\n    current = sources[i];\n    if (!isObject(current)) {\n      continue;\n    }\n\n    const keys = Object.keys(current);\n    for (let k = 0, klen = keys.length; k < klen; ++k) {\n      merger(keys[k], target, current, options as AnyObject);\n    }\n  }\n\n  return target;\n}\n\n/**\n * Recursively deep copies `source` properties into `target` *only* if not defined in target.\n * IMPORTANT: `target` is not cloned and will be updated with `source` properties.\n * @param target - The target object in which all sources are merged into.\n * @param source - Object(s) to merge into `target`.\n * @returns The `target` object.\n */\nexport function mergeIf<T>(target: T, source: []): T;\nexport function mergeIf<T, S1>(target: T, source: S1): T & S1;\nexport function mergeIf<T, S1>(target: T, source: [S1]): T & S1;\nexport function mergeIf<T, S1, S2>(target: T, source: [S1, S2]): T & S1 & S2;\nexport function mergeIf<T, S1, S2, S3>(target: T, source: [S1, S2, S3]): T & S1 & S2 & S3;\nexport function mergeIf<T, S1, S2, S3, S4>(target: T, source: [S1, S2, S3, S4]): T & S1 & S2 & S3 & S4;\nexport function mergeIf<T>(target: T, source: AnyObject[]): AnyObject;\nexport function mergeIf<T>(target: T, source: AnyObject[]): AnyObject {\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  return merge<T>(target, source, {merger: _mergerIf});\n}\n\n/**\n * Merges source[key] in target[key] only if target[key] is undefined.\n * @private\n */\nexport function _mergerIf(key: string, target: AnyObject, source: AnyObject) {\n  if (!isValidKey(key)) {\n    return;\n  }\n\n  const tval = target[key];\n  const sval = source[key];\n\n  if (isObject(tval) && isObject(sval)) {\n    mergeIf(tval, sval);\n  } else if (!Object.prototype.hasOwnProperty.call(target, key)) {\n    target[key] = clone(sval);\n  }\n}\n\n/**\n * @private\n */\nexport function _deprecated(scope: string, value: unknown, previous: string, current: string) {\n  if (value !== undefined) {\n    console.warn(scope + ': \"' + previous +\n      '\" is deprecated. Please use \"' + current + '\" instead');\n  }\n}\n\n// resolveObjectKey resolver cache\nconst keyResolvers = {\n  // Chart.helpers.core resolveObjectKey should resolve empty key to root object\n  '': v => v,\n  // default resolvers\n  x: o => o.x,\n  y: o => o.y\n};\n\n/**\n * @private\n */\nexport function _splitKey(key: string) {\n  const parts = key.split('.');\n  const keys: string[] = [];\n  let tmp = '';\n  for (const part of parts) {\n    tmp += part;\n    if (tmp.endsWith('\\\\')) {\n      tmp = tmp.slice(0, -1) + '.';\n    } else {\n      keys.push(tmp);\n      tmp = '';\n    }\n  }\n  return keys;\n}\n\nfunction _getKeyResolver(key: string) {\n  const keys = _splitKey(key);\n  return obj => {\n    for (const k of keys) {\n      if (k === '') {\n        // For backward compatibility:\n        // Chart.helpers.core resolveObjectKey should break at empty key\n        break;\n      }\n      obj = obj && obj[k];\n    }\n    return obj;\n  };\n}\n\nexport function resolveObjectKey(obj: AnyObject, key: string): any {\n  const resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));\n  return resolver(obj);\n}\n\n/**\n * @private\n */\nexport function _capitalize(str: string) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\nexport const defined = (value: unknown) => typeof value !== 'undefined';\n\nexport const isFunction = (value: unknown): value is (...args: any[]) => any => typeof value === 'function';\n\n// Adapted from https://stackoverflow.com/questions/31128855/comparing-ecma6-sets-for-equality#31129384\nexport const setsEqual = <T>(a: Set<T>, b: Set<T>) => {\n  if (a.size !== b.size) {\n    return false;\n  }\n\n  for (const item of a) {\n    if (!b.has(item)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\n * @param e - The event\n * @private\n */\nexport function _isClickEvent(e: ChartEvent) {\n  return e.type === 'mouseup' || e.type === 'click' || e.type === 'contextmenu';\n}\n","import type {Point} from '../types/geometric.js';\nimport {isFinite as isFiniteNumber} from './helpers.core.js';\n\n/**\n * @alias Chart.helpers.math\n * @namespace\n */\n\nexport const PI = Math.PI;\nexport const TAU = 2 * PI;\nexport const PITAU = TAU + PI;\nexport const INFINITY = Number.POSITIVE_INFINITY;\nexport const RAD_PER_DEG = PI / 180;\nexport const HALF_PI = PI / 2;\nexport const QUARTER_PI = PI / 4;\nexport const TWO_THIRDS_PI = PI * 2 / 3;\n\nexport const log10 = Math.log10;\nexport const sign = Math.sign;\n\nexport function almostEquals(x: number, y: number, epsilon: number) {\n  return Math.abs(x - y) < epsilon;\n}\n\n/**\n * Implementation of the nice number algorithm used in determining where axis labels will go\n */\nexport function niceNum(range: number) {\n  const roundedRange = Math.round(range);\n  range = almostEquals(range, roundedRange, range / 1000) ? roundedRange : range;\n  const niceRange = Math.pow(10, Math.floor(log10(range)));\n  const fraction = range / niceRange;\n  const niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;\n  return niceFraction * niceRange;\n}\n\n/**\n * Returns an array of factors sorted from 1 to sqrt(value)\n * @private\n */\nexport function _factorize(value: number) {\n  const result: number[] = [];\n  const sqrt = Math.sqrt(value);\n  let i: number;\n\n  for (i = 1; i < sqrt; i++) {\n    if (value % i === 0) {\n      result.push(i);\n      result.push(value / i);\n    }\n  }\n  if (sqrt === (sqrt | 0)) { // if value is a square number\n    result.push(sqrt);\n  }\n\n  result.sort((a, b) => a - b).pop();\n  return result;\n}\n\n/**\n * Verifies that attempting to coerce n to string or number won't throw a TypeError.\n */\nfunction isNonPrimitive(n: unknown) {\n  return typeof n === 'symbol' || (typeof n === 'object' && n !== null && !(Symbol.toPrimitive in n || 'toString' in n || 'valueOf' in n));\n}\n\nexport function isNumber(n: unknown): n is number {\n  return !isNonPrimitive(n) && !isNaN(parseFloat(n as string)) && isFinite(n as number);\n}\n\nexport function almostWhole(x: number, epsilon: number) {\n  const rounded = Math.round(x);\n  return ((rounded - epsilon) <= x) && ((rounded + epsilon) >= x);\n}\n\n/**\n * @private\n */\nexport function _setMinAndMaxByKey(\n  array: Record<string, number>[],\n  target: { min: number, max: number },\n  property: string\n) {\n  let i: number, ilen: number, value: number;\n\n  for (i = 0, ilen = array.length; i < ilen; i++) {\n    value = array[i][property];\n    if (!isNaN(value)) {\n      target.min = Math.min(target.min, value);\n      target.max = Math.max(target.max, value);\n    }\n  }\n}\n\nexport function toRadians(degrees: number) {\n  return degrees * (PI / 180);\n}\n\nexport function toDegrees(radians: number) {\n  return radians * (180 / PI);\n}\n\n/**\n * Returns the number of decimal places\n * i.e. the number of digits after the decimal point, of the value of this Number.\n * @param x - A number.\n * @returns The number of decimal places.\n * @private\n */\nexport function _decimalPlaces(x: number) {\n  if (!isFiniteNumber(x)) {\n    return;\n  }\n  let e = 1;\n  let p = 0;\n  while (Math.round(x * e) / e !== x) {\n    e *= 10;\n    p++;\n  }\n  return p;\n}\n\n// Gets the angle from vertical upright to the point about a centre.\nexport function getAngleFromPoint(\n  centrePoint: Point,\n  anglePoint: Point\n) {\n  const distanceFromXCenter = anglePoint.x - centrePoint.x;\n  const distanceFromYCenter = anglePoint.y - centrePoint.y;\n  const radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\n\n  let angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);\n\n  if (angle < (-0.5 * PI)) {\n    angle += TAU; // make sure the returned angle is in the range of (-PI/2, 3PI/2]\n  }\n\n  return {\n    angle,\n    distance: radialDistanceFromCenter\n  };\n}\n\nexport function distanceBetweenPoints(pt1: Point, pt2: Point) {\n  return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));\n}\n\n/**\n * Shortest distance between angles, in either direction.\n * @private\n */\nexport function _angleDiff(a: number, b: number) {\n  return (a - b + PITAU) % TAU - PI;\n}\n\n/**\n * Normalize angle to be between 0 and 2*PI\n * @private\n */\nexport function _normalizeAngle(a: number) {\n  return (a % TAU + TAU) % TAU;\n}\n\n/**\n * @private\n */\nexport function _angleBetween(angle: number, start: number, end: number, sameAngleIsFullCircle?: boolean) {\n  const a = _normalizeAngle(angle);\n  const s = _normalizeAngle(start);\n  const e = _normalizeAngle(end);\n  const angleToStart = _normalizeAngle(s - a);\n  const angleToEnd = _normalizeAngle(e - a);\n  const startToAngle = _normalizeAngle(a - s);\n  const endToAngle = _normalizeAngle(a - e);\n  return a === s || a === e || (sameAngleIsFullCircle && s === e)\n    || (angleToStart > angleToEnd && startToAngle < endToAngle);\n}\n\n/**\n * Limit `value` between `min` and `max`\n * @param value\n * @param min\n * @param max\n * @private\n */\nexport function _limitValue(value: number, min: number, max: number) {\n  return Math.max(min, Math.min(max, value));\n}\n\n/**\n * @param {number} value\n * @private\n */\nexport function _int16Range(value: number) {\n  return _limitValue(value, -32768, 32767);\n}\n\n/**\n * @param value\n * @param start\n * @param end\n * @param [epsilon]\n * @private\n */\nexport function _isBetween(value: number, start: number, end: number, epsilon = 1e-6) {\n  return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;\n}\n","import {_capitalize} from './helpers.core.js';\n\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param value - value to find\n * @param cmp\n * @private\n */\nexport function _lookup(\n  table: number[],\n  value: number,\n  cmp?: (value: number) => boolean\n): {lo: number, hi: number};\nexport function _lookup<T>(\n  table: T[],\n  value: number,\n  cmp: (value: number) => boolean\n): {lo: number, hi: number};\nexport function _lookup(\n  table: unknown[],\n  value: number,\n  cmp?: (value: number) => boolean\n) {\n  cmp = cmp || ((index) => table[index] < value);\n  let hi = table.length - 1;\n  let lo = 0;\n  let mid: number;\n\n  while (hi - lo > 1) {\n    mid = (lo + hi) >> 1;\n    if (cmp(mid)) {\n      lo = mid;\n    } else {\n      hi = mid;\n    }\n  }\n\n  return {lo, hi};\n}\n\n/**\n * Binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @param last - lookup last index\n * @private\n */\nexport const _lookupByKey = (\n  table: Record<string, number>[],\n  key: string,\n  value: number,\n  last?: boolean\n) =>\n  _lookup(table, value, last\n    ? index => {\n      const ti = table[index][key];\n      return ti < value || ti === value && table[index + 1][key] === value;\n    }\n    : index => table[index][key] < value);\n\n/**\n * Reverse binary search\n * @param table - the table search. must be sorted!\n * @param key - property name for the value in each entry\n * @param value - value to find\n * @private\n */\nexport const _rlookupByKey = (\n  table: Record<string, number>[],\n  key: string,\n  value: number\n) =>\n  _lookup(table, value, index => table[index][key] >= value);\n\n/**\n * Return subset of `values` between `min` and `max` inclusive.\n * Values are assumed to be in sorted order.\n * @param values - sorted array of values\n * @param min - min value\n * @param max - max value\n */\nexport function _filterBetween(values: number[], min: number, max: number) {\n  let start = 0;\n  let end = values.length;\n\n  while (start < end && values[start] < min) {\n    start++;\n  }\n  while (end > start && values[end - 1] > max) {\n    end--;\n  }\n\n  return start > 0 || end < values.length\n    ? values.slice(start, end)\n    : values;\n}\n\nconst arrayEvents = ['push', 'pop', 'shift', 'splice', 'unshift'] as const;\n\nexport interface ArrayListener<T> {\n  _onDataPush?(...item: T[]): void;\n  _onDataPop?(): void;\n  _onDataShift?(): void;\n  _onDataSplice?(index: number, deleteCount: number, ...items: T[]): void;\n  _onDataUnshift?(...item: T[]): void;\n}\n\n/**\n * Hooks the array methods that add or remove values ('push', pop', 'shift', 'splice',\n * 'unshift') and notify the listener AFTER the array has been altered. Listeners are\n * called on the '_onData*' callbacks (e.g. _onDataPush, etc.) with same arguments.\n */\nexport function listenArrayEvents<T>(array: T[], listener: ArrayListener<T>): void;\nexport function listenArrayEvents(array, listener) {\n  if (array._chartjs) {\n    array._chartjs.listeners.push(listener);\n    return;\n  }\n\n  Object.defineProperty(array, '_chartjs', {\n    configurable: true,\n    enumerable: false,\n    value: {\n      listeners: [listener]\n    }\n  });\n\n  arrayEvents.forEach((key) => {\n    const method = '_onData' + _capitalize(key);\n    const base = array[key];\n\n    Object.defineProperty(array, key, {\n      configurable: true,\n      enumerable: false,\n      value(...args) {\n        const res = base.apply(this, args);\n\n        array._chartjs.listeners.forEach((object) => {\n          if (typeof object[method] === 'function') {\n            object[method](...args);\n          }\n        });\n\n        return res;\n      }\n    });\n  });\n}\n\n\n/**\n * Removes the given array event listener and cleanup extra attached properties (such as\n * the _chartjs stub and overridden methods) if array doesn't have any more listeners.\n */\nexport function unlistenArrayEvents<T>(array: T[], listener: ArrayListener<T>): void;\nexport function unlistenArrayEvents(array, listener) {\n  const stub = array._chartjs;\n  if (!stub) {\n    return;\n  }\n\n  const listeners = stub.listeners;\n  const index = listeners.indexOf(listener);\n  if (index !== -1) {\n    listeners.splice(index, 1);\n  }\n\n  if (listeners.length > 0) {\n    return;\n  }\n\n  arrayEvents.forEach((key) => {\n    delete array[key];\n  });\n\n  delete array._chartjs;\n}\n\n/**\n * @param items\n */\nexport function _arrayUnique<T>(items: T[]) {\n  const set = new Set<T>(items);\n\n  if (set.size === items.length) {\n    return items;\n  }\n\n  return Array.from(set);\n}\n","import type {ChartMeta, PointElement} from '../types/index.js';\n\nimport {_limitValue} from './helpers.math.js';\nimport {_lookupByKey} from './helpers.collection.js';\nimport {isNullOrUndef} from './helpers.core.js';\n\nexport function fontString(pixelSize: number, fontStyle: string, fontFamily: string) {\n  return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;\n}\n\n/**\n* Request animation polyfill\n*/\nexport const requestAnimFrame = (function() {\n  if (typeof window === 'undefined') {\n    return function(callback) {\n      return callback();\n    };\n  }\n  return window.requestAnimationFrame;\n}());\n\n/**\n * Throttles calling `fn` once per animation frame\n * Latest arguments are used on the actual call\n */\nexport function throttled<TArgs extends Array<any>>(\n  fn: (...args: TArgs) => void,\n  thisArg: any,\n) {\n  let argsToUse = [] as TArgs;\n  let ticking = false;\n\n  return function(...args: TArgs) {\n    // Save the args for use later\n    argsToUse = args;\n    if (!ticking) {\n      ticking = true;\n      requestAnimFrame.call(window, () => {\n        ticking = false;\n        fn.apply(thisArg, argsToUse);\n      });\n    }\n  };\n}\n\n/**\n * Debounces calling `fn` for `delay` ms\n */\nexport function debounce<TArgs extends Array<any>>(fn: (...args: TArgs) => void, delay: number) {\n  let timeout;\n  return function(...args: TArgs) {\n    if (delay) {\n      clearTimeout(timeout);\n      timeout = setTimeout(fn, delay, args);\n    } else {\n      fn.apply(this, args);\n    }\n    return delay;\n  };\n}\n\n/**\n * Converts 'start' to 'left', 'end' to 'right' and others to 'center'\n * @private\n */\nexport const _toLeftRightCenter = (align: 'start' | 'end' | 'center') => align === 'start' ? 'left' : align === 'end' ? 'right' : 'center';\n\n/**\n * Returns `start`, `end` or `(start + end) / 2` depending on `align`. Defaults to `center`\n * @private\n */\nexport const _alignStartEnd = (align: 'start' | 'end' | 'center', start: number, end: number) => align === 'start' ? start : align === 'end' ? end : (start + end) / 2;\n\n/**\n * Returns `left`, `right` or `(left + right) / 2` depending on `align`. Defaults to `left`\n * @private\n */\nexport const _textX = (align: 'left' | 'right' | 'center', left: number, right: number, rtl: boolean) => {\n  const check = rtl ? 'left' : 'right';\n  return align === check ? right : align === 'center' ? (left + right) / 2 : left;\n};\n\n/**\n * Return start and count of visible points.\n * @private\n */\nexport function _getStartAndCountOfVisiblePoints(meta: ChartMeta<'line' | 'scatter'>, points: PointElement[], animationsDisabled: boolean) {\n  const pointCount = points.length;\n\n  let start = 0;\n  let count = pointCount;\n\n  if (meta._sorted) {\n    const {iScale, vScale, _parsed} = meta;\n    const spanGaps = meta.dataset ? meta.dataset.options ? meta.dataset.options.spanGaps : null : null;\n    const axis = iScale.axis;\n    const {min, max, minDefined, maxDefined} = iScale.getUserBounds();\n\n    if (minDefined) {\n      start = Math.min(\n        // @ts-expect-error Need to type _parsed\n        _lookupByKey(_parsed, axis, min).lo,\n        // @ts-expect-error Need to fix types on _lookupByKey\n        animationsDisabled ? pointCount : _lookupByKey(points, axis, iScale.getPixelForValue(min)).lo);\n      if (spanGaps) {\n        const distanceToDefinedLo = (_parsed\n          .slice(0, start + 1)\n          .reverse()\n          .findIndex(\n            point => !isNullOrUndef(point[vScale.axis])));\n        start -= Math.max(0, distanceToDefinedLo);\n      }\n      start = _limitValue(start, 0, pointCount - 1);\n    }\n    if (maxDefined) {\n      let end = Math.max(\n        // @ts-expect-error Need to type _parsed\n        _lookupByKey(_parsed, iScale.axis, max, true).hi + 1,\n        // @ts-expect-error Need to fix types on _lookupByKey\n        animationsDisabled ? 0 : _lookupByKey(points, axis, iScale.getPixelForValue(max), true).hi + 1);\n      if (spanGaps) {\n        const distanceToDefinedHi = (_parsed\n          .slice(end - 1)\n          .findIndex(\n            point => !isNullOrUndef(point[vScale.axis])));\n        end += Math.max(0, distanceToDefinedHi);\n      }\n      count = _limitValue(end, start, pointCount) - start;\n    } else {\n      count = pointCount - start;\n    }\n  }\n\n  return {start, count};\n}\n\n/**\n * Checks if the scale ranges have changed.\n * @param {object} meta - dataset meta.\n * @returns {boolean}\n * @private\n */\nexport function _scaleRangesChanged(meta) {\n  const {xScale, yScale, _scaleRanges} = meta;\n  const newRanges = {\n    xmin: xScale.min,\n    xmax: xScale.max,\n    ymin: yScale.min,\n    ymax: yScale.max\n  };\n  if (!_scaleRanges) {\n    meta._scaleRanges = newRanges;\n    return true;\n  }\n  const changed = _scaleRanges.xmin !== xScale.min\n\t\t|| _scaleRanges.xmax !== xScale.max\n\t\t|| _scaleRanges.ymin !== yScale.min\n\t\t|| _scaleRanges.ymax !== yScale.max;\n\n  Object.assign(_scaleRanges, newRanges);\n  return changed;\n}\n","import {PI, TAU, HALF_PI} from './helpers.math.js';\n\nconst atEdge = (t: number) => t === 0 || t === 1;\nconst elasticIn = (t: number, s: number, p: number) => -(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));\nconst elasticOut = (t: number, s: number, p: number) => Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;\n\n/**\n * Easing functions adapted from Robert Penner's easing equations.\n * @namespace Chart.helpers.easing.effects\n * @see http://www.robertpenner.com/easing/\n */\nconst effects = {\n  linear: (t: number) => t,\n\n  easeInQuad: (t: number) => t * t,\n\n  easeOutQuad: (t: number) => -t * (t - 2),\n\n  easeInOutQuad: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t\n    : -0.5 * ((--t) * (t - 2) - 1),\n\n  easeInCubic: (t: number) => t * t * t,\n\n  easeOutCubic: (t: number) => (t -= 1) * t * t + 1,\n\n  easeInOutCubic: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t\n    : 0.5 * ((t -= 2) * t * t + 2),\n\n  easeInQuart: (t: number) => t * t * t * t,\n\n  easeOutQuart: (t: number) => -((t -= 1) * t * t * t - 1),\n\n  easeInOutQuart: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t * t\n    : -0.5 * ((t -= 2) * t * t * t - 2),\n\n  easeInQuint: (t: number) => t * t * t * t * t,\n\n  easeOutQuint: (t: number) => (t -= 1) * t * t * t * t + 1,\n\n  easeInOutQuint: (t: number) => ((t /= 0.5) < 1)\n    ? 0.5 * t * t * t * t * t\n    : 0.5 * ((t -= 2) * t * t * t * t + 2),\n\n  easeInSine: (t: number) => -Math.cos(t * HALF_PI) + 1,\n\n  easeOutSine: (t: number) => Math.sin(t * HALF_PI),\n\n  easeInOutSine: (t: number) => -0.5 * (Math.cos(PI * t) - 1),\n\n  easeInExpo: (t: number) => (t === 0) ? 0 : Math.pow(2, 10 * (t - 1)),\n\n  easeOutExpo: (t: number) => (t === 1) ? 1 : -Math.pow(2, -10 * t) + 1,\n\n  easeInOutExpo: (t: number) => atEdge(t) ? t : t < 0.5\n    ? 0.5 * Math.pow(2, 10 * (t * 2 - 1))\n    : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2),\n\n  easeInCirc: (t: number) => (t >= 1) ? t : -(Math.sqrt(1 - t * t) - 1),\n\n  easeOutCirc: (t: number) => Math.sqrt(1 - (t -= 1) * t),\n\n  easeInOutCirc: (t: number) => ((t /= 0.5) < 1)\n    ? -0.5 * (Math.sqrt(1 - t * t) - 1)\n    : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1),\n\n  easeInElastic: (t: number) => atEdge(t) ? t : elasticIn(t, 0.075, 0.3),\n\n  easeOutElastic: (t: number) => atEdge(t) ? t : elasticOut(t, 0.075, 0.3),\n\n  easeInOutElastic(t: number) {\n    const s = 0.1125;\n    const p = 0.45;\n    return atEdge(t) ? t :\n      t < 0.5\n        ? 0.5 * elasticIn(t * 2, s, p)\n        : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);\n  },\n\n  easeInBack(t: number) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n  },\n\n  easeOutBack(t: number) {\n    const s = 1.70158;\n    return (t -= 1) * t * ((s + 1) * t + s) + 1;\n  },\n\n  easeInOutBack(t: number) {\n    let s = 1.70158;\n    if ((t /= 0.5) < 1) {\n      return 0.5 * (t * t * (((s *= (1.525)) + 1) * t - s));\n    }\n    return 0.5 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\n  },\n\n  easeInBounce: (t: number) => 1 - effects.easeOutBounce(1 - t),\n\n  easeOutBounce(t: number) {\n    const m = 7.5625;\n    const d = 2.75;\n    if (t < (1 / d)) {\n      return m * t * t;\n    }\n    if (t < (2 / d)) {\n      return m * (t -= (1.5 / d)) * t + 0.75;\n    }\n    if (t < (2.5 / d)) {\n      return m * (t -= (2.25 / d)) * t + 0.9375;\n    }\n    return m * (t -= (2.625 / d)) * t + 0.984375;\n  },\n\n  easeInOutBounce: (t: number) => (t < 0.5)\n    ? effects.easeInBounce(t * 2) * 0.5\n    : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5,\n} as const;\n\nexport type EasingFunction = keyof typeof effects\n\nexport default effects;\n","import {Color} from '@kurkle/color';\n\nexport function isPatternOrGradient(value: unknown): value is CanvasPattern | CanvasGradient {\n  if (value && typeof value === 'object') {\n    const type = value.toString();\n    return type === '[object CanvasPattern]' || type === '[object CanvasGradient]';\n  }\n\n  return false;\n}\n\nexport function color(value: CanvasGradient): CanvasGradient;\nexport function color(value: CanvasPattern): CanvasPattern;\nexport function color(\n  value:\n  | string\n  | { r: number; g: number; b: number; a: number }\n  | [number, number, number]\n  | [number, number, number, number]\n): Color;\nexport function color(value) {\n  return isPatternOrGradient(value) ? value : new Color(value);\n}\n\nexport function getHoverColor(value: CanvasGradient): CanvasGradient;\nexport function getHoverColor(value: CanvasPattern): CanvasPattern;\nexport function getHoverColor(value: string): string;\nexport function getHoverColor(value) {\n  return isPatternOrGradient(value)\n    ? value\n    : new Color(value).saturate(0.5).darken(0.1).hexString();\n}\n","const numbers = ['x', 'y', 'borderWidth', 'radius', 'tension'];\nconst colors = ['color', 'borderColor', 'backgroundColor'];\n\nexport function applyAnimationsDefaults(defaults) {\n  defaults.set('animation', {\n    delay: undefined,\n    duration: 1000,\n    easing: 'easeOutQuart',\n    fn: undefined,\n    from: undefined,\n    loop: undefined,\n    to: undefined,\n    type: undefined,\n  });\n\n  defaults.describe('animation', {\n    _fallback: false,\n    _indexable: false,\n    _scriptable: (name) => name !== 'onProgress' && name !== 'onComplete' && name !== 'fn',\n  });\n\n  defaults.set('animations', {\n    colors: {\n      type: 'color',\n      properties: colors\n    },\n    numbers: {\n      type: 'number',\n      properties: numbers\n    },\n  });\n\n  defaults.describe('animations', {\n    _fallback: 'animation',\n  });\n\n  defaults.set('transitions', {\n    active: {\n      animation: {\n        duration: 400\n      }\n    },\n    resize: {\n      animation: {\n        duration: 0\n      }\n    },\n    show: {\n      animations: {\n        colors: {\n          from: 'transparent'\n        },\n        visible: {\n          type: 'boolean',\n          duration: 0 // show immediately\n        },\n      }\n    },\n    hide: {\n      animations: {\n        colors: {\n          to: 'transparent'\n        },\n        visible: {\n          type: 'boolean',\n          easing: 'linear',\n          fn: v => v | 0 // for keeping the dataset visible all the way through the animation\n        },\n      }\n    }\n  });\n}\n","export function applyLayoutsDefaults(defaults) {\n  defaults.set('layout', {\n    autoPadding: true,\n    padding: {\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0\n    }\n  });\n}\n","\nconst intlCache = new Map<string, Intl.NumberFormat>();\n\nfunction getNumberFormat(locale: string, options?: Intl.NumberFormatOptions) {\n  options = options || {};\n  const cacheKey = locale + JSON.stringify(options);\n  let formatter = intlCache.get(cacheKey);\n  if (!formatter) {\n    formatter = new Intl.NumberFormat(locale, options);\n    intlCache.set(cacheKey, formatter);\n  }\n  return formatter;\n}\n\nexport function formatNumber(num: number, locale: string, options?: Intl.NumberFormatOptions) {\n  return getNumberFormat(locale, options).format(num);\n}\n","import {isArray} from '../helpers/helpers.core.js';\nimport {formatNumber} from '../helpers/helpers.intl.js';\nimport {log10} from '../helpers/helpers.math.js';\n\n/**\n * Namespace to hold formatters for different types of ticks\n * @namespace Chart.Ticks.formatters\n */\nconst formatters = {\n  /**\n   * Formatter for value labels\n   * @method Chart.Ticks.formatters.values\n   * @param value the value to display\n   * @return {string|string[]} the label to display\n   */\n  values(value) {\n    return isArray(value) ? /** @type {string[]} */ (value) : '' + value;\n  },\n\n  /**\n   * Formatter for numeric ticks\n   * @method Chart.Ticks.formatters.numeric\n   * @param tickValue {number} the value to be formatted\n   * @param index {number} the position of the tickValue parameter in the ticks array\n   * @param ticks {object[]} the list of ticks being converted\n   * @return {string} string representation of the tickValue parameter\n   */\n  numeric(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0'; // never show decimal places for 0\n    }\n\n    const locale = this.chart.options.locale;\n    let notation;\n    let delta = tickValue; // This is used when there are less than 2 ticks as the tick interval.\n\n    if (ticks.length > 1) {\n      // all ticks are small or there huge numbers; use scientific notation\n      const maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));\n      if (maxTick < 1e-4 || maxTick > 1e+15) {\n        notation = 'scientific';\n      }\n\n      delta = calculateDelta(tickValue, ticks);\n    }\n\n    const logDelta = log10(Math.abs(delta));\n\n    // When datasets have values approaching Number.MAX_VALUE, the tick calculations might result in\n    // infinity and eventually NaN. Passing NaN for minimumFractionDigits or maximumFractionDigits\n    // will make the number formatter throw. So instead we check for isNaN and use a fallback value.\n    //\n    // toFixed has a max of 20 decimal places\n    const numDecimal = isNaN(logDelta) ? 1 : Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0);\n\n    const options = {notation, minimumFractionDigits: numDecimal, maximumFractionDigits: numDecimal};\n    Object.assign(options, this.options.ticks.format);\n\n    return formatNumber(tickValue, locale, options);\n  },\n\n\n  /**\n   * Formatter for logarithmic ticks\n   * @method Chart.Ticks.formatters.logarithmic\n   * @param tickValue {number} the value to be formatted\n   * @param index {number} the position of the tickValue parameter in the ticks array\n   * @param ticks {object[]} the list of ticks being converted\n   * @return {string} string representation of the tickValue parameter\n   */\n  logarithmic(tickValue, index, ticks) {\n    if (tickValue === 0) {\n      return '0';\n    }\n    const remain = ticks[index].significand || (tickValue / (Math.pow(10, Math.floor(log10(tickValue)))));\n    if ([1, 2, 3, 5, 10, 15].includes(remain) || index > 0.8 * ticks.length) {\n      return formatters.numeric.call(this, tickValue, index, ticks);\n    }\n    return '';\n  }\n\n};\n\n\nfunction calculateDelta(tickValue, ticks) {\n  // Figure out how many digits to show\n  // The space between the first two ticks might be smaller than normal spacing\n  let delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;\n\n  // If we have a number like 2.5 as the delta, figure out how many decimal places we need\n  if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {\n    // not an integer\n    delta = tickValue - Math.floor(tickValue);\n  }\n  return delta;\n}\n\n/**\n * Namespace to hold static tick generation functions\n * @namespace Chart.Ticks\n */\nexport default {formatters};\n","import Ticks from './core.ticks.js';\n\nexport function applyScaleDefaults(defaults) {\n  defaults.set('scale', {\n    display: true,\n    offset: false,\n    reverse: false,\n    beginAtZero: false,\n\n    /**\n     * Scale boundary strategy (bypassed by min/max time options)\n     * - `data`: make sure data are fully visible, ticks outside are removed\n     * - `ticks`: make sure ticks are fully visible, data outside are truncated\n     * @see https://github.com/chartjs/Chart.js/pull/4556\n     * @since 3.0.0\n     */\n    bounds: 'ticks',\n\n    clip: true,\n\n    /**\n     * Addition grace added to max and reduced from min data value.\n     * @since 3.0.0\n     */\n    grace: 0,\n\n    // grid line settings\n    grid: {\n      display: true,\n      lineWidth: 1,\n      drawOnChartArea: true,\n      drawTicks: true,\n      tickLength: 8,\n      tickWidth: (_ctx, options) => options.lineWidth,\n      tickColor: (_ctx, options) => options.color,\n      offset: false,\n    },\n\n    border: {\n      display: true,\n      dash: [],\n      dashOffset: 0.0,\n      width: 1\n    },\n\n    // scale title\n    title: {\n      // display property\n      display: false,\n\n      // actual label\n      text: '',\n\n      // top/bottom padding\n      padding: {\n        top: 4,\n        bottom: 4\n      }\n    },\n\n    // label settings\n    ticks: {\n      minRotation: 0,\n      maxRotation: 50,\n      mirror: false,\n      textStrokeWidth: 0,\n      textStrokeColor: '',\n      padding: 3,\n      display: true,\n      autoSkip: true,\n      autoSkipPadding: 3,\n      labelOffset: 0,\n      // We pass through arrays to be rendered as multiline labels, we convert Others to strings here.\n      callback: Ticks.formatters.values,\n      minor: {},\n      major: {},\n      align: 'center',\n      crossAlign: 'near',\n\n      showLabelBackdrop: false,\n      backdropColor: 'rgba(255, 255, 255, 0.75)',\n      backdropPadding: 2,\n    }\n  });\n\n  defaults.route('scale.ticks', 'color', '', 'color');\n  defaults.route('scale.grid', 'color', '', 'borderColor');\n  defaults.route('scale.border', 'color', '', 'borderColor');\n  defaults.route('scale.title', 'color', '', 'color');\n\n  defaults.describe('scale', {\n    _fallback: false,\n    _scriptable: (name) => !name.startsWith('before') && !name.startsWith('after') && name !== 'callback' && name !== 'parser',\n    _indexable: (name) => name !== 'borderDash' && name !== 'tickBorderDash' && name !== 'dash',\n  });\n\n  defaults.describe('scales', {\n    _fallback: 'scale',\n  });\n\n  defaults.describe('scale.ticks', {\n    _scriptable: (name) => name !== 'backdropPadding' && name !== 'callback',\n    _indexable: (name) => name !== 'backdropPadding',\n  });\n}\n","import {getHoverColor} from '../helpers/helpers.color.js';\nimport {isObject, merge, valueOrDefault} from '../helpers/helpers.core.js';\nimport {applyAnimationsDefaults} from './core.animations.defaults.js';\nimport {applyLayoutsDefaults} from './core.layouts.defaults.js';\nimport {applyScaleDefaults} from './core.scale.defaults.js';\n\nexport const overrides = Object.create(null);\nexport const descriptors = Object.create(null);\n\n/**\n * @param {object} node\n * @param {string} key\n * @return {object}\n */\nfunction getScope(node, key) {\n  if (!key) {\n    return node;\n  }\n  const keys = key.split('.');\n  for (let i = 0, n = keys.length; i < n; ++i) {\n    const k = keys[i];\n    node = node[k] || (node[k] = Object.create(null));\n  }\n  return node;\n}\n\nfunction set(root, scope, values) {\n  if (typeof scope === 'string') {\n    return merge(getScope(root, scope), values);\n  }\n  return merge(getScope(root, ''), scope);\n}\n\n/**\n * Please use the module's default export which provides a singleton instance\n * Note: class is exported for typedoc\n */\nexport class Defaults {\n  constructor(_descriptors, _appliers) {\n    this.animation = undefined;\n    this.backgroundColor = 'rgba(0,0,0,0.1)';\n    this.borderColor = 'rgba(0,0,0,0.1)';\n    this.color = '#666';\n    this.datasets = {};\n    this.devicePixelRatio = (context) => context.chart.platform.getDevicePixelRatio();\n    this.elements = {};\n    this.events = [\n      'mousemove',\n      'mouseout',\n      'click',\n      'touchstart',\n      'touchmove'\n    ];\n    this.font = {\n      family: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\n      size: 12,\n      style: 'normal',\n      lineHeight: 1.2,\n      weight: null\n    };\n    this.hover = {};\n    this.hoverBackgroundColor = (ctx, options) => getHoverColor(options.backgroundColor);\n    this.hoverBorderColor = (ctx, options) => getHoverColor(options.borderColor);\n    this.hoverColor = (ctx, options) => getHoverColor(options.color);\n    this.indexAxis = 'x';\n    this.interaction = {\n      mode: 'nearest',\n      intersect: true,\n      includeInvisible: false\n    };\n    this.maintainAspectRatio = true;\n    this.onHover = null;\n    this.onClick = null;\n    this.parsing = true;\n    this.plugins = {};\n    this.responsive = true;\n    this.scale = undefined;\n    this.scales = {};\n    this.showLine = true;\n    this.drawActiveElementsOnTop = true;\n\n    this.describe(_descriptors);\n    this.apply(_appliers);\n  }\n\n  /**\n\t * @param {string|object} scope\n\t * @param {object} [values]\n\t */\n  set(scope, values) {\n    return set(this, scope, values);\n  }\n\n  /**\n\t * @param {string} scope\n\t */\n  get(scope) {\n    return getScope(this, scope);\n  }\n\n  /**\n\t * @param {string|object} scope\n\t * @param {object} [values]\n\t */\n  describe(scope, values) {\n    return set(descriptors, scope, values);\n  }\n\n  override(scope, values) {\n    return set(overrides, scope, values);\n  }\n\n  /**\n\t * Routes the named defaults to fallback to another scope/name.\n\t * This routing is useful when those target values, like defaults.color, are changed runtime.\n\t * If the values would be copied, the runtime change would not take effect. By routing, the\n\t * fallback is evaluated at each access, so its always up to date.\n\t *\n\t * Example:\n\t *\n\t * \tdefaults.route('elements.arc', 'backgroundColor', '', 'color')\n\t *   - reads the backgroundColor from defaults.color when undefined locally\n\t *\n\t * @param {string} scope Scope this route applies to.\n\t * @param {string} name Property name that should be routed to different namespace when not defined here.\n\t * @param {string} targetScope The namespace where those properties should be routed to.\n\t * Empty string ('') is the root of defaults.\n\t * @param {string} targetName The target name in the target scope the property should be routed to.\n\t */\n  route(scope, name, targetScope, targetName) {\n    const scopeObject = getScope(this, scope);\n    const targetScopeObject = getScope(this, targetScope);\n    const privateName = '_' + name;\n\n    Object.defineProperties(scopeObject, {\n      // A private property is defined to hold the actual value, when this property is set in its scope (set in the setter)\n      [privateName]: {\n        value: scopeObject[name],\n        writable: true\n      },\n      // The actual property is defined as getter/setter so we can do the routing when value is not locally set.\n      [name]: {\n        enumerable: true,\n        get() {\n          const local = this[privateName];\n          const target = targetScopeObject[targetName];\n          if (isObject(local)) {\n            return Object.assign({}, target, local);\n          }\n          return valueOrDefault(local, target);\n        },\n        set(value) {\n          this[privateName] = value;\n        }\n      }\n    });\n  }\n\n  apply(appliers) {\n    appliers.forEach((apply) => apply(this));\n  }\n}\n\n// singleton instance\nexport default /* #__PURE__ */ new Defaults({\n  _scriptable: (name) => !name.startsWith('on'),\n  _indexable: (name) => name !== 'events',\n  hover: {\n    _fallback: 'interaction'\n  },\n  interaction: {\n    _scriptable: false,\n    _indexable: false,\n  }\n}, [applyAnimationsDefaults, applyLayoutsDefaults, applyScaleDefaults]);\n","import type {\n  Chart,\n  Point,\n  FontSpec,\n  CanvasFontSpec,\n  PointStyle,\n  RenderTextOpts,\n  BackdropOptions\n} from '../types/index.js';\nimport type {\n  TRBL,\n  SplinePoint,\n  RoundedRect,\n  TRBLCorners\n} from '../types/geometric.js';\nimport {isArray, isNullOrUndef} from './helpers.core.js';\nimport {PI, TAU, HALF_PI, QUARTER_PI, TWO_THIRDS_PI, RAD_PER_DEG} from './helpers.math.js';\n\n/**\n * Converts the given font object into a CSS font string.\n * @param font - A font object.\n * @return The CSS font string. See https://developer.mozilla.org/en-US/docs/Web/CSS/font\n * @private\n */\nexport function toFontString(font: FontSpec) {\n  if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {\n    return null;\n  }\n\n  return (font.style ? font.style + ' ' : '')\n\t\t+ (font.weight ? font.weight + ' ' : '')\n\t\t+ font.size + 'px '\n\t\t+ font.family;\n}\n\n/**\n * @private\n */\nexport function _measureText(\n  ctx: CanvasRenderingContext2D,\n  data: Record<string, number>,\n  gc: string[],\n  longest: number,\n  string: string\n) {\n  let textWidth = data[string];\n  if (!textWidth) {\n    textWidth = data[string] = ctx.measureText(string).width;\n    gc.push(string);\n  }\n  if (textWidth > longest) {\n    longest = textWidth;\n  }\n  return longest;\n}\n\ntype Thing = string | undefined | null\ntype Things = (Thing | Thing[])[]\n\n/**\n * @private\n */\n// eslint-disable-next-line complexity\nexport function _longestText(\n  ctx: CanvasRenderingContext2D,\n  font: string,\n  arrayOfThings: Things,\n  cache?: {data?: Record<string, number>, garbageCollect?: string[], font?: string}\n) {\n  cache = cache || {};\n  let data = cache.data = cache.data || {};\n  let gc = cache.garbageCollect = cache.garbageCollect || [];\n\n  if (cache.font !== font) {\n    data = cache.data = {};\n    gc = cache.garbageCollect = [];\n    cache.font = font;\n  }\n\n  ctx.save();\n\n  ctx.font = font;\n  let longest = 0;\n  const ilen = arrayOfThings.length;\n  let i: number, j: number, jlen: number, thing: Thing | Thing[], nestedThing: Thing | Thing[];\n  for (i = 0; i < ilen; i++) {\n    thing = arrayOfThings[i];\n\n    // Undefined strings and arrays should not be measured\n    if (thing !== undefined && thing !== null && !isArray(thing)) {\n      longest = _measureText(ctx, data, gc, longest, thing);\n    } else if (isArray(thing)) {\n      // if it is an array lets measure each element\n      // to do maybe simplify this function a bit so we can do this more recursively?\n      for (j = 0, jlen = thing.length; j < jlen; j++) {\n        nestedThing = thing[j];\n        // Undefined strings and arrays should not be measured\n        if (nestedThing !== undefined && nestedThing !== null && !isArray(nestedThing)) {\n          longest = _measureText(ctx, data, gc, longest, nestedThing);\n        }\n      }\n    }\n  }\n\n  ctx.restore();\n\n  const gcLen = gc.length / 2;\n  if (gcLen > arrayOfThings.length) {\n    for (i = 0; i < gcLen; i++) {\n      delete data[gc[i]];\n    }\n    gc.splice(0, gcLen);\n  }\n  return longest;\n}\n\n/**\n * Returns the aligned pixel value to avoid anti-aliasing blur\n * @param chart - The chart instance.\n * @param pixel - A pixel value.\n * @param width - The width of the element.\n * @returns The aligned pixel value.\n * @private\n */\nexport function _alignPixel(chart: Chart, pixel: number, width: number) {\n  const devicePixelRatio = chart.currentDevicePixelRatio;\n  const halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;\n  return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;\n}\n\n/**\n * Clears the entire canvas.\n */\nexport function clearCanvas(canvas?: HTMLCanvasElement, ctx?: CanvasRenderingContext2D) {\n  if (!ctx && !canvas) {\n    return;\n  }\n\n  ctx = ctx || canvas.getContext('2d');\n\n  ctx.save();\n  // canvas.width and canvas.height do not consider the canvas transform,\n  // while clearRect does\n  ctx.resetTransform();\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.restore();\n}\n\nexport interface DrawPointOptions {\n  pointStyle: PointStyle;\n  rotation?: number;\n  radius: number;\n  borderWidth: number;\n}\n\nexport function drawPoint(\n  ctx: CanvasRenderingContext2D,\n  options: DrawPointOptions,\n  x: number,\n  y: number\n) {\n  // eslint-disable-next-line @typescript-eslint/no-use-before-define\n  drawPointLegend(ctx, options, x, y, null);\n}\n\n// eslint-disable-next-line complexity\nexport function drawPointLegend(\n  ctx: CanvasRenderingContext2D,\n  options: DrawPointOptions,\n  x: number,\n  y: number,\n  w: number\n) {\n  let type: string, xOffset: number, yOffset: number, size: number, cornerRadius: number, width: number, xOffsetW: number, yOffsetW: number;\n  const style = options.pointStyle;\n  const rotation = options.rotation;\n  const radius = options.radius;\n  let rad = (rotation || 0) * RAD_PER_DEG;\n\n  if (style && typeof style === 'object') {\n    type = style.toString();\n    if (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.rotate(rad);\n      ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);\n      ctx.restore();\n      return;\n    }\n  }\n\n  if (isNaN(radius) || radius <= 0) {\n    return;\n  }\n\n  ctx.beginPath();\n\n  switch (style) {\n  // Default includes circle\n    default:\n      if (w) {\n        ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);\n      } else {\n        ctx.arc(x, y, radius, 0, TAU);\n      }\n      ctx.closePath();\n      break;\n    case 'triangle':\n      width = w ? w / 2 : radius;\n      ctx.moveTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n      rad += TWO_THIRDS_PI;\n      ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n      rad += TWO_THIRDS_PI;\n      ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);\n      ctx.closePath();\n      break;\n    case 'rectRounded':\n    // NOTE: the rounded rect implementation changed to use `arc` instead of\n    // `quadraticCurveTo` since it generates better results when rect is\n    // almost a circle. 0.516 (instead of 0.5) produces results with visually\n    // closer proportion to the previous impl and it is inscribed in the\n    // circle with `radius`. For more details, see the following PRs:\n    // https://github.com/chartjs/Chart.js/issues/5597\n    // https://github.com/chartjs/Chart.js/issues/5858\n      cornerRadius = radius * 0.516;\n      size = radius - cornerRadius;\n      xOffset = Math.cos(rad + QUARTER_PI) * size;\n      xOffsetW = Math.cos(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n      yOffset = Math.sin(rad + QUARTER_PI) * size;\n      yOffsetW = Math.sin(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);\n      ctx.arc(x - xOffsetW, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);\n      ctx.arc(x + yOffsetW, y - xOffset, cornerRadius, rad - HALF_PI, rad);\n      ctx.arc(x + xOffsetW, y + yOffset, cornerRadius, rad, rad + HALF_PI);\n      ctx.arc(x - yOffsetW, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);\n      ctx.closePath();\n      break;\n    case 'rect':\n      if (!rotation) {\n        size = Math.SQRT1_2 * radius;\n        width = w ? w / 2 : size;\n        ctx.rect(x - width, y - size, 2 * width, 2 * size);\n        break;\n      }\n      rad += QUARTER_PI;\n    /* falls through */\n    case 'rectRot':\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      ctx.closePath();\n      break;\n    case 'crossRot':\n      rad += QUARTER_PI;\n    /* falls through */\n    case 'cross':\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.moveTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      break;\n    case 'star':\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.moveTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      rad += QUARTER_PI;\n      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);\n      xOffset = Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);\n      ctx.moveTo(x - xOffsetW, y - yOffset);\n      ctx.lineTo(x + xOffsetW, y + yOffset);\n      ctx.moveTo(x + yOffsetW, y - xOffset);\n      ctx.lineTo(x - yOffsetW, y + xOffset);\n      break;\n    case 'line':\n      xOffset = w ? w / 2 : Math.cos(rad) * radius;\n      yOffset = Math.sin(rad) * radius;\n      ctx.moveTo(x - xOffset, y - yOffset);\n      ctx.lineTo(x + xOffset, y + yOffset);\n      break;\n    case 'dash':\n      ctx.moveTo(x, y);\n      ctx.lineTo(x + Math.cos(rad) * (w ? w / 2 : radius), y + Math.sin(rad) * radius);\n      break;\n    case false:\n      ctx.closePath();\n      break;\n  }\n\n  ctx.fill();\n  if (options.borderWidth > 0) {\n    ctx.stroke();\n  }\n}\n\n/**\n * Returns true if the point is inside the rectangle\n * @param point - The point to test\n * @param area - The rectangle\n * @param margin - allowed margin\n * @private\n */\nexport function _isPointInArea(\n  point: Point,\n  area: TRBL,\n  margin?: number\n) {\n  margin = margin || 0.5; // margin - default is to match rounded decimals\n\n  return !area || (point && point.x > area.left - margin && point.x < area.right + margin &&\n\t\tpoint.y > area.top - margin && point.y < area.bottom + margin);\n}\n\nexport function clipArea(ctx: CanvasRenderingContext2D, area: TRBL) {\n  ctx.save();\n  ctx.beginPath();\n  ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);\n  ctx.clip();\n}\n\nexport function unclipArea(ctx: CanvasRenderingContext2D) {\n  ctx.restore();\n}\n\n/**\n * @private\n */\nexport function _steppedLineTo(\n  ctx: CanvasRenderingContext2D,\n  previous: Point,\n  target: Point,\n  flip?: boolean,\n  mode?: string\n) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n  if (mode === 'middle') {\n    const midpoint = (previous.x + target.x) / 2.0;\n    ctx.lineTo(midpoint, previous.y);\n    ctx.lineTo(midpoint, target.y);\n  } else if (mode === 'after' !== !!flip) {\n    ctx.lineTo(previous.x, target.y);\n  } else {\n    ctx.lineTo(target.x, previous.y);\n  }\n  ctx.lineTo(target.x, target.y);\n}\n\n/**\n * @private\n */\nexport function _bezierCurveTo(\n  ctx: CanvasRenderingContext2D,\n  previous: SplinePoint,\n  target: SplinePoint,\n  flip?: boolean\n) {\n  if (!previous) {\n    return ctx.lineTo(target.x, target.y);\n  }\n  ctx.bezierCurveTo(\n    flip ? previous.cp1x : previous.cp2x,\n    flip ? previous.cp1y : previous.cp2y,\n    flip ? target.cp2x : target.cp1x,\n    flip ? target.cp2y : target.cp1y,\n    target.x,\n    target.y);\n}\n\nfunction setRenderOpts(ctx: CanvasRenderingContext2D, opts: RenderTextOpts) {\n  if (opts.translation) {\n    ctx.translate(opts.translation[0], opts.translation[1]);\n  }\n\n  if (!isNullOrUndef(opts.rotation)) {\n    ctx.rotate(opts.rotation);\n  }\n\n  if (opts.color) {\n    ctx.fillStyle = opts.color;\n  }\n\n  if (opts.textAlign) {\n    ctx.textAlign = opts.textAlign;\n  }\n\n  if (opts.textBaseline) {\n    ctx.textBaseline = opts.textBaseline;\n  }\n}\n\nfunction decorateText(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  line: string,\n  opts: RenderTextOpts\n) {\n  if (opts.strikethrough || opts.underline) {\n    /**\n     * Now that IE11 support has been dropped, we can use more\n     * of the TextMetrics object. The actual bounding boxes\n     * are unflagged in Chrome, Firefox, Edge, and Safari so they\n     * can be safely used.\n     * See https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics#Browser_compatibility\n     */\n    const metrics = ctx.measureText(line);\n    const left = x - metrics.actualBoundingBoxLeft;\n    const right = x + metrics.actualBoundingBoxRight;\n    const top = y - metrics.actualBoundingBoxAscent;\n    const bottom = y + metrics.actualBoundingBoxDescent;\n    const yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;\n\n    ctx.strokeStyle = ctx.fillStyle;\n    ctx.beginPath();\n    ctx.lineWidth = opts.decorationWidth || 2;\n    ctx.moveTo(left, yDecoration);\n    ctx.lineTo(right, yDecoration);\n    ctx.stroke();\n  }\n}\n\nfunction drawBackdrop(ctx: CanvasRenderingContext2D, opts: BackdropOptions) {\n  const oldColor = ctx.fillStyle;\n\n  ctx.fillStyle = opts.color as string;\n  ctx.fillRect(opts.left, opts.top, opts.width, opts.height);\n  ctx.fillStyle = oldColor;\n}\n\n/**\n * Render text onto the canvas\n */\nexport function renderText(\n  ctx: CanvasRenderingContext2D,\n  text: string | string[],\n  x: number,\n  y: number,\n  font: CanvasFontSpec,\n  opts: RenderTextOpts = {}\n) {\n  const lines = isArray(text) ? text : [text];\n  const stroke = opts.strokeWidth > 0 && opts.strokeColor !== '';\n  let i: number, line: string;\n\n  ctx.save();\n  ctx.font = font.string;\n  setRenderOpts(ctx, opts);\n\n  for (i = 0; i < lines.length; ++i) {\n    line = lines[i];\n\n    if (opts.backdrop) {\n      drawBackdrop(ctx, opts.backdrop);\n    }\n\n    if (stroke) {\n      if (opts.strokeColor) {\n        ctx.strokeStyle = opts.strokeColor;\n      }\n\n      if (!isNullOrUndef(opts.strokeWidth)) {\n        ctx.lineWidth = opts.strokeWidth;\n      }\n\n      ctx.strokeText(line, x, y, opts.maxWidth);\n    }\n\n    ctx.fillText(line, x, y, opts.maxWidth);\n    decorateText(ctx, x, y, line, opts);\n\n    y += Number(font.lineHeight);\n  }\n\n  ctx.restore();\n}\n\n/**\n * Add a path of a rectangle with rounded corners to the current sub-path\n * @param ctx - Context\n * @param rect - Bounding rect\n */\nexport function addRoundedRectPath(\n  ctx: CanvasRenderingContext2D,\n  rect: RoundedRect & { radius: TRBLCorners }\n) {\n  const {x, y, w, h, radius} = rect;\n\n  // top left arc\n  ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, 1.5 * PI, PI, true);\n\n  // line from top left to bottom left\n  ctx.lineTo(x, y + h - radius.bottomLeft);\n\n  // bottom left arc\n  ctx.arc(x + radius.bottomLeft, y + h - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true);\n\n  // line from bottom left to bottom right\n  ctx.lineTo(x + w - radius.bottomRight, y + h);\n\n  // bottom right arc\n  ctx.arc(x + w - radius.bottomRight, y + h - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true);\n\n  // line from bottom right to top right\n  ctx.lineTo(x + w, y + radius.topRight);\n\n  // top right arc\n  ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true);\n\n  // line from top right to top left\n  ctx.lineTo(x + radius.topLeft, y);\n}\n","import defaults from '../core/core.defaults.js';\nimport {isArray, isObject, toDimension, valueOrDefault} from './helpers.core.js';\nimport {toFontString} from './helpers.canvas.js';\nimport type {ChartArea, FontSpec, Point} from '../types/index.js';\nimport type {TRBL, TRBLCorners} from '../types/geometric.js';\n\nconst LINE_HEIGHT = /^(normal|(\\d+(?:\\.\\d+)?)(px|em|%)?)$/;\nconst FONT_STYLE = /^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;\n\n/**\n * @alias Chart.helpers.options\n * @namespace\n */\n/**\n * Converts the given line height `value` in pixels for a specific font `size`.\n * @param value - The lineHeight to parse (eg. 1.6, '14px', '75%', '1.6em').\n * @param size - The font size (in pixels) used to resolve relative `value`.\n * @returns The effective line height in pixels (size * 1.2 if value is invalid).\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height\n * @since 2.7.0\n */\nexport function toLineHeight(value: number | string, size: number): number {\n  const matches = ('' + value).match(LINE_HEIGHT);\n  if (!matches || matches[1] === 'normal') {\n    return size * 1.2;\n  }\n\n  value = +matches[2];\n\n  switch (matches[3]) {\n    case 'px':\n      return value;\n    case '%':\n      value /= 100;\n      break;\n    default:\n      break;\n  }\n\n  return size * value;\n}\n\nconst numberOrZero = (v: unknown) => +v || 0;\n\n/**\n * @param value\n * @param props\n */\nexport function _readValueToProps<K extends string>(value: number | Record<K, number>, props: K[]): Record<K, number>;\nexport function _readValueToProps<K extends string, T extends string>(value: number | Record<K & T, number>, props: Record<T, K>): Record<T, number>;\nexport function _readValueToProps(value: number | Record<string, number>, props: string[] | Record<string, string>) {\n  const ret = {};\n  const objProps = isObject(props);\n  const keys = objProps ? Object.keys(props) : props;\n  const read = isObject(value)\n    ? objProps\n      ? prop => valueOrDefault(value[prop], value[props[prop]])\n      : prop => value[prop]\n    : () => value;\n\n  for (const prop of keys) {\n    ret[prop] = numberOrZero(read(prop));\n  }\n  return ret;\n}\n\n/**\n * Converts the given value into a TRBL object.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left)\n * @since 3.0.0\n */\nexport function toTRBL(value: number | TRBL | Point) {\n  return _readValueToProps(value, {top: 'y', right: 'x', bottom: 'y', left: 'x'});\n}\n\n/**\n * Converts the given value into a TRBL corners object (similar with css border-radius).\n * @param value - If a number, set the value to all TRBL corner components,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n * @returns The TRBL corner values (topLeft, topRight, bottomLeft, bottomRight)\n * @since 3.0.0\n */\nexport function toTRBLCorners(value: number | TRBLCorners) {\n  return _readValueToProps(value, ['topLeft', 'topRight', 'bottomLeft', 'bottomRight']);\n}\n\n/**\n * Converts the given value into a padding object with pre-computed width/height.\n * @param value - If a number, set the value to all TRBL component,\n *  else, if an object, use defined properties and sets undefined ones to 0.\n *  x / y are shorthands for same value for left/right and top/bottom.\n * @returns The padding values (top, right, bottom, left, width, height)\n * @since 2.7.0\n */\nexport function toPadding(value?: number | TRBL): ChartArea {\n  const obj = toTRBL(value) as ChartArea;\n\n  obj.width = obj.left + obj.right;\n  obj.height = obj.top + obj.bottom;\n\n  return obj;\n}\n\n/**\n * Parses font options and returns the font object.\n * @param options - A object that contains font options to be parsed.\n * @param fallback - A object that contains fallback font options.\n * @return The font object.\n * @private\n */\n\nexport function toFont(options: Partial<FontSpec>, fallback?: Partial<FontSpec>) {\n  options = options || {};\n  fallback = fallback || defaults.font as FontSpec;\n\n  let size = valueOrDefault(options.size, fallback.size);\n\n  if (typeof size === 'string') {\n    size = parseInt(size, 10);\n  }\n  let style = valueOrDefault(options.style, fallback.style);\n  if (style && !('' + style).match(FONT_STYLE)) {\n    console.warn('Invalid font style specified: \"' + style + '\"');\n    style = undefined;\n  }\n\n  const font = {\n    family: valueOrDefault(options.family, fallback.family),\n    lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),\n    size,\n    style,\n    weight: valueOrDefault(options.weight, fallback.weight),\n    string: ''\n  };\n\n  font.string = toFontString(font);\n  return font;\n}\n\n/**\n * Evaluates the given `inputs` sequentially and returns the first defined value.\n * @param inputs - An array of values, falling back to the last value.\n * @param context - If defined and the current value is a function, the value\n * is called with `context` as first argument and the result becomes the new input.\n * @param index - If defined and the current value is an array, the value\n * at `index` become the new input.\n * @param info - object to return information about resolution in\n * @param info.cacheable - Will be set to `false` if option is not cacheable.\n * @since 2.7.0\n */\nexport function resolve(inputs: Array<unknown>, context?: object, index?: number, info?: { cacheable: boolean }) {\n  let cacheable = true;\n  let i: number, ilen: number, value: unknown;\n\n  for (i = 0, ilen = inputs.length; i < ilen; ++i) {\n    value = inputs[i];\n    if (value === undefined) {\n      continue;\n    }\n    if (context !== undefined && typeof value === 'function') {\n      value = value(context);\n      cacheable = false;\n    }\n    if (index !== undefined && isArray(value)) {\n      value = value[index % value.length];\n      cacheable = false;\n    }\n    if (value !== undefined) {\n      if (info && !cacheable) {\n        info.cacheable = false;\n      }\n      return value;\n    }\n  }\n}\n\n/**\n * @param minmax\n * @param grace\n * @param beginAtZero\n * @private\n */\nexport function _addGrace(minmax: { min: number; max: number; }, grace: number | string, beginAtZero: boolean) {\n  const {min, max} = minmax;\n  const change = toDimension(grace, (max - min) / 2);\n  const keepZero = (value: number, add: number) => beginAtZero && value === 0 ? 0 : value + add;\n  return {\n    min: keepZero(min, -Math.abs(change)),\n    max: keepZero(max, change)\n  };\n}\n\n/**\n * Create a context inheriting parentContext\n * @param parentContext\n * @param context\n * @returns\n */\nexport function createContext<T extends object>(parentContext: null, context: T): T;\nexport function createContext<T extends object, P extends T>(parentContext: P, context: T): P & T;\nexport function createContext(parentContext: object, context: object) {\n  return Object.assign(Object.create(parentContext), context);\n}\n","/* eslint-disable @typescript-eslint/no-use-before-define */\nimport type {AnyObject} from '../types/basic.js';\nimport type {ChartMeta} from '../types/index.js';\nimport type {\n  ResolverObjectKey,\n  ResolverCache,\n  ResolverProxy,\n  DescriptorDefaults,\n  Descriptor,\n  ContextCache,\n  ContextProxy\n} from './helpers.config.types.js';\nimport {isArray, isFunction, isObject, resolveObjectKey, _capitalize} from './helpers.core.js';\n\nexport * from './helpers.config.types.js';\n\n/**\n * Creates a Proxy for resolving raw values for options.\n * @param scopes - The option scopes to look for values, in resolution order\n * @param prefixes - The prefixes for values, in resolution order.\n * @param rootScopes - The root option scopes\n * @param fallback - Parent scopes fallback\n * @param getTarget - callback for getting the target for changed values\n * @returns Proxy\n * @private\n */\nexport function _createResolver<\n  T extends AnyObject[] = AnyObject[],\n  R extends AnyObject[] = T\n>(\n  scopes: T,\n  prefixes = [''],\n  rootScopes?: R,\n  fallback?: ResolverObjectKey,\n  getTarget = () => scopes[0]\n) {\n  const finalRootScopes = rootScopes || scopes;\n  if (typeof fallback === 'undefined') {\n    fallback = _resolve('_fallback', scopes);\n  }\n  const cache: ResolverCache<T, R> = {\n    [Symbol.toStringTag]: 'Object',\n    _cacheable: true,\n    _scopes: scopes,\n    _rootScopes: finalRootScopes,\n    _fallback: fallback,\n    _getTarget: getTarget,\n    override: (scope: AnyObject) => _createResolver([scope, ...scopes], prefixes, finalRootScopes, fallback),\n  };\n  return new Proxy(cache, {\n    /**\n     * A trap for the delete operator.\n     */\n    deleteProperty(target, prop: string) {\n      delete target[prop]; // remove from cache\n      delete target._keys; // remove cached keys\n      delete scopes[0][prop]; // remove from top level scope\n      return true;\n    },\n\n    /**\n     * A trap for getting property values.\n     */\n    get(target, prop: string) {\n      return _cached(target, prop,\n        () => _resolveWithPrefixes(prop, prefixes, scopes, target));\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */\n    getOwnPropertyDescriptor(target, prop) {\n      return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);\n    },\n\n    /**\n     * A trap for Object.getPrototypeOf.\n     */\n    getPrototypeOf() {\n      return Reflect.getPrototypeOf(scopes[0]);\n    },\n\n    /**\n     * A trap for the in operator.\n     */\n    has(target, prop: string) {\n      return getKeysFromAllScopes(target).includes(prop);\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */\n    ownKeys(target) {\n      return getKeysFromAllScopes(target);\n    },\n\n    /**\n     * A trap for setting property values.\n     */\n    set(target, prop: string, value) {\n      const storage = target._storage || (target._storage = getTarget());\n      target[prop] = storage[prop] = value; // set to top level scope + cache\n      delete target._keys; // remove cached keys\n      return true;\n    }\n  }) as ResolverProxy<T, R>;\n}\n\n/**\n * Returns an Proxy for resolving option values with context.\n * @param proxy - The Proxy returned by `_createResolver`\n * @param context - Context object for scriptable/indexable options\n * @param subProxy - The proxy provided for scriptable options\n * @param descriptorDefaults - Defaults for descriptors\n * @private\n */\nexport function _attachContext<\n  T extends AnyObject[] = AnyObject[],\n  R extends AnyObject[] = T\n>(\n  proxy: ResolverProxy<T, R>,\n  context: AnyObject,\n  subProxy?: ResolverProxy<T, R>,\n  descriptorDefaults?: DescriptorDefaults\n) {\n  const cache: ContextCache<T, R> = {\n    _cacheable: false,\n    _proxy: proxy,\n    _context: context,\n    _subProxy: subProxy,\n    _stack: new Set(),\n    _descriptors: _descriptors(proxy, descriptorDefaults),\n    setContext: (ctx: AnyObject) => _attachContext(proxy, ctx, subProxy, descriptorDefaults),\n    override: (scope: AnyObject) => _attachContext(proxy.override(scope), context, subProxy, descriptorDefaults)\n  };\n  return new Proxy(cache, {\n    /**\n     * A trap for the delete operator.\n     */\n    deleteProperty(target, prop) {\n      delete target[prop]; // remove from cache\n      delete proxy[prop]; // remove from proxy\n      return true;\n    },\n\n    /**\n     * A trap for getting property values.\n     */\n    get(target, prop: string, receiver) {\n      return _cached(target, prop,\n        () => _resolveWithContext(target, prop, receiver));\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyDescriptor.\n     * Also used by Object.hasOwnProperty.\n     */\n    getOwnPropertyDescriptor(target, prop) {\n      return target._descriptors.allKeys\n        ? Reflect.has(proxy, prop) ? {enumerable: true, configurable: true} : undefined\n        : Reflect.getOwnPropertyDescriptor(proxy, prop);\n    },\n\n    /**\n     * A trap for Object.getPrototypeOf.\n     */\n    getPrototypeOf() {\n      return Reflect.getPrototypeOf(proxy);\n    },\n\n    /**\n     * A trap for the in operator.\n     */\n    has(target, prop) {\n      return Reflect.has(proxy, prop);\n    },\n\n    /**\n     * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.\n     */\n    ownKeys() {\n      return Reflect.ownKeys(proxy);\n    },\n\n    /**\n     * A trap for setting property values.\n     */\n    set(target, prop, value) {\n      proxy[prop] = value; // set to proxy\n      delete target[prop]; // remove from cache\n      return true;\n    }\n  }) as ContextProxy<T, R>;\n}\n\n/**\n * @private\n */\nexport function _descriptors(\n  proxy: ResolverCache,\n  defaults: DescriptorDefaults = {scriptable: true, indexable: true}\n): Descriptor {\n  const {_scriptable = defaults.scriptable, _indexable = defaults.indexable, _allKeys = defaults.allKeys} = proxy;\n  return {\n    allKeys: _allKeys,\n    scriptable: _scriptable,\n    indexable: _indexable,\n    isScriptable: isFunction(_scriptable) ? _scriptable : () => _scriptable,\n    isIndexable: isFunction(_indexable) ? _indexable : () => _indexable\n  };\n}\n\nconst readKey = (prefix: string, name: string) => prefix ? prefix + _capitalize(name) : name;\nconst needsSubResolver = (prop: string, value: unknown) => isObject(value) && prop !== 'adapters' &&\n  (Object.getPrototypeOf(value) === null || value.constructor === Object);\n\nfunction _cached(\n  target: AnyObject,\n  prop: string,\n  resolve: () => unknown\n) {\n  if (Object.prototype.hasOwnProperty.call(target, prop) || prop === 'constructor') {\n    return target[prop];\n  }\n\n  const value = resolve();\n  // cache the resolved value\n  target[prop] = value;\n  return value;\n}\n\nfunction _resolveWithContext(\n  target: ContextCache,\n  prop: string,\n  receiver: AnyObject\n) {\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\n  let value = _proxy[prop]; // resolve from proxy\n\n  // resolve with context\n  if (isFunction(value) && descriptors.isScriptable(prop)) {\n    value = _resolveScriptable(prop, value, target, receiver);\n  }\n  if (isArray(value) && value.length) {\n    value = _resolveArray(prop, value, target, descriptors.isIndexable);\n  }\n  if (needsSubResolver(prop, value)) {\n    // if the resolved value is an object, create a sub resolver for it\n    value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors);\n  }\n  return value;\n}\n\nfunction _resolveScriptable(\n  prop: string,\n  getValue: (ctx: AnyObject, sub: AnyObject) => unknown,\n  target: ContextCache,\n  receiver: AnyObject\n) {\n  const {_proxy, _context, _subProxy, _stack} = target;\n  if (_stack.has(prop)) {\n    throw new Error('Recursion detected: ' + Array.from(_stack).join('->') + '->' + prop);\n  }\n  _stack.add(prop);\n  let value = getValue(_context, _subProxy || receiver);\n  _stack.delete(prop);\n  if (needsSubResolver(prop, value)) {\n    // When scriptable option returns an object, create a resolver on that.\n    value = createSubResolver(_proxy._scopes, _proxy, prop, value);\n  }\n  return value;\n}\n\nfunction _resolveArray(\n  prop: string,\n  value: unknown[],\n  target: ContextCache,\n  isIndexable: (key: string) => boolean\n) {\n  const {_proxy, _context, _subProxy, _descriptors: descriptors} = target;\n\n  if (typeof _context.index !== 'undefined' && isIndexable(prop)) {\n    return value[_context.index % value.length];\n  } else if (isObject(value[0])) {\n    // Array of objects, return array or resolvers\n    const arr = value;\n    const scopes = _proxy._scopes.filter(s => s !== arr);\n    value = [];\n    for (const item of arr) {\n      const resolver = createSubResolver(scopes, _proxy, prop, item);\n      value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors));\n    }\n  }\n  return value;\n}\n\nfunction resolveFallback(\n  fallback: ResolverObjectKey | ((prop: ResolverObjectKey, value: unknown) => ResolverObjectKey),\n  prop: ResolverObjectKey,\n  value: unknown\n) {\n  return isFunction(fallback) ? fallback(prop, value) : fallback;\n}\n\nconst getScope = (key: ResolverObjectKey, parent: AnyObject) => key === true ? parent\n  : typeof key === 'string' ? resolveObjectKey(parent, key) : undefined;\n\nfunction addScopes(\n  set: Set<AnyObject>,\n  parentScopes: AnyObject[],\n  key: ResolverObjectKey,\n  parentFallback: ResolverObjectKey,\n  value: unknown\n) {\n  for (const parent of parentScopes) {\n    const scope = getScope(key, parent);\n    if (scope) {\n      set.add(scope);\n      const fallback = resolveFallback(scope._fallback, key, value);\n      if (typeof fallback !== 'undefined' && fallback !== key && fallback !== parentFallback) {\n        // When we reach the descriptor that defines a new _fallback, return that.\n        // The fallback will resume to that new scope.\n        return fallback;\n      }\n    } else if (scope === false && typeof parentFallback !== 'undefined' && key !== parentFallback) {\n      // Fallback to `false` results to `false`, when falling back to different key.\n      // For example `interaction` from `hover` or `plugins.tooltip` and `animation` from `animations`\n      return null;\n    }\n  }\n  return false;\n}\n\nfunction createSubResolver(\n  parentScopes: AnyObject[],\n  resolver: ResolverCache,\n  prop: ResolverObjectKey,\n  value: unknown\n) {\n  const rootScopes = resolver._rootScopes;\n  const fallback = resolveFallback(resolver._fallback, prop, value);\n  const allScopes = [...parentScopes, ...rootScopes];\n  const set = new Set<AnyObject>();\n  set.add(value);\n  let key = addScopesFromKey(set, allScopes, prop, fallback || prop, value);\n  if (key === null) {\n    return false;\n  }\n  if (typeof fallback !== 'undefined' && fallback !== prop) {\n    key = addScopesFromKey(set, allScopes, fallback, key, value);\n    if (key === null) {\n      return false;\n    }\n  }\n  return _createResolver(Array.from(set), [''], rootScopes, fallback,\n    () => subGetTarget(resolver, prop as string, value));\n}\n\nfunction addScopesFromKey(\n  set: Set<AnyObject>,\n  allScopes: AnyObject[],\n  key: ResolverObjectKey,\n  fallback: ResolverObjectKey,\n  item: unknown\n) {\n  while (key) {\n    key = addScopes(set, allScopes, key, fallback, item);\n  }\n  return key;\n}\n\nfunction subGetTarget(\n  resolver: ResolverCache,\n  prop: string,\n  value: unknown\n) {\n  const parent = resolver._getTarget();\n  if (!(prop in parent)) {\n    parent[prop] = {};\n  }\n  const target = parent[prop];\n  if (isArray(target) && isObject(value)) {\n    // For array of objects, the object is used to store updated values\n    return value;\n  }\n  return target || {};\n}\n\nfunction _resolveWithPrefixes(\n  prop: string,\n  prefixes: string[],\n  scopes: AnyObject[],\n  proxy: ResolverProxy\n) {\n  let value: unknown;\n  for (const prefix of prefixes) {\n    value = _resolve(readKey(prefix, prop), scopes);\n    if (typeof value !== 'undefined') {\n      return needsSubResolver(prop, value)\n        ? createSubResolver(scopes, proxy, prop, value)\n        : value;\n    }\n  }\n}\n\nfunction _resolve(key: string, scopes: AnyObject[]) {\n  for (const scope of scopes) {\n    if (!scope) {\n      continue;\n    }\n    const value = scope[key];\n    if (typeof value !== 'undefined') {\n      return value;\n    }\n  }\n}\n\nfunction getKeysFromAllScopes(target: ResolverCache) {\n  let keys = target._keys;\n  if (!keys) {\n    keys = target._keys = resolveKeysFromAllScopes(target._scopes);\n  }\n  return keys;\n}\n\nfunction resolveKeysFromAllScopes(scopes: AnyObject[]) {\n  const set = new Set<string>();\n  for (const scope of scopes) {\n    for (const key of Object.keys(scope).filter(k => !k.startsWith('_'))) {\n      set.add(key);\n    }\n  }\n  return Array.from(set);\n}\n\nexport function _parseObjectDataRadialScale(\n  meta: ChartMeta<'line' | 'scatter'>,\n  data: AnyObject[],\n  start: number,\n  count: number\n) {\n  const {iScale} = meta;\n  const {key = 'r'} = this._parsing;\n  const parsed = new Array<{r: unknown}>(count);\n  let i: number, ilen: number, index: number, item: AnyObject;\n\n  for (i = 0, ilen = count; i < ilen; ++i) {\n    index = i + start;\n    item = data[index];\n    parsed[i] = {\n      r: iScale.parse(resolveObjectKey(item, key), index)\n    };\n  }\n  return parsed;\n}\n","import {almostEquals, distanceBetweenPoints, sign} from './helpers.math.js';\nimport {_isPointInArea} from './helpers.canvas.js';\nimport type {ChartArea} from '../types/index.js';\nimport type {SplinePoint} from '../types/geometric.js';\n\nconst EPSILON = Number.EPSILON || 1e-14;\n\ntype OptionalSplinePoint = SplinePoint | false\nconst getPoint = (points: SplinePoint[], i: number): OptionalSplinePoint => i < points.length && !points[i].skip && points[i];\nconst getValueAxis = (indexAxis: 'x' | 'y') => indexAxis === 'x' ? 'y' : 'x';\n\nexport function splineCurve(\n  firstPoint: SplinePoint,\n  middlePoint: SplinePoint,\n  afterPoint: SplinePoint,\n  t: number\n): {\n    previous: SplinePoint\n    next: SplinePoint\n  } {\n  // Props to Rob Spencer at scaled innovation for his post on splining between points\n  // http://scaledinnovation.com/analytics/splines/aboutSplines.html\n\n  // This function must also respect \"skipped\" points\n\n  const previous = firstPoint.skip ? middlePoint : firstPoint;\n  const current = middlePoint;\n  const next = afterPoint.skip ? middlePoint : afterPoint;\n  const d01 = distanceBetweenPoints(current, previous);\n  const d12 = distanceBetweenPoints(next, current);\n\n  let s01 = d01 / (d01 + d12);\n  let s12 = d12 / (d01 + d12);\n\n  // If all points are the same, s01 & s02 will be inf\n  s01 = isNaN(s01) ? 0 : s01;\n  s12 = isNaN(s12) ? 0 : s12;\n\n  const fa = t * s01; // scaling factor for triangle Ta\n  const fb = t * s12;\n\n  return {\n    previous: {\n      x: current.x - fa * (next.x - previous.x),\n      y: current.y - fa * (next.y - previous.y)\n    },\n    next: {\n      x: current.x + fb * (next.x - previous.x),\n      y: current.y + fb * (next.y - previous.y)\n    }\n  };\n}\n\n/**\n * Adjust tangents to ensure monotonic properties\n */\nfunction monotoneAdjust(points: SplinePoint[], deltaK: number[], mK: number[]) {\n  const pointsLen = points.length;\n\n  let alphaK: number, betaK: number, tauK: number, squaredMagnitude: number, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n  for (let i = 0; i < pointsLen - 1; ++i) {\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent || !pointAfter) {\n      continue;\n    }\n\n    if (almostEquals(deltaK[i], 0, EPSILON)) {\n      mK[i] = mK[i + 1] = 0;\n      continue;\n    }\n\n    alphaK = mK[i] / deltaK[i];\n    betaK = mK[i + 1] / deltaK[i];\n    squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);\n    if (squaredMagnitude <= 9) {\n      continue;\n    }\n\n    tauK = 3 / Math.sqrt(squaredMagnitude);\n    mK[i] = alphaK * tauK * deltaK[i];\n    mK[i + 1] = betaK * tauK * deltaK[i];\n  }\n}\n\nfunction monotoneCompute(points: SplinePoint[], mK: number[], indexAxis: 'x' | 'y' = 'x') {\n  const valueAxis = getValueAxis(indexAxis);\n  const pointsLen = points.length;\n  let delta: number, pointBefore: OptionalSplinePoint, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n\n  for (let i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent) {\n      continue;\n    }\n\n    const iPixel = pointCurrent[indexAxis];\n    const vPixel = pointCurrent[valueAxis];\n    if (pointBefore) {\n      delta = (iPixel - pointBefore[indexAxis]) / 3;\n      pointCurrent[`cp1${indexAxis}`] = iPixel - delta;\n      pointCurrent[`cp1${valueAxis}`] = vPixel - delta * mK[i];\n    }\n    if (pointAfter) {\n      delta = (pointAfter[indexAxis] - iPixel) / 3;\n      pointCurrent[`cp2${indexAxis}`] = iPixel + delta;\n      pointCurrent[`cp2${valueAxis}`] = vPixel + delta * mK[i];\n    }\n  }\n}\n\n/**\n * This function calculates Bézier control points in a similar way than |splineCurve|,\n * but preserves monotonicity of the provided data and ensures no local extremums are added\n * between the dataset discrete points due to the interpolation.\n * See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation\n */\nexport function splineCurveMonotone(points: SplinePoint[], indexAxis: 'x' | 'y' = 'x') {\n  const valueAxis = getValueAxis(indexAxis);\n  const pointsLen = points.length;\n  const deltaK: number[] = Array(pointsLen).fill(0);\n  const mK: number[] = Array(pointsLen);\n\n  // Calculate slopes (deltaK) and initialize tangents (mK)\n  let i, pointBefore: OptionalSplinePoint, pointCurrent: OptionalSplinePoint;\n  let pointAfter = getPoint(points, 0);\n\n  for (i = 0; i < pointsLen; ++i) {\n    pointBefore = pointCurrent;\n    pointCurrent = pointAfter;\n    pointAfter = getPoint(points, i + 1);\n    if (!pointCurrent) {\n      continue;\n    }\n\n    if (pointAfter) {\n      const slopeDelta = pointAfter[indexAxis] - pointCurrent[indexAxis];\n\n      // In the case of two points that appear at the same x pixel, slopeDeltaX is 0\n      deltaK[i] = slopeDelta !== 0 ? (pointAfter[valueAxis] - pointCurrent[valueAxis]) / slopeDelta : 0;\n    }\n    mK[i] = !pointBefore ? deltaK[i]\n      : !pointAfter ? deltaK[i - 1]\n        : (sign(deltaK[i - 1]) !== sign(deltaK[i])) ? 0\n          : (deltaK[i - 1] + deltaK[i]) / 2;\n  }\n\n  monotoneAdjust(points, deltaK, mK);\n\n  monotoneCompute(points, mK, indexAxis);\n}\n\nfunction capControlPoint(pt: number, min: number, max: number) {\n  return Math.max(Math.min(pt, max), min);\n}\n\nfunction capBezierPoints(points: SplinePoint[], area: ChartArea) {\n  let i, ilen, point, inArea, inAreaPrev;\n  let inAreaNext = _isPointInArea(points[0], area);\n  for (i = 0, ilen = points.length; i < ilen; ++i) {\n    inAreaPrev = inArea;\n    inArea = inAreaNext;\n    inAreaNext = i < ilen - 1 && _isPointInArea(points[i + 1], area);\n    if (!inArea) {\n      continue;\n    }\n    point = points[i];\n    if (inAreaPrev) {\n      point.cp1x = capControlPoint(point.cp1x, area.left, area.right);\n      point.cp1y = capControlPoint(point.cp1y, area.top, area.bottom);\n    }\n    if (inAreaNext) {\n      point.cp2x = capControlPoint(point.cp2x, area.left, area.right);\n      point.cp2y = capControlPoint(point.cp2y, area.top, area.bottom);\n    }\n  }\n}\n\n/**\n * @private\n */\nexport function _updateBezierControlPoints(\n  points: SplinePoint[],\n  options,\n  area: ChartArea,\n  loop: boolean,\n  indexAxis: 'x' | 'y'\n) {\n  let i: number, ilen: number, point: SplinePoint, controlPoints: ReturnType<typeof splineCurve>;\n\n  // Only consider points that are drawn in case the spanGaps option is used\n  if (options.spanGaps) {\n    points = points.filter((pt) => !pt.skip);\n  }\n\n  if (options.cubicInterpolationMode === 'monotone') {\n    splineCurveMonotone(points, indexAxis);\n  } else {\n    let prev = loop ? points[points.length - 1] : points[0];\n    for (i = 0, ilen = points.length; i < ilen; ++i) {\n      point = points[i];\n      controlPoints = splineCurve(\n        prev,\n        point,\n        points[Math.min(i + 1, ilen - (loop ? 0 : 1)) % ilen],\n        options.tension\n      );\n      point.cp1x = controlPoints.previous.x;\n      point.cp1y = controlPoints.previous.y;\n      point.cp2x = controlPoints.next.x;\n      point.cp2y = controlPoints.next.y;\n      prev = point;\n    }\n  }\n\n  if (options.capBezierPoints) {\n    capBezierPoints(points, area);\n  }\n}\n","import type {ChartArea, Scale} from '../types/index.js';\nimport type PrivateChart from '../core/core.controller.js';\nimport type {Chart, ChartEvent} from '../types.js';\nimport {INFINITY} from './helpers.math.js';\n\n/**\n * @private\n */\nexport function _isDomSupported(): boolean {\n  return typeof window !== 'undefined' && typeof document !== 'undefined';\n}\n\n/**\n * @private\n */\nexport function _getParentNode(domNode: HTMLCanvasElement): HTMLCanvasElement {\n  let parent = domNode.parentNode;\n  if (parent && parent.toString() === '[object ShadowRoot]') {\n    parent = (parent as ShadowRoot).host;\n  }\n  return parent as HTMLCanvasElement;\n}\n\n/**\n * convert max-width/max-height values that may be percentages into a number\n * @private\n */\n\nfunction parseMaxStyle(styleValue: string | number, node: HTMLElement, parentProperty: string) {\n  let valueInPixels: number;\n  if (typeof styleValue === 'string') {\n    valueInPixels = parseInt(styleValue, 10);\n\n    if (styleValue.indexOf('%') !== -1) {\n      // percentage * size in dimension\n      valueInPixels = (valueInPixels / 100) * node.parentNode[parentProperty];\n    }\n  } else {\n    valueInPixels = styleValue;\n  }\n\n  return valueInPixels;\n}\n\nconst getComputedStyle = (element: HTMLElement): CSSStyleDeclaration =>\n  element.ownerDocument.defaultView.getComputedStyle(element, null);\n\nexport function getStyle(el: HTMLElement, property: string): string {\n  return getComputedStyle(el).getPropertyValue(property);\n}\n\nconst positions = ['top', 'right', 'bottom', 'left'];\nfunction getPositionedStyle(styles: CSSStyleDeclaration, style: string, suffix?: string): ChartArea {\n  const result = {} as ChartArea;\n  suffix = suffix ? '-' + suffix : '';\n  for (let i = 0; i < 4; i++) {\n    const pos = positions[i];\n    result[pos] = parseFloat(styles[style + '-' + pos + suffix]) || 0;\n  }\n  result.width = result.left + result.right;\n  result.height = result.top + result.bottom;\n  return result;\n}\n\nconst useOffsetPos = (x: number, y: number, target: HTMLElement | EventTarget) =>\n  (x > 0 || y > 0) && (!target || !(target as HTMLElement).shadowRoot);\n\n/**\n * @param e\n * @param canvas\n * @returns Canvas position\n */\nfunction getCanvasPosition(\n  e: Event | TouchEvent | MouseEvent,\n  canvas: HTMLCanvasElement\n): {\n    x: number;\n    y: number;\n    box: boolean;\n  } {\n  const touches = (e as TouchEvent).touches;\n  const source = (touches && touches.length ? touches[0] : e) as MouseEvent;\n  const {offsetX, offsetY} = source as MouseEvent;\n  let box = false;\n  let x, y;\n  if (useOffsetPos(offsetX, offsetY, e.target)) {\n    x = offsetX;\n    y = offsetY;\n  } else {\n    const rect = canvas.getBoundingClientRect();\n    x = source.clientX - rect.left;\n    y = source.clientY - rect.top;\n    box = true;\n  }\n  return {x, y, box};\n}\n\n/**\n * Gets an event's x, y coordinates, relative to the chart area\n * @param event\n * @param chart\n * @returns x and y coordinates of the event\n */\n\nexport function getRelativePosition(\n  event: Event | ChartEvent | TouchEvent | MouseEvent,\n  chart: Chart | PrivateChart\n): { x: number; y: number } {\n  if ('native' in event) {\n    return event;\n  }\n\n  const {canvas, currentDevicePixelRatio} = chart;\n  const style = getComputedStyle(canvas);\n  const borderBox = style.boxSizing === 'border-box';\n  const paddings = getPositionedStyle(style, 'padding');\n  const borders = getPositionedStyle(style, 'border', 'width');\n  const {x, y, box} = getCanvasPosition(event, canvas);\n  const xOffset = paddings.left + (box && borders.left);\n  const yOffset = paddings.top + (box && borders.top);\n\n  let {width, height} = chart;\n  if (borderBox) {\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n  return {\n    x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),\n    y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)\n  };\n}\n\nfunction getContainerSize(canvas: HTMLCanvasElement, width: number, height: number): Partial<Scale> {\n  let maxWidth: number, maxHeight: number;\n\n  if (width === undefined || height === undefined) {\n    const container = canvas && _getParentNode(canvas);\n    if (!container) {\n      width = canvas.clientWidth;\n      height = canvas.clientHeight;\n    } else {\n      const rect = container.getBoundingClientRect(); // this is the border box of the container\n      const containerStyle = getComputedStyle(container);\n      const containerBorder = getPositionedStyle(containerStyle, 'border', 'width');\n      const containerPadding = getPositionedStyle(containerStyle, 'padding');\n      width = rect.width - containerPadding.width - containerBorder.width;\n      height = rect.height - containerPadding.height - containerBorder.height;\n      maxWidth = parseMaxStyle(containerStyle.maxWidth, container, 'clientWidth');\n      maxHeight = parseMaxStyle(containerStyle.maxHeight, container, 'clientHeight');\n    }\n  }\n  return {\n    width,\n    height,\n    maxWidth: maxWidth || INFINITY,\n    maxHeight: maxHeight || INFINITY\n  };\n}\n\nconst round1 = (v: number) => Math.round(v * 10) / 10;\n\n// eslint-disable-next-line complexity\nexport function getMaximumSize(\n  canvas: HTMLCanvasElement,\n  bbWidth?: number,\n  bbHeight?: number,\n  aspectRatio?: number\n): { width: number; height: number } {\n  const style = getComputedStyle(canvas);\n  const margins = getPositionedStyle(style, 'margin');\n  const maxWidth = parseMaxStyle(style.maxWidth, canvas, 'clientWidth') || INFINITY;\n  const maxHeight = parseMaxStyle(style.maxHeight, canvas, 'clientHeight') || INFINITY;\n  const containerSize = getContainerSize(canvas, bbWidth, bbHeight);\n  let {width, height} = containerSize;\n\n  if (style.boxSizing === 'content-box') {\n    const borders = getPositionedStyle(style, 'border', 'width');\n    const paddings = getPositionedStyle(style, 'padding');\n    width -= paddings.width + borders.width;\n    height -= paddings.height + borders.height;\n  }\n  width = Math.max(0, width - margins.width);\n  height = Math.max(0, aspectRatio ? width / aspectRatio : height - margins.height);\n  width = round1(Math.min(width, maxWidth, containerSize.maxWidth));\n  height = round1(Math.min(height, maxHeight, containerSize.maxHeight));\n  if (width && !height) {\n    // https://github.com/chartjs/Chart.js/issues/4659\n    // If the canvas has width, but no height, default to aspectRatio of 2 (canvas default)\n    height = round1(width / 2);\n  }\n\n  const maintainHeight = bbWidth !== undefined || bbHeight !== undefined;\n\n  if (maintainHeight && aspectRatio && containerSize.height && height > containerSize.height) {\n    height = containerSize.height;\n    width = round1(Math.floor(height * aspectRatio));\n  }\n\n  return {width, height};\n}\n\n/**\n * @param chart\n * @param forceRatio\n * @param forceStyle\n * @returns True if the canvas context size or transformation has changed.\n */\nexport function retinaScale(\n  chart: Chart | PrivateChart,\n  forceRatio: number,\n  forceStyle?: boolean\n): boolean | void {\n  const pixelRatio = forceRatio || 1;\n  const deviceHeight = Math.floor(chart.height * pixelRatio);\n  const deviceWidth = Math.floor(chart.width * pixelRatio);\n\n  (chart as PrivateChart).height = Math.floor(chart.height);\n  (chart as PrivateChart).width = Math.floor(chart.width);\n\n  const canvas = chart.canvas;\n\n  // If no style has been set on the canvas, the render size is used as display size,\n  // making the chart visually bigger, so let's enforce it to the \"correct\" values.\n  // See https://github.com/chartjs/Chart.js/issues/3575\n  if (canvas.style && (forceStyle || (!canvas.style.height && !canvas.style.width))) {\n    canvas.style.height = `${chart.height}px`;\n    canvas.style.width = `${chart.width}px`;\n  }\n\n  if (chart.currentDevicePixelRatio !== pixelRatio\n      || canvas.height !== deviceHeight\n      || canvas.width !== deviceWidth) {\n    (chart as PrivateChart).currentDevicePixelRatio = pixelRatio;\n    canvas.height = deviceHeight;\n    canvas.width = deviceWidth;\n    chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Detects support for options object argument in addEventListener.\n * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support\n * @private\n */\nexport const supportsEventListenerOptions = (function() {\n  let passiveSupported = false;\n  try {\n    const options = {\n      get passive() { // This function will be called when the browser attempts to access the passive property.\n        passiveSupported = true;\n        return false;\n      }\n    } as EventListenerOptions;\n\n    if (_isDomSupported()) {\n      window.addEventListener('test', null, options);\n      window.removeEventListener('test', null, options);\n    }\n  } catch (e) {\n    // continue regardless of error\n  }\n  return passiveSupported;\n}());\n\n/**\n * The \"used\" size is the final value of a dimension property after all calculations have\n * been performed. This method uses the computed style of `element` but returns undefined\n * if the computed style is not expressed in pixels. That can happen in some cases where\n * `element` has a size relative to its parent and this last one is not yet displayed,\n * for example because of `display: none` on a parent node.\n * @see https://developer.mozilla.org/en-US/docs/Web/CSS/used_value\n * @returns Size in pixels or undefined if unknown.\n */\n\nexport function readUsedSize(\n  element: HTMLElement,\n  property: 'width' | 'height'\n): number | undefined {\n  const value = getStyle(element, property);\n  const matches = value && value.match(/^(\\d+)(\\.\\d+)?px$/);\n  return matches ? +matches[1] : undefined;\n}\n","import type {Point, SplinePoint} from '../types/geometric.js';\n\n/**\n * @private\n */\nexport function _pointInLine(p1: Point, p2: Point, t: number, mode?) { // eslint-disable-line @typescript-eslint/no-unused-vars\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: p1.y + t * (p2.y - p1.y)\n  };\n}\n\n/**\n * @private\n */\nexport function _steppedInterpolation(\n  p1: Point,\n  p2: Point,\n  t: number, mode: 'middle' | 'after' | unknown\n) {\n  return {\n    x: p1.x + t * (p2.x - p1.x),\n    y: mode === 'middle' ? t < 0.5 ? p1.y : p2.y\n      : mode === 'after' ? t < 1 ? p1.y : p2.y\n        : t > 0 ? p2.y : p1.y\n  };\n}\n\n/**\n * @private\n */\nexport function _bezierInterpolation(p1: SplinePoint, p2: SplinePoint, t: number, mode?) { // eslint-disable-line @typescript-eslint/no-unused-vars\n  const cp1 = {x: p1.cp2x, y: p1.cp2y};\n  const cp2 = {x: p2.cp1x, y: p2.cp1y};\n  const a = _pointInLine(p1, cp1, t);\n  const b = _pointInLine(cp1, cp2, t);\n  const c = _pointInLine(cp2, p2, t);\n  const d = _pointInLine(a, b, t);\n  const e = _pointInLine(b, c, t);\n  return _pointInLine(d, e, t);\n}\n","export interface RTLAdapter {\n  x(x: number): number;\n  setWidth(w: number): void;\n  textAlign(align: 'center' | 'left' | 'right'): 'center' | 'left' | 'right';\n  xPlus(x: number, value: number): number;\n  leftForLtr(x: number, itemWidth: number): number;\n}\n\nconst getRightToLeftAdapter = function(rectX: number, width: number): RTLAdapter {\n  return {\n    x(x) {\n      return rectX + rectX + width - x;\n    },\n    setWidth(w) {\n      width = w;\n    },\n    textAlign(align) {\n      if (align === 'center') {\n        return align;\n      }\n      return align === 'right' ? 'left' : 'right';\n    },\n    xPlus(x, value) {\n      return x - value;\n    },\n    leftForLtr(x, itemWidth) {\n      return x - itemWidth;\n    },\n  };\n};\n\nconst getLeftToRightAdapter = function(): RTLAdapter {\n  return {\n    x(x) {\n      return x;\n    },\n    setWidth(w) { // eslint-disable-line no-unused-vars\n    },\n    textAlign(align) {\n      return align;\n    },\n    xPlus(x, value) {\n      return x + value;\n    },\n    leftForLtr(x, _itemWidth) { // eslint-disable-line @typescript-eslint/no-unused-vars\n      return x;\n    },\n  };\n};\n\nexport function getRtlAdapter(rtl: boolean, rectX: number, width: number) {\n  return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();\n}\n\nexport function overrideTextDirection(ctx: CanvasRenderingContext2D, direction: 'ltr' | 'rtl') {\n  let style: CSSStyleDeclaration, original: [string, string];\n  if (direction === 'ltr' || direction === 'rtl') {\n    style = ctx.canvas.style;\n    original = [\n      style.getPropertyValue('direction'),\n      style.getPropertyPriority('direction'),\n    ];\n\n    style.setProperty('direction', direction, 'important');\n    (ctx as { prevTextDirection?: [string, string] }).prevTextDirection = original;\n  }\n}\n\nexport function restoreTextDirection(ctx: CanvasRenderingContext2D, original?: [string, string]) {\n  if (original !== undefined) {\n    delete (ctx as { prevTextDirection?: [string, string] }).prevTextDirection;\n    ctx.canvas.style.setProperty('direction', original[0], original[1]);\n  }\n}\n","import {_angleBetween, _angleDiff, _isBetween, _normalizeAngle} from './helpers.math.js';\nimport {createContext} from './helpers.options.js';\nimport {isPatternOrGradient} from './helpers.color.js';\n\n/**\n * @typedef { import('../elements/element.line.js').default } LineElement\n * @typedef { import('../elements/element.point.js').default } PointElement\n * @typedef {{start: number, end: number, loop: boolean, style?: any}} Segment\n */\n\nfunction propertyFn(property) {\n  if (property === 'angle') {\n    return {\n      between: _angleBetween,\n      compare: _angleDiff,\n      normalize: _normalizeAngle,\n    };\n  }\n  return {\n    between: _isBetween,\n    compare: (a, b) => a - b,\n    normalize: x => x\n  };\n}\n\nfunction normalizeSegment({start, end, count, loop, style}) {\n  return {\n    start: start % count,\n    end: end % count,\n    loop: loop && (end - start + 1) % count === 0,\n    style\n  };\n}\n\nfunction getSegment(segment, points, bounds) {\n  const {property, start: startBound, end: endBound} = bounds;\n  const {between, normalize} = propertyFn(property);\n  const count = points.length;\n  // eslint-disable-next-line prefer-const\n  let {start, end, loop} = segment;\n  let i, ilen;\n\n  if (loop) {\n    start += count;\n    end += count;\n    for (i = 0, ilen = count; i < ilen; ++i) {\n      if (!between(normalize(points[start % count][property]), startBound, endBound)) {\n        break;\n      }\n      start--;\n      end--;\n    }\n    start %= count;\n    end %= count;\n  }\n\n  if (end < start) {\n    end += count;\n  }\n  return {start, end, loop, style: segment.style};\n}\n\n/**\n * Returns the sub-segment(s) of a line segment that fall in the given bounds\n * @param {object} segment\n * @param {number} segment.start - start index of the segment, referring the points array\n * @param {number} segment.end - end index of the segment, referring the points array\n * @param {boolean} segment.loop - indicates that the segment is a loop\n * @param {object} [segment.style] - segment style\n * @param {PointElement[]} points - the points that this segment refers to\n * @param {object} [bounds]\n * @param {string} bounds.property - the property of a `PointElement` we are bounding. `x`, `y` or `angle`.\n * @param {number} bounds.start - start value of the property\n * @param {number} bounds.end - end value of the property\n * @private\n **/\nexport function _boundSegment(segment, points, bounds) {\n  if (!bounds) {\n    return [segment];\n  }\n\n  const {property, start: startBound, end: endBound} = bounds;\n  const count = points.length;\n  const {compare, between, normalize} = propertyFn(property);\n  const {start, end, loop, style} = getSegment(segment, points, bounds);\n\n  const result = [];\n  let inside = false;\n  let subStart = null;\n  let value, point, prevValue;\n\n  const startIsBefore = () => between(startBound, prevValue, value) && compare(startBound, prevValue) !== 0;\n  const endIsBefore = () => compare(endBound, value) === 0 || between(endBound, prevValue, value);\n  const shouldStart = () => inside || startIsBefore();\n  const shouldStop = () => !inside || endIsBefore();\n\n  for (let i = start, prev = start; i <= end; ++i) {\n    point = points[i % count];\n\n    if (point.skip) {\n      continue;\n    }\n\n    value = normalize(point[property]);\n\n    if (value === prevValue) {\n      continue;\n    }\n\n    inside = between(value, startBound, endBound);\n\n    if (subStart === null && shouldStart()) {\n      subStart = compare(value, startBound) === 0 ? i : prev;\n    }\n\n    if (subStart !== null && shouldStop()) {\n      result.push(normalizeSegment({start: subStart, end: i, loop, count, style}));\n      subStart = null;\n    }\n    prev = i;\n    prevValue = value;\n  }\n\n  if (subStart !== null) {\n    result.push(normalizeSegment({start: subStart, end, loop, count, style}));\n  }\n\n  return result;\n}\n\n\n/**\n * Returns the segments of the line that are inside given bounds\n * @param {LineElement} line\n * @param {object} [bounds]\n * @param {string} bounds.property - the property we are bounding with. `x`, `y` or `angle`.\n * @param {number} bounds.start - start value of the `property`\n * @param {number} bounds.end - end value of the `property`\n * @private\n */\nexport function _boundSegments(line, bounds) {\n  const result = [];\n  const segments = line.segments;\n\n  for (let i = 0; i < segments.length; i++) {\n    const sub = _boundSegment(segments[i], line.points, bounds);\n    if (sub.length) {\n      result.push(...sub);\n    }\n  }\n  return result;\n}\n\n/**\n * Find start and end index of a line.\n */\nfunction findStartAndEnd(points, count, loop, spanGaps) {\n  let start = 0;\n  let end = count - 1;\n\n  if (loop && !spanGaps) {\n    // loop and not spanning gaps, first find a gap to start from\n    while (start < count && !points[start].skip) {\n      start++;\n    }\n  }\n\n  // find first non skipped point (after the first gap possibly)\n  while (start < count && points[start].skip) {\n    start++;\n  }\n\n  // if we looped to count, start needs to be 0\n  start %= count;\n\n  if (loop) {\n    // loop will go past count, if start > 0\n    end += start;\n  }\n\n  while (end > start && points[end % count].skip) {\n    end--;\n  }\n\n  // end could be more than count, normalize\n  end %= count;\n\n  return {start, end};\n}\n\n/**\n * Compute solid segments from Points, when spanGaps === false\n * @param {PointElement[]} points - the points\n * @param {number} start - start index\n * @param {number} max - max index (can go past count on a loop)\n * @param {boolean} loop - boolean indicating that this would be a loop if no gaps are found\n */\nfunction solidSegments(points, start, max, loop) {\n  const count = points.length;\n  const result = [];\n  let last = start;\n  let prev = points[start];\n  let end;\n\n  for (end = start + 1; end <= max; ++end) {\n    const cur = points[end % count];\n    if (cur.skip || cur.stop) {\n      if (!prev.skip) {\n        loop = false;\n        result.push({start: start % count, end: (end - 1) % count, loop});\n        // @ts-ignore\n        start = last = cur.stop ? end : null;\n      }\n    } else {\n      last = end;\n      if (prev.skip) {\n        start = end;\n      }\n    }\n    prev = cur;\n  }\n\n  if (last !== null) {\n    result.push({start: start % count, end: last % count, loop});\n  }\n\n  return result;\n}\n\n/**\n * Compute the continuous segments that define the whole line\n * There can be skipped points within a segment, if spanGaps is true.\n * @param {LineElement} line\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n * @private\n */\nexport function _computeSegments(line, segmentOptions) {\n  const points = line.points;\n  const spanGaps = line.options.spanGaps;\n  const count = points.length;\n\n  if (!count) {\n    return [];\n  }\n\n  const loop = !!line._loop;\n  const {start, end} = findStartAndEnd(points, count, loop, spanGaps);\n\n  if (spanGaps === true) {\n    return splitByStyles(line, [{start, end, loop}], points, segmentOptions);\n  }\n\n  const max = end < start ? end + count : end;\n  const completeLoop = !!line._fullLoop && start === 0 && end === count - 1;\n  return splitByStyles(line, solidSegments(points, start, max, completeLoop), points, segmentOptions);\n}\n\n/**\n * @param {Segment[]} segments\n * @param {PointElement[]} points\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n */\nfunction splitByStyles(line, segments, points, segmentOptions) {\n  if (!segmentOptions || !segmentOptions.setContext || !points) {\n    return segments;\n  }\n  return doSplitByStyles(line, segments, points, segmentOptions);\n}\n\n/**\n * @param {LineElement} line\n * @param {Segment[]} segments\n * @param {PointElement[]} points\n * @param {object} [segmentOptions]\n * @return {Segment[]}\n */\nfunction doSplitByStyles(line, segments, points, segmentOptions) {\n  const chartContext = line._chart.getContext();\n  const baseStyle = readStyle(line.options);\n  const {_datasetIndex: datasetIndex, options: {spanGaps}} = line;\n  const count = points.length;\n  const result = [];\n  let prevStyle = baseStyle;\n  let start = segments[0].start;\n  let i = start;\n\n  function addStyle(s, e, l, st) {\n    const dir = spanGaps ? -1 : 1;\n    if (s === e) {\n      return;\n    }\n    // Style can not start/end on a skipped point, adjust indices accordingly\n    s += count;\n    while (points[s % count].skip) {\n      s -= dir;\n    }\n    while (points[e % count].skip) {\n      e += dir;\n    }\n    if (s % count !== e % count) {\n      result.push({start: s % count, end: e % count, loop: l, style: st});\n      prevStyle = st;\n      start = e % count;\n    }\n  }\n\n  for (const segment of segments) {\n    start = spanGaps ? start : segment.start;\n    let prev = points[start % count];\n    let style;\n    for (i = start + 1; i <= segment.end; i++) {\n      const pt = points[i % count];\n      style = readStyle(segmentOptions.setContext(createContext(chartContext, {\n        type: 'segment',\n        p0: prev,\n        p1: pt,\n        p0DataIndex: (i - 1) % count,\n        p1DataIndex: i % count,\n        datasetIndex\n      })));\n      if (styleChanged(style, prevStyle)) {\n        addStyle(start, i - 1, segment.loop, prevStyle);\n      }\n      prev = pt;\n      prevStyle = style;\n    }\n    if (start < i - 1) {\n      addStyle(start, i - 1, segment.loop, prevStyle);\n    }\n  }\n\n  return result;\n}\n\nfunction readStyle(options) {\n  return {\n    backgroundColor: options.backgroundColor,\n    borderCapStyle: options.borderCapStyle,\n    borderDash: options.borderDash,\n    borderDashOffset: options.borderDashOffset,\n    borderJoinStyle: options.borderJoinStyle,\n    borderWidth: options.borderWidth,\n    borderColor: options.borderColor\n  };\n}\n\nfunction styleChanged(style, prevStyle) {\n  if (!prevStyle) {\n    return false;\n  }\n  const cache = [];\n  const replacer = function(key, value) {\n    if (!isPatternOrGradient(value)) {\n      return value;\n    }\n    if (!cache.includes(value)) {\n      cache.push(value);\n    }\n    return cache.indexOf(value);\n  };\n  return JSON.stringify(style, replacer) !== JSON.stringify(prevStyle, replacer);\n}\n","import type {Chart, ChartArea, ChartMeta, Scale, TRBL} from '../types/index.js';\n\nfunction getSizeForArea(scale: Scale, chartArea: ChartArea, field: keyof ChartArea) {\n  return scale.options.clip ? scale[field] : chartArea[field];\n}\n\nfunction getDatasetArea(meta: ChartMeta, chartArea: ChartArea): TRBL {\n  const {xScale, yScale} = meta;\n  if (xScale && yScale) {\n    return {\n      left: getSizeForArea(xScale, chartArea, 'left'),\n      right: getSizeForArea(xScale, chartArea, 'right'),\n      top: getSizeForArea(yScale, chartArea, 'top'),\n      bottom: getSizeForArea(yScale, chartArea, 'bottom')\n    };\n  }\n  return chartArea;\n}\n\nexport function getDatasetClipArea(chart: Chart, meta: ChartMeta): TRBL | false {\n  const clip = meta._clip;\n  if (clip.disabled) {\n    return false;\n  }\n  const area = getDatasetArea(meta, chart.chartArea);\n\n  return {\n    left: clip.left === false ? 0 : area.left - (clip.left === true ? 0 : clip.left),\n    right: clip.right === false ? chart.width : area.right + (clip.right === true ? 0 : clip.right),\n    top: clip.top === false ? 0 : area.top - (clip.top === true ? 0 : clip.top),\n    bottom: clip.bottom === false ? chart.height : area.bottom + (clip.bottom === true ? 0 : clip.bottom)\n  };\n}\n"]}]}