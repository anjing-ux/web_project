{"remainingRequest":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\teamLeader\\deviceReview\\faultClear\\index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\teamLeader\\deviceReview\\faultClear\\index.vue","mtime":1748452298068},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.array.find\");\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/inherits\"));\n\nvar _tslib = require(\"tslib\");\n\nvar _vuePropertyDecorator = require(\"vue-property-decorator\");\n\nvar _index = _interopRequireDefault(require(\"@/components/HeadLable/index.vue\"));\n\nvar _index2 = _interopRequireDefault(require(\"@/components/InputAutoComplete/index.vue\"));\n\nvar _tabChange = _interopRequireDefault(require(\"./tabChange.vue\"));\n\nvar _index3 = _interopRequireDefault(require(\"@/components/Empty/index.vue\"));\n\nvar _fault = require(\"@/api/fault\");\n\nvar default_1 =\n/*#__PURE__*/\nfunction (_Vue) {\n  (0, _inherits2.default)(default_1, _Vue);\n\n  function default_1() {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, default_1);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(default_1).apply(this, arguments));\n    _this.defaultActivity = 0;\n    _this.orderStatics = {\n      all: 15,\n      pending: 3,\n      processing: 4,\n      waitingClear: 5,\n      cleared: 2,\n      closed: 1\n    };\n    _this.row = {};\n    _this.faultType = '';\n    _this.faultCode = ''; // 故障编号\n\n    _this.dialogFaultStatus = -1;\n    _this.clearDialogVisible = false;\n    _this.auditDialogVisible = false; // 审核弹窗\n\n    _this.refuseDialogVisible = false; // 审核不通过原因弹窗\n\n    _this.taskDialogVisible = false; // 任务信息弹窗\n\n    _this.valueTime = [];\n    _this.dialogVisible = false; // 详情弹窗\n\n    _this.remark = ''; // 备注\n\n    _this.refuseReason = ''; // 审核不通过原因\n\n    _this.deviceName = '';\n    _this.counts = 15;\n    _this.page = 1;\n    _this.pageSize = 10;\n    _this.tableData = [];\n    _this.status = 0;\n    _this.diaForm = {}; // 修改为对象\n\n    _this.taskForm = {}; // 修改为对象\n\n    _this.isSearch = false;\n    _this.faultStatus = 0; // 列表字段展示所需状态,用于分页请求数据\n    // 审核不通过原因列表\n\n    _this.refuseFaultList = [{\n      label: '处理不完善',\n      value: '处理不完善'\n    }, {\n      label: '信息不完整',\n      value: '信息不完整'\n    }, {\n      label: '维修措施不当',\n      value: '维修措施不当'\n    }, {\n      label: '照片不清晰',\n      value: '照片不清晰'\n    }, {\n      label: '自定义原因',\n      value: '自定义原因'\n    }]; // 故障类型列表\n\n    _this.faultTypeList = [{\n      label: '类型1',\n      value: 1\n    }, {\n      label: '类型2',\n      value: 2\n    }, {\n      label: '类型3',\n      value: 3\n    }]; // 故障等级列表\n\n    _this.faultLevelList = [{\n      label: '一般',\n      value: 1\n    }, {\n      label: '重要',\n      value: 2\n    }, {\n      label: '紧急',\n      value: 3\n    }]; // 任务状态列表\n\n    _this.taskStatusList = [{\n      label: '执行中',\n      value: 1\n    }, {\n      label: '待验收',\n      value: 2\n    }, {\n      label: '已验收',\n      value: 3\n    }, {\n      label: '已销号',\n      value: 4\n    }, {\n      label: '被驳回',\n      value: 5\n    }];\n    _this.faultStatusList = [{\n      label: '待验收',\n      value: 2\n    }, {\n      label: '验收完成',\n      value: 3\n    }]; // 工区列表（示例数据）\n\n    _this.areaList = [{\n      id: 1,\n      name: '工区A'\n    }, {\n      id: 2,\n      name: '工区B'\n    }, {\n      id: 3,\n      name: '工区C'\n    }]; // 班组列表（示例数据）\n\n    _this.teamList = [{\n      id: 1,\n      name: '班组A'\n    }, {\n      id: 2,\n      name: '班组B'\n    }, {\n      id: 3,\n      name: '班组C'\n    }];\n    return _this;\n  }\n\n  (0, _createClass2.default)(default_1, [{\n    key: \"created\",\n    value: function created() {\n      this.init(Number(this.$route.query.status) || 0);\n    }\n  }, {\n    key: \"mounted\",\n    value: function mounted() {\n      if (this.$route.query.faultId && this.$route.query.faultId !== 'undefined') {\n        this.goDetail(this.$route.query.faultId, 2);\n      }\n\n      if (this.$route.query.status) {\n        this.defaultActivity = Number(this.$route.query.status);\n      }\n    } // 获取工区名称\n\n  }, {\n    key: \"getAreaName\",\n    value: function getAreaName(areaId) {\n      var area = this.areaList.find(function (item) {\n        return item.id === areaId;\n      });\n      return area ? area.name : '未知工区';\n    } // 获取班组名称\n\n  }, {\n    key: \"getTeamName\",\n    value: function getTeamName(teamId) {\n      var team = this.teamList.find(function (item) {\n        return item.id === teamId;\n      });\n      return team ? team.name : '未知班组';\n    } // 获取故障等级文本\n\n  }, {\n    key: \"getFaultLevelText\",\n    value: function getFaultLevelText(level) {\n      switch (level) {\n        case 1:\n          return '一般';\n\n        case 2:\n          return '重要';\n\n        case 3:\n          return '紧急';\n\n        default:\n          return '未知等级';\n      }\n    } // 获取故障类型\n\n  }, {\n    key: \"getFaultType\",\n    value: function getFaultType(row) {\n      var type = this.faultTypeList.find(function (item) {\n        return item.value === row.faultType;\n      });\n      return type ? type.label : '未知类型';\n    } // 获取故障等级\n\n  }, {\n    key: \"getFaultLevel\",\n    value: function getFaultLevel(row) {\n      var level = this.faultLevelList.find(function (item) {\n        return item.value === row.faultLevel;\n      });\n      return level ? level.label : '未知等级';\n    } // 获取故障状态\n\n  }, {\n    key: \"getFaultStatus\",\n    value: function getFaultStatus(row) {\n      var status = this.faultStatusList.find(function (item) {\n        return item.value === row.status;\n      });\n      return status ? status.label : '未知状态';\n    } // 获取任务状态文本\n\n  }, {\n    key: \"getTaskStatusText\",\n    value: function getTaskStatusText(status) {\n      var statusItem = this.taskStatusList.find(function (item) {\n        return item.value === status;\n      });\n      return statusItem ? statusItem.label : '未知状态';\n    } // 初始化数据\n\n  }, {\n    key: \"init\",\n    value: function init(activeIndex) {\n      var _this2 = this;\n\n      var isSearch = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      console.log('初始化数据当前activeIndex:', activeIndex);\n      this.faultStatus = activeIndex;\n      this.isSearch = isSearch;\n      var params = {\n        auditStatus: activeIndex,\n        page: this.page,\n        pageSize: this.pageSize,\n        deviceName: this.deviceName,\n        faultType: this.faultType || null,\n        startTime: this.valueTime && this.valueTime.length ? this.valueTime[0] : null,\n        completeTime: this.valueTime && this.valueTime.length ? this.valueTime[1] : null\n      };\n      (0, _fault.getFaultDetailPage)(params).then(function (res) {\n        console.log('index获取数据成功:', res.data);\n\n        if (res.data.code === 1) {\n          _this2.tableData = res.data.data.records || 0;\n          _this2.counts = res.data.data.total;\n        } else {\n          _this2.$message.error(res.data.msg || '获取数据失败');\n        }\n      }).catch(function () {// 模拟数据，实际开发中可删除\n        //this.$message.error('未知错误请联系管理员')\n      });\n    } // 初始化函数（用于回车搜索）\n\n  }, {\n    key: \"initFun\",\n    value: function initFun(status) {\n      this.init(status, true);\n    } //管理标签页点击事件\n\n  }, {\n    key: \"change\",\n    value: function change(activeIndex) {\n      if (activeIndex === this.faultStatus) return;\n      this.init(activeIndex);\n      this.valueTime = []; //this.dialogPurchaseStatus = 0\n\n      this.$router.push('/teamLeader/deviceReview/faultClear');\n      console.log(activeIndex, '接收到了子组件的index');\n    } // 处理页码变化\n\n  }, {\n    key: \"handleCurrentChange\",\n    value: function handleCurrentChange(val) {\n      this.page = val;\n      this.init(this.faultStatus);\n    } // 处理每页条数变化\n\n  }, {\n    key: \"handleSizeChange\",\n    value: function handleSizeChange(val) {\n      this.pageSize = val;\n      this.page = 1;\n      this.init(this.faultStatus);\n    } // 关闭弹窗\n\n  }, {\n    key: \"handleClose\",\n    value: function handleClose() {\n      this.dialogVisible = false;\n    } // 添加故障报修\n\n  }, {\n    key: \"addFaultReport\",\n    value: function addFaultReport() {\n      this.$router.push('/teamLeader/deviceReview/inspectionAcceptance/add');\n    } // 查看详情\n\n  }, {\n    key: \"goDetail\",\n    value: function goDetail(faultId, status) {\n      var _this3 = this;\n\n      var row = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      this.row = row;\n      this.dialogFaultStatus = status;\n      this.dialogVisible = true; // 获取故障详情\n\n      (0, _fault.queryFaultDetailById)(faultId).then(function (res) {\n        if (res.data.code === 1) {\n          _this3.diaForm = res.data.data;\n        } else {\n          _this3.$message.error(res.data.msg || '获取详情失败');\n        }\n      }).catch(function () {\n        // 模拟数据，实际开发中可删除\n        _this3.$message.error('未知错误请联系管理员');\n      });\n    } // 审核故障\n\n  }, {\n    key: \"auditFault2\",\n    value: function auditFault2(row) {\n      var _this4 = this;\n\n      this.row = row;\n      this.dialogFaultStatus = row.status;\n      this.auditDialogVisible = true; // 获取故障详情\n\n      (0, _fault.queryFaultDetailById)(row.faultId).then(function (res) {\n        if (res.data.code === 1) {\n          _this4.diaForm = res.data.data;\n        } else {\n          _this4.$message.error(res.data.msg || '获取详情失败');\n        }\n      }).catch(function () {\n        // 模拟数据，实际开发中可删除\n        _this4.$message.error('未知错误请联系管理员');\n      });\n    } // 审核不通过\n\n  }, {\n    key: \"refuseFault\",\n    value: function refuseFault(row) {\n      this.row = row;\n      this.refuseDialogVisible = true;\n    } // 确认审核不通过\n\n  }, {\n    key: \"confirmRefuse\",\n    value: function confirmRefuse() {\n      var _this5 = this;\n\n      if (!this.refuseReason) {\n        this.$message.error('请选择审核不通过原因');\n        return;\n      }\n\n      var params = {\n        approved: false,\n        faultId: this.row.faultId,\n        satisfactionScore: null,\n        verifyId: 1,\n        verifyOpinion: this.remark == '' ? this.refuseReason : this.remark\n      };\n      (0, _fault.auditFault2)(params).then(function (res) {\n        if (res.data.code === 1) {\n          _this5.$message.success('审核通过成功！');\n\n          _this5.clearDialogVisible = false;\n          _this5.dialogVisible = false;\n          _this5.refuseDialogVisible = false;\n          _this5.auditDialogVisible = false;\n          _this5.remark = '';\n          _this5.row = {};\n\n          _this5.init(_this5.faultStatus);\n        } else {\n          _this5.$message.error(res.data.msg || '操作失败');\n        }\n      }).catch(function () {\n        _this5.$message.error('服务器繁忙');\n\n        _this5.clearDialogVisible = false;\n        _this5.dialogVisible = false;\n        _this5.remark = '';\n\n        _this5.init(_this5.faultStatus);\n      });\n    } // 审核通过确认框\n\n  }, {\n    key: \"confirmPassAudit\",\n    value: function confirmPassAudit(row) {\n      this.row = row;\n      this.clearDialogVisible = true;\n    } // 确认审核通过！\n    // 确认审核通过！\n\n  }, {\n    key: \"passAudit\",\n    value: function passAudit() {\n      if (!this.remark) {\n        this.$message.error('请填写销号备注');\n        return;\n      } // 关闭当前对话框\n\n\n      this.clearDialogVisible = false; // 跳转到人脸识别页面\n\n      this.$router.push({\n        path: '/teamLeader/deviceReview/faultClear/face-recognition',\n        query: {\n          faultId: this.row.faultId,\n          remark: this.remark\n        }\n      });\n    } // 查看任务信息\n\n  }, {\n    key: \"viewTaskInfo\",\n    value: function viewTaskInfo(row) {\n      var _this6 = this;\n\n      this.taskDialogVisible = true; // 获取任务信息\n\n      (0, _fault.getTaskInfoByFaultId)(row.faultId).then(function (res) {\n        if (res.data.code === 1) {\n          _this6.taskForm = res.data.data;\n        } else {\n          _this6.$message.error(res.data.msg || '获取任务信息失败');\n        }\n      }).catch(function () {\n        // 模拟任务数据\n        _this6.taskForm = {\n          taskId: 1,\n          taskCode: 'TASK20230001',\n          faultId: row.faultId,\n          faultCode: row.faultCode,\n          deviceId: row.deviceId,\n          deviceCode: row.deviceCode,\n          deviceName: row.deviceName,\n          taskName: '设备故障维修任务',\n          startTime: '2023-05-10 10:00:00',\n          endTime: '2023-05-10 18:00:00',\n          executorId: 2001,\n          executorName: '李四',\n          status: 2,\n          completeTime: '2023-05-10 16:30:00',\n          closeTime: null,\n          areaId: row.areaId,\n          teamId: row.teamId,\n          createTime: '2023-05-10 09:45:00',\n          updateTime: '2023-05-10 16:30:00'\n        };\n      });\n    } // 关闭任务信息弹窗\n\n  }, {\n    key: \"handleTaskClose\",\n    value: function handleTaskClose() {\n      this.taskDialogVisible = false;\n      this.taskForm = {};\n    } // 关闭审核弹窗\n\n  }, {\n    key: \"handleAuditClose\",\n    value: function handleAuditClose() {\n      this.auditDialogVisible = false;\n      this.diaForm = {};\n    }\n  }]);\n  return default_1;\n}(_vuePropertyDecorator.Vue);\n\ndefault_1 = (0, _tslib.__decorate)([(0, _vuePropertyDecorator.Component)({\n  components: {\n    HeadLable: _index.default,\n    InputAutoComplete: _index2.default,\n    TabChange: _tabChange.default,\n    Empty: _index3.default\n  },\n  watch: {\n    '$route.query.refresh': {\n      handler: function handler(val) {\n        if (val === 'true') {\n          this.init(this.faultStatus); // 清除refresh参数\n\n          this.$router.replace({\n            query: Object.assign({}, this.$route.query, {\n              refresh: undefined\n            })\n          });\n        }\n      },\n      immediate: true\n    }\n  }\n})], default_1);\nvar _default = default_1;\nexports.default = _default;",{"version":3,"sources":["G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\teamLeader\\deviceReview\\faultClear\\index.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport HeadLable from '@/components/HeadLable/index.vue'\r\nimport InputAutoComplete from '@/components/InputAutoComplete/index.vue'\r\nimport TabChange from './tabChange.vue'\r\nimport Empty from '@/components/Empty/index.vue'\r\nimport {\r\n  getFaultDetailPage,\r\n  queryFaultDetailById,\r\n  getFaultStatusListBy,\r\n  auditFault2,\r\n  getTaskInfoByFaultId\r\n} from '@/api/fault'\r\nimport { status } from 'nprogress'\r\nimport { verify } from 'crypto'\r\n\r\n@Component({\r\n  components: {\r\n    HeadLable,\r\n    InputAutoComplete,\r\n    TabChange,\r\n    Empty,\r\n  },\r\n  watch: {\r\n    '$route.query.refresh': {\r\n      handler(val) {\r\n        if (val === 'true') {\r\n          this.init(this.faultStatus);\r\n          // 清除refresh参数\r\n          this.$router.replace({\r\n            query: Object.assign({}, this.$route.query, { refresh: undefined })\r\n          });\r\n        }\r\n      },\r\n      immediate: true\r\n    }\r\n  }\r\n})\r\nexport default class extends Vue {\r\n  private defaultActivity: any = 0\r\n  private orderStatics = {\r\n    all: 15,\r\n    pending: 3,\r\n    processing: 4,\r\n    waitingClear: 5,\r\n    cleared: 2,\r\n    closed: 1\r\n  }\r\n  private row = {}\r\n  private faultType = ''\r\n  private faultCode = '' // 故障编号\r\n  private dialogFaultStatus = -1\r\n  private clearDialogVisible = false\r\n  private auditDialogVisible = false // 审核弹窗\r\n  private refuseDialogVisible = false // 审核不通过原因弹窗\r\n  private taskDialogVisible = false // 任务信息弹窗\r\n  private valueTime = []\r\n  private dialogVisible = false // 详情弹窗\r\n  private remark = '' // 备注\r\n  private refuseReason = '' // 审核不通过原因\r\n  private deviceName = ''\r\n  private counts: number = 15\r\n  private page: number = 1\r\n  private pageSize: number = 10\r\n  private tableData = []\r\n  private status = 0\r\n\r\n  private diaForm: any = {} // 修改为对象\r\n  private taskForm: any = {} // 修改为对象\r\n  private isSearch: boolean = false\r\n  private faultStatus = 0 // 列表字段展示所需状态,用于分页请求数据\r\n\r\n  // 审核不通过原因列表\r\n  private refuseFaultList = [\r\n    {\r\n      label: '处理不完善',\r\n      value: '处理不完善',\r\n    },\r\n    {\r\n      label: '信息不完整',\r\n      value: '信息不完整',\r\n    },\r\n    {\r\n      label: '维修措施不当',\r\n      value: '维修措施不当',\r\n    },\r\n    {\r\n      label: '照片不清晰',\r\n      value: '照片不清晰',\r\n    },\r\n    {\r\n      label: '自定义原因',\r\n      value: '自定义原因',\r\n    },\r\n  ]\r\n\r\n  // 故障类型列表\r\n  private faultTypeList = [\r\n    {\r\n      label: '类型1',\r\n      value: 1,\r\n    },\r\n    {\r\n      label: '类型2',\r\n      value: 2,\r\n    },\r\n    {\r\n      label: '类型3',\r\n      value: 3,\r\n    },\r\n  ]\r\n\r\n  // 故障等级列表\r\n  private faultLevelList = [\r\n    {\r\n      label: '一般',\r\n      value: 1,\r\n    },\r\n    {\r\n      label: '重要',\r\n      value: 2,\r\n    },\r\n    {\r\n      label: '紧急',\r\n      value: 3,\r\n    },\r\n  ]\r\n\r\n\r\n  \r\n  // 任务状态列表\r\n  private taskStatusList = [\r\n    {\r\n      label: '执行中',\r\n      value: 1,\r\n    },\r\n    {\r\n      label: '待验收',\r\n      value: 2,\r\n    },\r\n    {\r\n      label: '已验收',\r\n      value: 3,\r\n    },\r\n    {\r\n      label: '已销号',\r\n      value: 4,\r\n    },\r\n    {\r\n      label: '被驳回',\r\n      value: 5,\r\n    }\r\n  ]\r\n\r\n  private faultStatusList = [\r\n    {\r\n      label: '待验收',\r\n      value: 2,\r\n    },\r\n    {\r\n      label: '验收完成',\r\n      value: 3,\r\n    },\r\n    \r\n  ]\r\n  \r\n  // 工区列表（示例数据）\r\n  private areaList = [\r\n    { id: 1, name: '工区A' },\r\n    { id: 2, name: '工区B' },\r\n    { id: 3, name: '工区C' }\r\n  ]\r\n  \r\n  // 班组列表（示例数据）\r\n  private teamList = [\r\n    { id: 1, name: '班组A' },\r\n    { id: 2, name: '班组B' },\r\n    { id: 3, name: '班组C' }\r\n  ]\r\n\r\n  created() {\r\n    this.init(Number(this.$route.query.status) || 0)\r\n  }\r\n\r\n  mounted() {\r\n    if (\r\n      this.$route.query.faultId &&\r\n      this.$route.query.faultId !== 'undefined'\r\n    ) {\r\n      this.goDetail(this.$route.query.faultId, 2)\r\n    }\r\n    if (this.$route.query.status) {\r\n      this.defaultActivity = Number(this.$route.query.status)\r\n    }\r\n  }\r\n  \r\n  // 获取工区名称\r\n  private getAreaName(areaId: number): string {\r\n    const area = this.areaList.find(item => item.id === areaId)\r\n    return area ? area.name : '未知工区'\r\n  }\r\n  \r\n  // 获取班组名称\r\n  private getTeamName(teamId: number): string {\r\n    const team = this.teamList.find(item => item.id === teamId)\r\n    return team ? team.name : '未知班组'\r\n  }\r\n  \r\n  // 获取故障等级文本\r\n  private getFaultLevelText(level: number): string {\r\n    switch (level) {\r\n      case 1:\r\n        return '一般'\r\n      case 2:\r\n        return '重要'\r\n      case 3:\r\n        return '紧急'\r\n      default:\r\n        return '未知等级'\r\n    }\r\n  }\r\n  \r\n  // 获取故障类型\r\n  private getFaultType(row: any): string {\r\n    const type = this.faultTypeList.find(item => item.value === row.faultType)\r\n    return type ? type.label : '未知类型'\r\n  }\r\n  \r\n  // 获取故障等级\r\n  private getFaultLevel(row: any): string {\r\n    const level = this.faultLevelList.find(item => item.value === row.faultLevel)\r\n    return level ? level.label : '未知等级'\r\n  }\r\n  \r\n  // 获取故障状态\r\n  private getFaultStatus(row: any): string {\r\n    const status = this.faultStatusList.find(item => item.value === row.status)\r\n    return status ? status.label : '未知状态'\r\n  }\r\n  \r\n  // 获取任务状态文本\r\n  private getTaskStatusText(status: number): string {\r\n    const statusItem = this.taskStatusList.find(item => item.value === status)\r\n    return statusItem ? statusItem.label : '未知状态'\r\n  }\r\n  \r\n  // 初始化数据\r\n  private init(activeIndex: number, isSearch: boolean = false) {\r\n    console.log('初始化数据当前activeIndex:', activeIndex)\r\n    this.faultStatus = activeIndex\r\n    this.isSearch = isSearch\r\n    const params = {\r\n      auditStatus: activeIndex,\r\n      page: this.page,\r\n      pageSize: this.pageSize,\r\n      deviceName: this.deviceName,\r\n      faultType: this.faultType || null,\r\n      startTime: this.valueTime && this.valueTime.length ? this.valueTime[0] : null,\r\n      completeTime: this.valueTime && this.valueTime.length ? this.valueTime[1] : null,\r\n    }\r\n    \r\n    getFaultDetailPage(params).then(res => {\r\n      console.log('index获取数据成功:', res.data)\r\n      if (res.data.code === 1) {\r\n        this.tableData = res.data.data.records || 0\r\n        this.counts = res.data.data.total\r\n      } else {\r\n        this.$message.error(res.data.msg || '获取数据失败')\r\n      }\r\n    }).catch(() => {\r\n      // 模拟数据，实际开发中可删除\r\n      //this.$message.error('未知错误请联系管理员')\r\n    })\r\n  }\r\n  \r\n  // 初始化函数（用于回车搜索）\r\n  private initFun(status: number) {\r\n    this.init(status, true)\r\n  }\r\n  \r\n  //管理标签页点击事件\r\n  change(activeIndex) {\r\n    if (activeIndex === this.faultStatus) return\r\n    this.init(activeIndex)\r\n    this.valueTime = []\r\n    //this.dialogPurchaseStatus = 0\r\n    this.$router.push('/teamLeader/deviceReview/faultClear')\r\n    console.log(activeIndex, '接收到了子组件的index')\r\n  }\r\n\r\n  \r\n  // 处理页码变化\r\n  private handleCurrentChange(val: number) {\r\n    this.page = val\r\n    this.init(this.faultStatus)\r\n  }\r\n  \r\n  // 处理每页条数变化\r\n  private handleSizeChange(val: number) {\r\n    this.pageSize = val\r\n    this.page = 1\r\n    this.init(this.faultStatus)\r\n  }\r\n  \r\n  // 关闭弹窗\r\n  private handleClose() {\r\n    this.dialogVisible = false\r\n  }\r\n    // 添加故障报修\r\n  private addFaultReport() {\r\n    this.$router.push('/teamLeader/deviceReview/inspectionAcceptance/add')\r\n  }\r\n  \r\n  \r\n  // 查看详情\r\n  private goDetail(faultId: string, status: number, row: any = {}) {\r\n    this.row = row\r\n    this.dialogFaultStatus = status\r\n    this.dialogVisible = true\r\n    \r\n    // 获取故障详情\r\n    queryFaultDetailById(faultId).then(res => {\r\n      if (res.data.code === 1) {\r\n        this.diaForm = res.data.data\r\n      } else {\r\n        this.$message.error(res.data.msg || '获取详情失败')\r\n      }\r\n    }).catch(() => {\r\n      // 模拟数据，实际开发中可删除\r\n      this.$message.error('未知错误请联系管理员')\r\n    })\r\n  }\r\n  \r\n  // 审核故障\r\n  private auditFault2(row: any) {\r\n    this.row = row\r\n    this.dialogFaultStatus = row.status\r\n    this.auditDialogVisible = true\r\n    // 获取故障详情\r\n    queryFaultDetailById(row.faultId).then(res => {\r\n      if (res.data.code === 1) {\r\n        this.diaForm = res.data.data\r\n      } else {\r\n        this.$message.error(res.data.msg || '获取详情失败')\r\n      }\r\n    }).catch(() => {\r\n      // 模拟数据，实际开发中可删除\r\n      this.$message.error('未知错误请联系管理员')\r\n    })\r\n  }\r\n  \r\n  // 审核不通过\r\n  private refuseFault(row: any) {\r\n    this.row = row\r\n    this.refuseDialogVisible = true\r\n  }\r\n  \r\n  // 确认审核不通过\r\n  private confirmRefuse() {\r\n    if (!this.refuseReason) {\r\n      this.$message.error('请选择审核不通过原因')\r\n      return\r\n    }\r\n    \r\n   \r\n    const params = {\r\n      approved: false,\r\n      faultId: this.row.faultId,\r\n      satisfactionScore: null,\r\n      verifyId: 1,\r\n      verifyOpinion: this.remark == '' ? this.refuseReason : this.remark,\r\n    };\r\n    \r\n    auditFault2(params).then(res => {\r\n      if (res.data.code === 1) {\r\n        this.$message.success('审核通过成功！')\r\n        this.clearDialogVisible = false\r\n        this.dialogVisible = false\r\n        this.refuseDialogVisible = false\r\n        this.auditDialogVisible = false\r\n        this.remark = ''\r\n        this.row = {}\r\n        this.init(this.faultStatus)\r\n      } else {\r\n        this.$message.error(res.data.msg || '操作失败')\r\n      }\r\n    }).catch(() => {\r\n      this.$message.error('服务器繁忙')\r\n      this.clearDialogVisible = false\r\n      this.dialogVisible = false\r\n      this.remark = ''\r\n      this.init(this.faultStatus)\r\n    })\r\n  }\r\n  \r\n\r\n  \r\n  // 审核通过确认框\r\n  private confirmPassAudit(row: any) {\r\n    this.row = row\r\n    this.clearDialogVisible = true\r\n  }\r\n  \r\n\r\n// 确认审核通过！\r\n\r\n// 确认审核通过！\r\nprivate passAudit() {\r\n  if (!this.remark) {\r\n    this.$message.error('请填写销号备注');\r\n    return;\r\n  }\r\n  \r\n  // 关闭当前对话框\r\n  this.clearDialogVisible = false;\r\n  \r\n  // 跳转到人脸识别页面\r\n  this.$router.push({\r\n    path: '/teamLeader/deviceReview/faultClear/face-recognition',\r\n    query: {\r\n      faultId: this.row.faultId,\r\n      remark: this.remark\r\n    }\r\n  });\r\n}\r\n\r\n  // 查看任务信息\r\n  private viewTaskInfo(row: any) {\r\n    this.taskDialogVisible = true\r\n    // 获取任务信息\r\n    getTaskInfoByFaultId(row.faultId).then(res => {\r\n      if (res.data.code === 1) {\r\n        this.taskForm = res.data.data\r\n      } else {\r\n        this.$message.error(res.data.msg || '获取任务信息失败')\r\n      }\r\n    }).catch(() => {\r\n      // 模拟任务数据\r\n      this.taskForm = {\r\n        taskId: 1,\r\n        taskCode: 'TASK20230001',\r\n        faultId: row.faultId,\r\n        faultCode: row.faultCode,\r\n        deviceId: row.deviceId,\r\n        deviceCode: row.deviceCode,\r\n        deviceName: row.deviceName,\r\n        taskName: '设备故障维修任务',\r\n        startTime: '2023-05-10 10:00:00',\r\n        endTime: '2023-05-10 18:00:00',\r\n        executorId: 2001,\r\n        executorName: '李四',\r\n        status: 2,\r\n        completeTime: '2023-05-10 16:30:00',\r\n        closeTime: null,\r\n        areaId: row.areaId,\r\n        teamId: row.teamId,\r\n        createTime: '2023-05-10 09:45:00',\r\n        updateTime: '2023-05-10 16:30:00'\r\n      }\r\n    })\r\n  }\r\n  \r\n  // 关闭任务信息弹窗\r\n  private handleTaskClose() {\r\n    this.taskDialogVisible = false\r\n    this.taskForm = {}\r\n  }\r\n  \r\n  // 关闭审核弹窗\r\n  private handleAuditClose() {\r\n    this.auditDialogVisible = false\r\n    this.diaForm = {}\r\n  }\r\n}\r\n"],"sourceRoot":""}]}