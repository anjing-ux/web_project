{"remainingRequest":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\sectionLeader\\outbound\\index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\sectionLeader\\outbound\\index.vue","mtime":1745987854797},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/defineProperty\"));\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/inherits\"));\n\nvar _tslib = require(\"tslib\");\n\nvar _vuePropertyDecorator = require(\"vue-property-decorator\");\n\nvar _index = _interopRequireDefault(require(\"@/components/HeadLable/index.vue\"));\n\nvar _index2 = _interopRequireDefault(require(\"@/components/InputAutoComplete/index.vue\"));\n\nvar _tabChange = _interopRequireDefault(require(\"./tabChange.vue\"));\n\nvar _index3 = _interopRequireDefault(require(\"@/components/Empty/index.vue\"));\n\nvar _warehouse = require(\"@/api/warehouse\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar default_1 =\n/*#__PURE__*/\nfunction (_Vue) {\n  (0, _inherits2.default)(default_1, _Vue);\n\n  function default_1() {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, default_1);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(default_1).apply(this, arguments));\n    _this.defaultActivity = 0;\n    _this.orderStatics = {};\n    _this.row = {};\n    _this.equipmentType = '';\n    _this.requestCode = ''; //出库申请单号\n\n    _this.confirmStatus = '';\n    _this.confirmDialogVisible = false;\n    _this.valueTime = [];\n    _this.dialogVisible = false; //详情弹窗\n\n    _this.remark = ''; //自定义原因\n\n    _this.approvalComment = '';\n    _this.equipmentName = '';\n    _this.status = -1;\n    _this.counts = 0;\n    _this.page = 1;\n    _this.pageSize = 10;\n    _this.tableData = [];\n    _this.refuseoutboundList = [{\n      label: '重复采购',\n      value: '重复采购'\n    }, {\n      label: '订单重复',\n      value: '订单重复'\n    }, {\n      label: '项目取消',\n      value: '项目取消'\n    }, {\n      label: '订单内容填写错误',\n      value: '订单内容填写错误'\n    }, {\n      label: '自定义原因',\n      value: '自定义原因'\n    }];\n    _this.approveList = [{\n      label: '审核通过',\n      value: '审核通过'\n    }, {\n      label: '内容无误',\n      value: '内容无误'\n    }, {\n      label: '符合要求',\n      value: '符合要求'\n    }, {\n      label: '信息完整',\n      value: '信息完整'\n    }, {\n      label: '无问题',\n      value: '无问题'\n    }, {\n      label: '自定义原因',\n      value: '自定义原因'\n    }];\n    _this.diaForm = [];\n    _this.isSearch = false;\n    _this.outboundStatus = -1; //列表字段展示所需订单状态,用于分页请求数据\n\n    _this.dialogOutboundStatus = 0; //弹窗所需订单状态，用于详情展示字段\n\n    _this.outboundList = [{\n      label: '全部申请',\n      value: -1\n    }, {\n      label: '待审核',\n      value: 0\n    }, {\n      label: '待出库',\n      value: 1\n    }, {\n      label: '已完成',\n      value: 2\n    }, {\n      label: '已驳回',\n      value: 3\n    }];\n    return _this;\n  }\n\n  (0, _createClass2.default)(default_1, [{\n    key: \"created\",\n    value: function created() {\n      this.init(Number(this.$route.query.status) || -1);\n    }\n  }, {\n    key: \"mounted\",\n    value: function mounted() {//如果有值说明是消息通知点击进来的\n\n      /*     if (\r\n            this.$route.query.orderId &&\r\n            this.$route.query.orderId !== 'undefined'\r\n          ) {\r\n            this.goDetail(this.$route.query.orderId, 2)\r\n          }\r\n          if (this.$route.query.status) {\r\n            this.defaultActivity = this.$route.query.status\r\n          } */\n      // console.log(this.$route.query, 'this.$route')\n    }\n  }, {\n    key: \"initFun\",\n    value: function initFun(outboundStatus) {\n      this.page = 1;\n      this.init(outboundStatus);\n    } //管理标签页点击事件\n\n  }, {\n    key: \"change\",\n    value: function change(activeIndex) {\n      if (activeIndex === this.outboundStatus) return;\n      this.init(activeIndex);\n      this.valueTime = [];\n      this.dialogOutboundStatus = 0;\n      this.$router.push('/sectionLeader/outbound');\n      console.log(activeIndex, '接收到了子组件的index');\n    } //获取待处理，待派送，派送中数量\n\n  }, {\n    key: \"getOutBoundListBy4Status\",\n    value: function getOutBoundListBy4Status() {\n      var _this2 = this;\n\n      (0, _warehouse.getoutboundStatusListBy)({}).then(function (res) {\n        if (res.data.code === 1) {\n          _this2.orderStatics = res.data.data;\n        } else {\n          _this2.$message.error(res.data.msg);\n        }\n      }).catch(function (err) {\n        _this2.$message.error('请求出错了：' + err.message);\n      });\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this3 = this;\n\n      var activeIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : -1;\n      var isSearch = arguments.length > 1 ? arguments[1] : undefined;\n      this.isSearch = isSearch;\n      var params = {\n        page: this.page,\n        pageSize: this.pageSize,\n        equipmentName: this.equipmentName || undefined,\n        equipmentType: this.equipmentType || undefined,\n        beginTime: this.valueTime && this.valueTime.length > 0 ? this.valueTime[0] : undefined,\n        endTime: this.valueTime && this.valueTime.length > 0 ? this.valueTime[1] : undefined,\n        status: activeIndex === -1 ? undefined : activeIndex\n      };\n      (0, _warehouse.getWarehouseDetailPage)(_objectSpread({}, params)).then(function (res) {\n        if (res.data.code === 1) {\n          console.log(_this3.outboundStatus);\n          _this3.tableData = res.data.data.records;\n          _this3.outboundStatus = activeIndex;\n          console.log(activeIndex);\n          _this3.counts = Number(res.data.data.total);\n\n          _this3.getOutBoundListBy4Status();\n        } else {\n          _this3.$message.error(res.data.msg);\n        }\n      }).catch(function (err) {\n        _this3.$message.error('请求出错了：' + err.message);\n      });\n    } //获取采购状态\n\n  }, {\n    key: \"getOutboundType\",\n    value: function getOutboundType(row) {\n      if (row.status === 0) {\n        return '待审核';\n      } else if (row.status === 1) {\n        return '待出库';\n      } else if (row.status === 2) {\n        return '已完成';\n      } else if (row.status === 3) {\n        return '已驳回';\n      } else {\n        return '状态错误';\n      }\n    } //获取设备类型\n\n  }, {\n    key: \"getEquimentType\",\n    value: function getEquimentType(row) {\n      if (row.equipmentType === 1) {\n        return '客服设备';\n      } else if (row.equipmentType === 2) {\n        return '机电设备';\n      } else if (row.equipmentType === 3) {\n        return '消防设备';\n      } else if (row.equipmentType === 4) {\n        return '电梯设备';\n      } else {\n        return '状态错误';\n      }\n    } // 查看详情\n\n  }, {\n    key: \"goDetail\",\n    value: function () {\n      var _goDetail = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(id, status, row) {\n        var _ref, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // console.log(111, index, row)\n                this.diaForm = [];\n                this.dialogVisible = true;\n                this.dialogOutboundStatus = status;\n                this.requestCode = id;\n                console.log(\"查看详情Id\" + id);\n                _context.next = 7;\n                return (0, _warehouse.queryOutboundDetailById)({\n                  requestCode: id\n                });\n\n              case 7:\n                _ref = _context.sent;\n                data = _ref.data;\n                this.diaForm = data.data;\n                this.row = row || {\n                  id: this.$route.query.requestCode,\n                  status: status\n                };\n                /*     if (this.$route.query.requestCode) {\r\n                      this.$router.push('/purchase')\r\n                    } */\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function goDetail(_x, _x2, _x3) {\n        return _goDetail.apply(this, arguments);\n      }\n\n      return goDetail;\n    }() //确认审核\n\n  }, {\n    key: \"confirmAudit\",\n    value: function confirmAudit(type) {\n      var _this4 = this;\n\n      if (!this.approvalComment) {\n        return this.$message.error(\"\\u8BF7\\u9009\\u62E9\".concat(this.confirmStatus, \"\\u539F\\u56E0\"));\n      } else if (this.approvalComment === '自定义原因' && !this.remark) {\n        return this.$message.error(\"\\u8BF7\\u8F93\\u5165\".concat(this.confirmStatus, \"\\u539F\\u56E0\"));\n      }\n\n      ;\n      (this.confirmStatus === '审核不通过确认' ? _warehouse.refuseOutbound : _warehouse.auditOutbound)({\n        requestCode: this.requestCode,\n        status: this.confirmStatus === '审核不通过确认' ? 3 : 1,\n        approvalComment: this.approvalComment === '自定义原因' ? this.remark : this.approvalComment\n      }).then(function (res) {\n        if (res.data.code === 1) {\n          _this4.$message.success('操作成功');\n\n          _this4.confirmDialogVisible = false;\n          _this4.requestCode = '';\n          _this4.confirmStatus = '';\n          _this4.approvalComment = ''; // this.dialogOrderStatus = 0\n\n          _this4.init(_this4.status);\n        } else {\n          _this4.$message.error(res.data.msg);\n        }\n      }).catch(function (err) {\n        _this4.$message.error('请求出错了：' + err.message);\n      });\n    } // 审核不通过\n\n  }, {\n    key: \"refuseOutbound\",\n    value: function refuseOutbound(row) {\n      console.log(\"审核不通过方法被调用\");\n      this.confirmDialogVisible = true; // 确保这个变量被设置为true\n\n      this.requestCode = row.requestCode;\n      this.confirmStatus = '审核不通过确认';\n      this.dialogOutboundStatus = row.status;\n      this.dialogVisible = false;\n      this.remark = ''; // 重置备注\n    } //审核通过\n\n  }, {\n    key: \"passOutbound\",\n    value: function passOutbound(row) {\n      this.confirmDialogVisible = true; // 确保这个变量被设置为true\n\n      this.requestCode = row.requestCode;\n      this.confirmStatus = '审核通过确认';\n      this.dialogOutboundStatus = row.status;\n      this.dialogVisible = false;\n      this.remark = ''; // 重置备注\n    }\n  }, {\n    key: \"handleClose\",\n    value: function handleClose() {\n      this.dialogVisible = false;\n    }\n  }, {\n    key: \"handleSizeChange\",\n    value: function handleSizeChange(val) {\n      this.pageSize = val;\n      this.init(this.outboundStatus);\n    }\n  }, {\n    key: \"handleCurrentChange\",\n    value: function handleCurrentChange(val) {\n      this.page = val;\n      this.init(this.outboundStatus);\n    }\n  }]);\n  return default_1;\n}(_vuePropertyDecorator.Vue);\n\ndefault_1 = (0, _tslib.__decorate)([(0, _vuePropertyDecorator.Component)({\n  components: {\n    HeadLable: _index.default,\n    InputAutoComplete: _index2.default,\n    TabChange: _tabChange.default,\n    Empty: _index3.default\n  }\n})], default_1);\nvar _default = default_1;\nexports.default = _default;",{"version":3,"sources":["G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\sectionLeader\\outbound\\index.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator'\nimport HeadLable from '@/components/HeadLable/index.vue'\nimport InputAutoComplete from '@/components/InputAutoComplete/index.vue'\nimport TabChange from './tabChange.vue'\nimport Empty from '@/components/Empty/index.vue'\nimport {\n  getWarehouseDetailPage,\n  queryOutboundDetailById,\n  getoutboundStatusListBy,\n  refuseOutbound,\n  auditOutbound\n} from '@/api/warehouse'\nimport { status } from 'nprogress'\n\n@Component({\n  components: {\n    HeadLable,\n    InputAutoComplete,\n    TabChange,\n    Empty,\n  },\n})\nexport default class extends Vue {\n  private defaultActivity: any = 0\n  private orderStatics = {}\n  private row = {}\n  private equipmentType = ''\n  private requestCode = '' //出库申请单号\n  private confirmStatus = ''\n  private confirmDialogVisible = false\n  private valueTime = []\n  private dialogVisible = false //详情弹窗\n  private remark = '' //自定义原因\n  private approvalComment = ''\n  private equipmentName = ''\n  private status = -1\n  private counts: number = 0\n  private page: number = 1\n  private pageSize: number = 10\n  private tableData = [];\n  private refuseoutboundList = [\n    {\n      label: '重复采购',\n      value: '重复采购',\n    },\n    {\n      label: '订单重复',\n      value: '订单重复',\n    },\n    {\n      label: '项目取消',\n      value: '项目取消',\n    },\n    {\n      label: '订单内容填写错误',\n      value: '订单内容填写错误',\n    },\n    {\n      label: '自定义原因',\n      value: '自定义原因',\n    },\n  ]\n  private approveList = [\n  {\n    label: '审核通过',\n    value: '审核通过',\n  },\n  {\n    label: '内容无误',\n    value: '内容无误',\n  },\n  {\n    label: '符合要求',\n    value: '符合要求',\n  },\n  {\n    label: '信息完整',\n    value: '信息完整',\n  },\n  {\n    label: '无问题',\n    value: '无问题',\n  },\n  {\n    label: '自定义原因',\n    value: '自定义原因',\n  },\n];\n\n  private diaForm = []\n  private isSearch: boolean = false\n  private outboundStatus = -1 //列表字段展示所需订单状态,用于分页请求数据\n  private dialogOutboundStatus = 0 //弹窗所需订单状态，用于详情展示字段\n\n  private outboundList = [\n    {\n      label: '全部申请',\n      value: -1,\n    },\n    {\n      label: '待审核',\n      value: 0,\n    },\n    {\n      label: '待出库',\n      value: 1,\n    },\n    {\n      label: '已完成',\n      value: 2,\n    },\n    {\n      label: '已驳回',\n      value: 3,\n    }\n  ]\n\n  created() {\n    this.init(Number(this.$route.query.status) || -1)\n  }\n\n  mounted() {\n    //如果有值说明是消息通知点击进来的\n    /*     if (\n          this.$route.query.orderId &&\n          this.$route.query.orderId !== 'undefined'\n        ) {\n          this.goDetail(this.$route.query.orderId, 2)\n        }\n        if (this.$route.query.status) {\n          this.defaultActivity = this.$route.query.status\n        } */\n    // console.log(this.$route.query, 'this.$route')\n\n  }\n\n  initFun(outboundStatus) {\n    this.page = 1\n    this.init(outboundStatus)\n  }\n\n  //管理标签页点击事件\n  change(activeIndex) {\n    if (activeIndex === this.outboundStatus) return\n    this.init(activeIndex)\n    this.valueTime = []\n    this.dialogOutboundStatus = 0\n    this.$router.push('/sectionLeader/outbound')\n    console.log(activeIndex, '接收到了子组件的index')\n  }\n\n  //获取待处理，待派送，派送中数量\n  getOutBoundListBy4Status() {\n    getoutboundStatusListBy({})\n      .then((res) => {\n        if (res.data.code === 1) {\n          this.orderStatics = res.data.data\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n      .catch((err) => {\n        this.$message.error('请求出错了：' + err.message)\n      })\n  }\n\n  init(activeIndex: number = -1, isSearch?) {\n   \n\n    this.isSearch = isSearch\n    const params = {\n      page: this.page,\n      pageSize: this.pageSize,\n      equipmentName: this.equipmentName || undefined,\n      equipmentType: this.equipmentType || undefined,\n      beginTime:\n        this.valueTime && this.valueTime.length > 0\n          ? this.valueTime[0]\n          : undefined,\n      endTime:\n        this.valueTime && this.valueTime.length > 0\n          ? this.valueTime[1]\n          : undefined,\n      status: activeIndex === -1 ? undefined : activeIndex,\n    }\n    getWarehouseDetailPage({ ...params })\n      .then((res) => {\n        if (res.data.code === 1) {\n          console.log(this.outboundStatus)\n          this.tableData = res.data.data.records\n          this.outboundStatus = activeIndex\n          console.log(activeIndex)\n          this.counts = Number(res.data.data.total)\n          this.getOutBoundListBy4Status()\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n      .catch((err) => {\n        this.$message.error('请求出错了：' + err.message)\n      })\n  }\n\n\n\n  //获取采购状态\n  getOutboundType(row: any) {\n    if (row.status === 0) {\n      return '待审核'\n    } else if (row.status === 1) {\n      return '待出库'\n    } else if (row.status === 2) {\n      return '已完成'\n    } else if (row.status === 3) {\n      return '已驳回'\n    } else {\n      return '状态错误'\n    }\n  }\n\n  //获取设备类型\n  getEquimentType(row: any) {\n    if (row.equipmentType === 1) {\n      return '客服设备'\n    } else if (row.equipmentType === 2) {\n      return '机电设备'\n    } else if (row.equipmentType === 3) {\n      return '消防设备'\n    } else if (row.equipmentType === 4) {\n      return '电梯设备'\n    } else {\n      return '状态错误'\n    }\n  }\n\n\n  // 查看详情\n  async goDetail(id: any, status: number, row?: any) {\n    // console.log(111, index, row)\n    this.diaForm = []\n    this.dialogVisible = true\n    this.dialogOutboundStatus = status\n    this.requestCode = id\n    console.log(\"查看详情Id\" + id)\n    const { data } = await queryOutboundDetailById({ requestCode: id })\n    this.diaForm = data.data\n    this.row = row || { id: this.$route.query.requestCode, status: status }\n    /*     if (this.$route.query.requestCode) {\n          this.$router.push('/purchase')\n        } */\n  }\n\n\n\n    //确认审核\n    confirmAudit(type) {\n    if (!this.approvalComment) {\n      return this.$message.error(`请选择${this.confirmStatus}原因`)\n    } else if (this.approvalComment === '自定义原因' && !this.remark) {\n      return this.$message.error(`请输入${this.confirmStatus}原因`)\n    }\n\n    ;(this.confirmStatus === '审核不通过确认' ? refuseOutbound : auditOutbound)({\n      requestCode: this.requestCode,\n      status: this.confirmStatus === '审核不通过确认' ? 3 : 1,\n      approvalComment: this.approvalComment === '自定义原因' ? this.remark : this.approvalComment,\n    })\n      .then((res) => {\n        if (res.data.code === 1) {\n          this.$message.success('操作成功')\n          this.confirmDialogVisible = false\n          this.requestCode = ''\n          this.confirmStatus = ''\n          this.approvalComment = ''\n          // this.dialogOrderStatus = 0\n          this.init(this.status)\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n      .catch((err) => {\n        this.$message.error('请求出错了：' + err.message)\n      })\n  }\n  // 审核不通过\n  refuseOutbound(row: any) {\n    console.log(\"审核不通过方法被调用\");\n    this.confirmDialogVisible = true;  // 确保这个变量被设置为true\n    this.requestCode = row.requestCode;\n    this.confirmStatus = '审核不通过确认'\n    this.dialogOutboundStatus = row.status;\n    this.dialogVisible = false;\n    this.remark = '';  // 重置备注\n  }\n\n\n  //审核通过\n  passOutbound(row: any) {\n\n    this.confirmDialogVisible = true;  // 确保这个变量被设置为true\n    this.requestCode = row.requestCode\n    this.confirmStatus = '审核通过确认'\n    this.dialogOutboundStatus = row.status\n    this.dialogVisible = false;\n    this.remark = '';  // 重置备注\n  }\n\n  handleClose() {\n    this.dialogVisible = false\n  }\n\n  private handleSizeChange(val: any) {\n    this.pageSize = val\n    this.init(this.outboundStatus)\n  }\n\n  private handleCurrentChange(val: any) {\n    this.page = val\n    this.init(this.outboundStatus)\n  }\n}\n"],"sourceRoot":""}]}