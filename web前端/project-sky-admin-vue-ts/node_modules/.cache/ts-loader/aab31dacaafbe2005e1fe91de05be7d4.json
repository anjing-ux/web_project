{"remainingRequest":"G:\\sky\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js!G:\\sky\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!G:\\sky\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\sky\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\sky\\project-sky-admin-vue-ts\\src\\views\\sectionLeader\\purchase\\index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"G:\\sky\\project-sky-admin-vue-ts\\src\\views\\sectionLeader\\purchase\\index.vue","mtime":1745852505240},{"path":"G:\\sky\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\sky\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\sky\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"G:\\sky\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\sky\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"G:\\\\sky\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"G:\\\\sky\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"G:\\\\sky\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/defineProperty\"));\n\nrequire(\"core-js/modules/es6.number.constructor\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"G:\\\\sky\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"G:\\\\sky\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"G:\\\\sky\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"G:\\\\sky\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"G:\\\\sky\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/inherits\"));\n\nvar _tslib = require(\"tslib\");\n\nvar _vuePropertyDecorator = require(\"vue-property-decorator\");\n\nvar _index = _interopRequireDefault(require(\"@/components/HeadLable/index.vue\"));\n\nvar _index2 = _interopRequireDefault(require(\"@/components/InputAutoComplete/index.vue\"));\n\nvar _tabChange = _interopRequireDefault(require(\"./tabChange.vue\"));\n\nvar _index3 = _interopRequireDefault(require(\"@/components/Empty/index.vue\"));\n\nvar _purchase = require(\"@/api/purchase\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar default_1 =\n/*#__PURE__*/\nfunction (_Vue) {\n  (0, _inherits2.default)(default_1, _Vue);\n\n  function default_1() {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, default_1);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(default_1).apply(this, arguments));\n    _this.defaultActivity = 0;\n    _this.orderStatics = {};\n    _this.row = {};\n    _this.isAutoNext = true;\n    _this.isTableOperateBtn = true;\n    _this.currentPageIndex = 0; //记录查看详情数据的index\n\n    _this.equipmentType = '';\n    _this.purchaseId = ''; //采购单号\n\n    _this.valueTime = [];\n    _this.dialogVisible = false; //详情弹窗\n\n    _this.cancelDialogVisible = false; //取消，拒单弹窗\n\n    _this.cancelDialogTitle = '取消'; //默认取消\n\n    _this.cancelReason = '';\n    _this.refuseReason = '';\n    _this.remark = ''; //自定义原因\n\n    _this.equipmentName = '';\n    _this.counts = 0;\n    _this.page = 1;\n    _this.pageSize = 10;\n    _this.tableData = [];\n    _this.cancelPurchaseList = [{\n      label: '重复采购',\n      value: '重复采购'\n    }, {\n      label: '订单重复',\n      value: '订单重复'\n    }, {\n      label: '项目取消',\n      value: '项目取消'\n    }, {\n      label: '订单内容填写错误',\n      value: '订单内容填写错误'\n    }, {\n      label: '自定义原因',\n      value: '自定义原因'\n    }];\n    _this.refusePurchaseList = [{\n      label: '不符合采购要求',\n      value: '不符合采购要求'\n    }, {\n      label: '预算超支',\n      value: '预算超支'\n    }, {\n      label: '供应商资质不符',\n      value: '供应商资质不符'\n    }, {\n      label: '采购流程不合规',\n      value: '采购流程不合规'\n    }, {\n      label: '自定义原因',\n      value: '自定义原因'\n    }];\n    _this.diaForm = [];\n    _this.isSearch = false;\n    _this.purchaseStatus = -1; //列表字段展示所需订单状态,用于分页请求数据\n\n    _this.dialogPurchaseStatus = 0; //弹窗所需订单状态，用于详情展示字段\n\n    _this.purchaseList = [{\n      label: '全部采购单',\n      value: -1\n    }, {\n      label: '待接收',\n      value: 0\n    }, {\n      label: '进行中',\n      value: 1\n    }, {\n      label: '待审核',\n      value: 2\n    }, {\n      label: '待采购',\n      value: 3\n    }, {\n      label: '已完成',\n      value: 4\n    }, {\n      label: '已驳回',\n      value: 5\n    }, {\n      label: '已取消',\n      value: 6\n    }];\n    return _this;\n  }\n\n  (0, _createClass2.default)(default_1, [{\n    key: \"created\",\n    value: function created() {\n      this.init(Number(this.$route.query.status) || -1);\n    }\n  }, {\n    key: \"mounted\",\n    value: function mounted() {\n      //如果有值说明是消息通知点击进来的\n      if (this.$route.query.orderId && this.$route.query.orderId !== 'undefined') {\n        this.goDetail(this.$route.query.orderId, 2);\n      }\n\n      if (this.$route.query.status) {\n        this.defaultActivity = this.$route.query.status;\n      } // console.log(this.$route.query, 'this.$route')\n\n    }\n  }, {\n    key: \"initFun\",\n    value: function initFun(purchaseStatus) {\n      this.page = 1;\n      this.init(purchaseStatus);\n    } //管理标签页点击事件\n\n  }, {\n    key: \"change\",\n    value: function change(activeIndex) {\n      if (activeIndex === this.purchaseStatus) return;\n      this.init(activeIndex);\n      this.valueTime = [];\n      this.dialogPurchaseStatus = 0;\n      this.$router.push('/sectionLeader/purchase');\n      console.log(activeIndex, '接收到了子组件的index');\n    } //获取待处理，待派送，派送中数量\n\n  }, {\n    key: \"getOrderListBy4Status\",\n    value: function getOrderListBy4Status() {\n      var _this2 = this;\n\n      (0, _purchase.getPurchaseListBy)({}).then(function (res) {\n        if (res.data.code === 1) {\n          _this2.orderStatics = res.data.data;\n        } else {\n          _this2.$message.error(res.data.msg);\n        }\n      }).catch(function (err) {\n        _this2.$message.error('请求出错了：' + err.message);\n      });\n    }\n  }, {\n    key: \"init\",\n    value: function init() {\n      var _this3 = this;\n\n      var activeIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : -1;\n      var isSearch = arguments.length > 1 ? arguments[1] : undefined;\n      this.isSearch = isSearch;\n      var params = {\n        page: this.page,\n        pageSize: this.pageSize,\n        equipmentName: this.equipmentName || undefined,\n        equipmentType: this.equipmentType || undefined,\n        beginTime: this.valueTime && this.valueTime.length > 0 ? this.valueTime[0] : undefined,\n        endTime: this.valueTime && this.valueTime.length > 0 ? this.valueTime[1] : undefined,\n        status: activeIndex === -1 ? undefined : activeIndex\n      };\n      (0, _purchase.getOrderDetailPage)(_objectSpread({}, params)).then(function (res) {\n        if (res.data.code === 1) {\n          console.log(_this3.purchaseStatus);\n          _this3.tableData = res.data.data.records;\n          _this3.purchaseStatus = activeIndex;\n          console.log(activeIndex);\n          _this3.counts = Number(res.data.data.total);\n\n          _this3.getOrderListBy4Status(); //处理下一条操作\n\n          /* if (\r\n            this.dialogOrderStatus === 2 &&\r\n            this.purchaseStatus === 2 &&\r\n          //           this.isAutoNext &&\r\n          //           !this.isTableOperateBtn &&\r\n            res.data.data.records.length > 1\r\n          ) {\r\n            const row = res.data.data.records[0]\r\n            this.goDetail(row.id, row.status, row)\r\n          } else {\r\n            return null\r\n          } */\n\n        } else {\n          _this3.$message.error(res.data.msg);\n        }\n      }).catch(function (err) {\n        _this3.$message.error('请求出错了：' + err.message);\n      });\n    } // 添加更改\n\n  }, {\n    key: \"sendPurchaseInfo\",\n    value: function sendPurchaseInfo(st) {\n      if (st === 'add') {\n        this.$router.push({\n          path: '/sectionLeader/purchase/add'\n        });\n      } else {\n        this.$router.push({\n          path: '/sectionLeader/purchase/add',\n          query: {\n            id: st.id\n          }\n        });\n      }\n    } //获取采购状态\n\n  }, {\n    key: \"getPurchaseType\",\n    value: function getPurchaseType(row) {\n      if (row.status === 0) {\n        return '待接收';\n      } else if (row.status === 1) {\n        return '进行中';\n      } else if (row.status === 2) {\n        return '待审核';\n      } else if (row.status === 3) {\n        return '待采购';\n      } else if (row.status === 4) {\n        return '已完成';\n      } else if (row.status === 5) {\n        return '已取消';\n      } else {\n        return '状态错误';\n      }\n    } //获取设备类型\n\n  }, {\n    key: \"getEquimentType\",\n    value: function getEquimentType(row) {\n      if (row.equipmentType === 1) {\n        return '客服设备';\n      } else if (row.equipmentType === 2) {\n        return '机电设备';\n      } else if (row.equipmentType === 3) {\n        return '消防设备';\n      } else if (row.equipmentType === 4) {\n        return '电梯设备';\n      } else {\n        return '状态错误';\n      }\n    } // 查看详情\n\n  }, {\n    key: \"goDetail\",\n    value: function () {\n      var _goDetail = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee(id, status, row) {\n        var _ref, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                // console.log(111, index, row)\n                this.diaForm = [];\n                this.dialogVisible = true;\n                this.dialogPurchaseStatus = status;\n                this.purchaseId = id;\n                console.log(\"查看详情Id\" + id);\n                _context.next = 7;\n                return (0, _purchase.queryPurchaseDetailById)({\n                  purchaseId: id\n                });\n\n              case 7:\n                _ref = _context.sent;\n                data = _ref.data;\n                this.diaForm = data.data;\n                this.row = row || {\n                  id: this.$route.query.purchaseId,\n                  status: status\n                };\n\n                if (this.$route.query.purchaseId) {\n                  this.$router.push('/purchase');\n                }\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function goDetail(_x, _x2, _x3) {\n        return _goDetail.apply(this, arguments);\n      }\n\n      return goDetail;\n    }() //审核通过\n\n  }, {\n    key: \"passPurchase\",\n    value: function passPurchase(row) {\n      var _this4 = this;\n\n      this.purchaseId = row.purchaseId;\n      this.dialogPurchaseStatus = row.status;\n      (0, _purchase.auditPurchase)({\n        purchaseId: this.purchaseId,\n        status: 3,\n        remark: '审核通过'\n      }).then(function (res) {\n        if (res.data.code === 1) {\n          _this4.$message.success(\"审核通过！\");\n\n          _this4.purchaseId = ''; // this.dialogOrderStatus = 0\n\n          _this4.dialogVisible = false;\n\n          _this4.init(_this4.purchaseStatus);\n        } else {\n          _this4.$message.error(res.data.msg);\n        }\n      }).catch(function (err) {\n        _this4.$message.error('请求出错了：' + err.message);\n      });\n    } //审核不通过\n\n  }, {\n    key: \"refusePurchase\",\n    value: function refusePurchase(row) {\n      this.cancelDialogVisible = true;\n      this.purchaseId = row.purchaseId;\n      this.dialogPurchaseStatus = row.status;\n      this.dialogVisible = false;\n      this.cancelDialogTitle = '审核不通过';\n      this.refuseReason = '';\n    } //打开取消订单弹窗\n\n  }, {\n    key: \"cancelPurchase\",\n    value: function cancelPurchase(row) {\n      this.cancelDialogVisible = true;\n      this.purchaseId = row.purchaseId;\n      this.dialogVisible = false;\n      this.cancelReason = '';\n      this.cancelDialogTitle = '取消';\n      this.dialogPurchaseStatus = row.status;\n    } //确认取消或拒绝订单并填写原因\n\n  }, {\n    key: \"confirmCancel\",\n    value: function confirmCancel(type) {\n      var _this5 = this;\n\n      if (!this.cancelReason && !this.refuseReason) {\n        return this.$message.error(\"\\u8BF7\\u9009\\u62E9\".concat(this.cancelDialogTitle, \"\\u539F\\u56E0\"));\n      }\n\n      ;\n      (this.cancelDialogTitle === '取消' ? _purchase.purchaseCancel : _purchase.auditPurchase)((0, _defineProperty2.default)({\n        purchaseId: this.purchaseId,\n        status: this.cancelDialogTitle === '取消' ? 6 : 5\n      }, this.cancelDialogTitle === '取消' ? 'cancelReason' : 'refuseReason', this.cancelDialogTitle === '取消' ? this.cancelReason : this.refuseReason)).then(function (res) {\n        if (res.data.code === 1) {\n          _this5.$message.success('操作成功');\n\n          _this5.cancelDialogVisible = false;\n          _this5.purchaseId = ''; // this.dialogOrderStatus = 0\n\n          _this5.init(_this5.purchaseStatus);\n        } else {\n          _this5.$message.error(res.data.msg);\n        }\n      }).catch(function (err) {\n        _this5.$message.error('请求出错了：' + err.message);\n      });\n    }\n  }, {\n    key: \"handleClose\",\n    value: function handleClose() {\n      this.dialogVisible = false;\n    }\n  }, {\n    key: \"handleSizeChange\",\n    value: function handleSizeChange(val) {\n      this.pageSize = val;\n      this.init(this.purchaseStatus);\n    }\n  }, {\n    key: \"handleCurrentChange\",\n    value: function handleCurrentChange(val) {\n      this.page = val;\n      this.init(this.purchaseStatus);\n    }\n  }]);\n  return default_1;\n}(_vuePropertyDecorator.Vue);\n\ndefault_1 = (0, _tslib.__decorate)([(0, _vuePropertyDecorator.Component)({\n  components: {\n    HeadLable: _index.default,\n    InputAutoComplete: _index2.default,\n    TabChange: _tabChange.default,\n    Empty: _index3.default\n  }\n})], default_1);\nvar _default = default_1;\nexports.default = _default;",{"version":3,"sources":["G:\\sky\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\sky\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\sky\\project-sky-admin-vue-ts\\src\\views\\sectionLeader\\purchase\\index.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue } from 'vue-property-decorator'\nimport HeadLable from '@/components/HeadLable/index.vue'\nimport InputAutoComplete from '@/components/InputAutoComplete/index.vue'\nimport TabChange from './tabChange.vue'\nimport Empty from '@/components/Empty/index.vue'\nimport {\n  getOrderDetailPage,\n  queryPurchaseDetailById,\n  purchaseCancel,\n  auditPurchase,\n  getPurchaseListBy,\n} from '@/api/purchase'\nimport { status } from 'nprogress'\n\n@Component({\n  components: {\n    HeadLable,\n    InputAutoComplete,\n    TabChange,\n    Empty,\n  },\n})\nexport default class extends Vue {\n  private defaultActivity: any = 0\n  private orderStatics = {}\n  private row = {}\n  private isAutoNext = true\n  private isTableOperateBtn = true\n  private currentPageIndex = 0 //记录查看详情数据的index\n  private equipmentType = ''\n  private purchaseId = '' //采购单号\n  private valueTime = []\n  private dialogVisible = false //详情弹窗\n  private cancelDialogVisible = false //取消，拒单弹窗\n  private cancelDialogTitle = '取消' //默认取消\n  private cancelReason = ''\n  private refuseReason = ''\n  private remark = '' //自定义原因\n  private equipmentName = ''\n  private counts: number = 0\n  private page: number = 1\n  private pageSize: number = 10\n  private tableData = []\n  private cancelPurchaseList = [\n    {\n      label: '重复采购',\n      value: '重复采购',\n    },\n    {\n      label: '订单重复',\n      value: '订单重复',\n    },\n    {\n      label: '项目取消',\n      value: '项目取消',\n    },\n    {\n      label: '订单内容填写错误',\n      value: '订单内容填写错误',\n    },\n    {\n      label: '自定义原因',\n      value: '自定义原因',\n    },\n  ]\n  private refusePurchaseList = [\n    {\n        label: '不符合采购要求',\n        value: '不符合采购要求',\n    },\n    {\n        label: '预算超支',\n        value: '预算超支',\n    },\n    {\n        label: '供应商资质不符',\n        value: '供应商资质不符',\n    },\n    {\n        label: '采购流程不合规',\n        value: '采购流程不合规',\n    },\n    {\n        label: '自定义原因',\n        value: '自定义原因',\n    }\n];\n\n  private diaForm = []\n  private isSearch: boolean = false\n  private purchaseStatus = -1 //列表字段展示所需订单状态,用于分页请求数据\n  private dialogPurchaseStatus = 0 //弹窗所需订单状态，用于详情展示字段\n\n  private purchaseList = [\n    {\n      label: '全部采购单',\n      value: -1,\n    },\n    {\n      label: '待接收',\n      value: 0,\n    },\n    {\n      label: '进行中',\n      value: 1,\n    },\n    {\n      label: '待审核',\n      value: 2,\n    },\n    {\n      label: '待采购',\n      value: 3,\n    },\n    {\n      label: '已完成',\n      value: 4,\n    },\n    {\n      label: '已驳回',\n      value: 5,\n    },\n    {\n      label: '已取消',\n      value: 6,\n    },\n  ]\n\n  created() {\n    this.init(Number(this.$route.query.status) || -1)\n  }\n\n  mounted() {\n    //如果有值说明是消息通知点击进来的\n    if (\n      this.$route.query.orderId &&\n      this.$route.query.orderId !== 'undefined'\n    ) {\n      this.goDetail(this.$route.query.orderId, 2)\n    }\n    if (this.$route.query.status) {\n      this.defaultActivity = this.$route.query.status\n    }\n    // console.log(this.$route.query, 'this.$route')\n  }\n\n  initFun(purchaseStatus) {\n    this.page = 1\n    this.init(purchaseStatus)\n  }\n\n  //管理标签页点击事件\n  change(activeIndex) {\n    if (activeIndex === this.purchaseStatus) return\n    this.init(activeIndex)\n    this.valueTime = []\n    this.dialogPurchaseStatus = 0\n    this.$router.push('/sectionLeader/purchase')\n    console.log(activeIndex, '接收到了子组件的index')\n  }\n\n  //获取待处理，待派送，派送中数量\n  getOrderListBy4Status() {\n    getPurchaseListBy({})\n      .then((res) => {\n        if (res.data.code === 1) {\n          this.orderStatics = res.data.data\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n      .catch((err) => {\n        this.$message.error('请求出错了：' + err.message)\n      })\n  }\n\n  init(activeIndex: number = -1, isSearch?) {\n    this.isSearch = isSearch\n    const params = {\n      page: this.page,\n      pageSize: this.pageSize,\n      equipmentName: this.equipmentName || undefined,\n      equipmentType: this.equipmentType || undefined,\n      beginTime:\n        this.valueTime && this.valueTime.length > 0\n          ? this.valueTime[0]\n          : undefined,\n      endTime:\n        this.valueTime && this.valueTime.length > 0\n          ? this.valueTime[1]\n          : undefined,\n      status: activeIndex === -1 ? undefined : activeIndex,\n      // isDeleted:activeIndex === 5 ? 1 : 0\n    }\n    getOrderDetailPage({ ...params })\n      .then((res) => {\n        if (res.data.code === 1) {\n          console.log(this.purchaseStatus)\n          this.tableData = res.data.data.records\n          this.purchaseStatus = activeIndex\n          console.log(activeIndex)\n          this.counts = Number(res.data.data.total)\n          this.getOrderListBy4Status()\n          //处理下一条操作\n          /* if (\n            this.dialogOrderStatus === 2 &&\n            this.purchaseStatus === 2 &&\n//           this.isAutoNext &&\n//           !this.isTableOperateBtn &&\n            res.data.data.records.length > 1\n          ) {\n            const row = res.data.data.records[0]\n            this.goDetail(row.id, row.status, row)\n          } else {\n            return null\n          } */\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n      .catch((err) => {\n        this.$message.error('请求出错了：' + err.message)\n      })\n  }\n\n  // 添加更改\n  private sendPurchaseInfo(st: any) {\n    if (st === 'add') {\n      this.$router.push({ path: '/sectionLeader/purchase/add' })\n    } else {\n      this.$router.push({ path: '/sectionLeader/purchase/add', query: { id: st.id } })\n    }\n  }\n\n  //获取采购状态\n  getPurchaseType(row: any) {\n    if (row.status === 0) {\n      return '待接收'\n    } else if (row.status === 1) {\n      return '进行中'\n    } else if (row.status === 2) {\n      return '待审核'\n    } else if (row.status === 3) {\n      return '待采购'\n    } else if (row.status === 4) {\n      return '已完成'\n    } else if (row.status === 5) {\n      return '已取消'\n    } else {\n      return '状态错误'\n    }\n  }\n\n  //获取设备类型\n  getEquimentType(row: any) {\n    if (row.equipmentType === 1) {\n      return '客服设备'\n    } else if (row.equipmentType === 2) {\n      return '机电设备'\n    } else if (row.equipmentType === 3) {\n      return '消防设备'\n    } else if (row.equipmentType === 4) {\n      return '电梯设备'\n    } else {\n      return '状态错误'\n    }\n  }\n\n\n  // 查看详情\n  async goDetail(id: any, status: number, row?: any) {\n    // console.log(111, index, row)\n    this.diaForm = []\n    this.dialogVisible = true\n    this.dialogPurchaseStatus = status\n    this.purchaseId = id\n    console.log(\"查看详情Id\" + id)\n    const { data } = await queryPurchaseDetailById({ purchaseId: id })\n    this.diaForm = data.data\n    this.row = row || { id: this.$route.query.purchaseId, status: status }\n    if (this.$route.query.purchaseId) {\n      this.$router.push('/purchase')\n    }\n  }\n\n  //审核通过\n  passPurchase(row: any) {\n    this.purchaseId = row.purchaseId\n    this.dialogPurchaseStatus = row.status\n    auditPurchase({\n      purchaseId: this.purchaseId,\n      status: 3,\n      remark: '审核通过'\n    })\n      .then((res) => {\n        if (res.data.code === 1) {\n          this.$message.success(\"审核通过！\")\n          this.purchaseId = ''\n          // this.dialogOrderStatus = 0\n          this.dialogVisible = false\n          this.init(this.purchaseStatus)\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n      .catch((err) => {\n        this.$message.error('请求出错了：' + err.message)\n      })\n  }\n  //审核不通过\n  refusePurchase(row: any) {\n    this.cancelDialogVisible = true\n    this.purchaseId = row.purchaseId\n    this.dialogPurchaseStatus = row.status\n    this.dialogVisible = false\n    this.cancelDialogTitle = '审核不通过'\n    this.refuseReason = ''\n   \n  }\n\n  //打开取消订单弹窗\n  cancelPurchase(row: any) {\n    this.cancelDialogVisible = true\n    this.purchaseId = row.purchaseId\n    this.dialogVisible = false\n    this.cancelReason = ''\n    this.cancelDialogTitle = '取消'\n    this.dialogPurchaseStatus = row.status\n  }\n\n\n  //确认取消或拒绝订单并填写原因\n  confirmCancel(type) {\n    if (!this.cancelReason&&!this.refuseReason) {\n      return this.$message.error(`请选择${this.cancelDialogTitle}原因`)\n    } \n\n    ;(this.cancelDialogTitle === '取消' ? purchaseCancel : auditPurchase)({\n      purchaseId: this.purchaseId,\n      status:this.cancelDialogTitle === '取消' ? 6 : 5,\n      // eslint-disable-next-line standard/computed-property-even-spacing\n      [this.cancelDialogTitle === '取消' ? 'cancelReason' : 'refuseReason']: \n      this.cancelDialogTitle === '取消' ? this.cancelReason : this.refuseReason\n    })\n      .then((res) => {\n        if (res.data.code === 1) {\n          this.$message.success('操作成功')\n          this.cancelDialogVisible = false\n          this.purchaseId = ''\n          // this.dialogOrderStatus = 0\n          this.init(this.purchaseStatus)\n        } else {\n          this.$message.error(res.data.msg)\n        }\n      })\n      .catch((err) => {\n        this.$message.error('请求出错了：' + err.message)\n      })\n  }\n\n  handleClose() {\n    this.dialogVisible = false\n  }\n\n  private handleSizeChange(val: any) {\n    this.pageSize = val\n    this.init(this.purchaseStatus)\n  }\n\n  private handleCurrentChange(val: any) {\n    this.page = val\n    this.init(this.purchaseStatus)\n  }\n}\n"],"sourceRoot":""}]}