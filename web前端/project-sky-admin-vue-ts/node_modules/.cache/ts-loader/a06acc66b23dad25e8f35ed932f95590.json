{"remainingRequest":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\thread-loader\\dist\\cjs.js!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js??ref--13-3!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\purchasingOffer\\purchase\\addPurchase.vue?vue&type=script&lang=ts&","dependencies":[{"path":"G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\purchasingOffer\\purchase\\addPurchase.vue","mtime":1745918056006},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _defineProperty from \"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/defineProperty\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _inherits from \"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/inherits\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { __decorate } from \"tslib\";\nimport { Component, Vue } from 'vue-property-decorator';\nimport HeadLable from '@/components/HeadLable/index.vue';\nimport ImageUpload from '@/components/ImgUpload/index.vue';\nimport { confirmPurchasingForm as _confirmPurchasingForm, queryPurchaseDetailById, submitPurchasingForm } from '@/api/purchase';\n\nvar default_1 =\n/*#__PURE__*/\nfunction (_Vue) {\n  _inherits(default_1, _Vue);\n\n  function default_1() {\n    var _this;\n\n    _classCallCheck(this, default_1);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(default_1).apply(this, arguments));\n    _this.value = '';\n    _this.purchaseId = '';\n    _this.status = '';\n    _this.initiallyNonEmptyFields = []; // 存储初始非空字段名\n\n    _this.ruleForm = {\n      purchaseId: '',\n      equipmentType: '',\n      equipmentName: '',\n      modelNumber: '',\n      specification: '',\n      manufacturer: '',\n      supplier: '',\n      purchaseDate: '',\n      purchaseAmount: '',\n      quantity: '',\n      unit: '',\n      warrantyPeriod: '',\n      expectedLife: '',\n      purchaseDocumentNo: '',\n      contractNo: '',\n      purchasePerson: '',\n      image: '',\n      status: 0,\n      deliveryDate: '',\n      acceptanceDate: '',\n      acceptanceResult: '',\n      acceptanceNotes: '',\n      remark: '',\n      cancelReason: '',\n      refuseReason: '',\n      promptMessage: '',\n      createTime: '',\n      createBy: ''\n    };\n    return _this;\n  }\n\n  _createClass(default_1, [{\n    key: \"created\",\n    value: function created() {\n      // 获取路由参数\n      var purchaseId = this.$route.query.purchaseId;\n      var status = this.$route.query.status; // 确保 purchaseId 是字符串\n\n      if (Array.isArray(purchaseId)) {\n        this.purchaseId = purchaseId[0]; // 如果是数组，取第一个元素\n      } else {\n        this.purchaseId = purchaseId || ''; // 如果是字符串或 undefined，直接赋值\n      } // 确保 status 是字符串\n\n\n      if (Array.isArray(status)) {\n        this.status = status[0] || ''; // 如果是数组，取第一个元素\n      } else {\n        this.status = status || ''; // 如果是字符串或 undefined，直接赋值\n      }\n\n      console.log(this.purchaseId, this.status);\n      this.init();\n    }\n  }, {\n    key: \"init\",\n    value: function () {\n      var _init = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                console.log(this.purchaseId);\n                queryPurchaseDetailById({\n                  purchaseId: this.purchaseId\n                }).then(function (response) {\n                  console.log(\"你好\"); // 将获取到的数据赋值给 ruleForm\n\n                  _this2.ruleForm = response.data.data;\n                  _this2.initiallyNonEmptyFields = Object.keys(_this2.ruleForm).filter(function (key) {\n                    return _this2.ruleForm[key] !== null && _this2.ruleForm[key] !== undefined && _this2.ruleForm[key] !== '';\n                  });\n                  console.log(_this2.ruleForm);\n                }).catch(function (error) {\n                  console.error('获取采购信息失败', error);\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function init() {\n        return _init.apply(this, arguments);\n      }\n\n      return init;\n    }() // 图片上传成功后的回调\n\n  }, {\n    key: \"handleImageSuccess\",\n    value: function handleImageSuccess(response, file) {\n      if (response && response.data && response.data.url) {\n        this.ruleForm.image = response.data.url; // 将返回的图片URL赋值给ruleForm.image\n\n        this.$message.success('图片上传成功');\n      } else {\n        this.$message.error('图片上传失败，请稍后重试');\n      }\n    } // 上传前的校验\n\n  }, {\n    key: \"beforeImageUpload\",\n    value: function beforeImageUpload(file) {\n      var isJPGorPNG = file.type === 'image/jpeg' || file.type === 'image/png';\n      var isLt2M = file.size / 1024 / 1024 < 2;\n\n      if (!isJPGorPNG) {\n        this.$message.error('上传图片只能是 JPG 或 PNG 格式!');\n      }\n\n      if (!isLt2M) {\n        this.$message.error('上传图片大小不能超过 2MB!');\n      }\n\n      return isJPGorPNG && isLt2M;\n    } // 删除套餐菜品\n\n  }, {\n    key: \"delDishHandle\",\n    value: function delDishHandle(index) {}\n  }, {\n    key: \"confirmPurchasingForm\",\n    value: function confirmPurchasingForm(formName) {\n      var _this3 = this;\n\n      ;\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _confirmPurchasingForm({\n            purchaseId: _this3.ruleForm.purchaseId,\n            status: _this3.status,\n            manufacturer: _this3.ruleForm.manufacturer,\n            supplier: _this3.ruleForm.supplier,\n            purchaseAmount: _this3.ruleForm.purchaseAmount,\n            contractNo: _this3.ruleForm.contractNo,\n            image: _this3.ruleForm.image,\n            deliveryDate: _this3.ruleForm.deliveryDate,\n            acceptanceDate: _this3.ruleForm.acceptanceDate,\n            acceptanceResult: _this3.ruleForm.acceptanceResult,\n            acceptanceNotes: _this3.ruleForm.acceptanceNotes,\n            remark: _this3.ruleForm.remark\n          }).then(function (res) {\n            if (res && res.data && res.data.code === 1) {\n              _this3.$message.success('操作成功！');\n\n              _this3.$router.back();\n\n              ;\n\n              _this3.$refs.ruleForm.resetFields();\n\n              _this3.ruleForm = {\n                purchaseId: '',\n                equipmentType: '',\n                equipmentName: '',\n                modelNumber: '',\n                specification: '',\n                manufacturer: '',\n                supplier: '',\n                purchaseDate: '',\n                purchaseAmount: '',\n                quantity: '',\n                unit: '',\n                warrantyPeriod: '',\n                expectedLife: '',\n                purchaseDocumentNo: '',\n                contractNo: '',\n                purchasePerson: '',\n                image: '',\n                deliveryDate: '',\n                acceptanceDate: '',\n                acceptanceResult: '',\n                acceptanceNotes: '',\n                remark: '',\n                status: -2,\n                cancelReason: '',\n                refuseReason: '',\n                promptMessage: '',\n                createTime: '',\n                createBy: '',\n                updateTime: '',\n                updateBy: ''\n              };\n              _this3.status = '';\n              _this3.purchaseId = '';\n            } else {\n              _this3.$message.error(res.data.msg);\n            }\n          }).catch(function (err) {\n            _this3.$message.error('请求出错了：' + err.message);\n          });\n        } else {\n          // 如果所有手动校验都通过，但仍然 valid 为 false，可能是其他字段的问题\n          return _this3.$message.error('表单校验失败，请检查输入内容');\n        }\n      });\n    } //提交审核采购单\n\n  }, {\n    key: \"submitForm\",\n    value: function submitForm(formName) {\n      var _this4 = this;\n\n      ;\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          _this4.ruleForm.status = 2;\n          _this4.ruleForm.purchaseId = _this4.purchaseId;\n\n          var params = _objectSpread({}, _this4.ruleForm);\n\n          submitPurchasingForm(params).then(function (res) {\n            if (res && res.data && res.data.code === 1) {\n              _this4.$message.success('操作成功！');\n\n              _this4.$refs.ruleForm.resetFields();\n\n              _this4.ruleForm = {\n                purchaseId: '',\n                equipmentType: '',\n                equipmentName: '',\n                modelNumber: '',\n                specification: '',\n                manufacturer: '',\n                supplier: '',\n                purchaseDate: '',\n                purchaseAmount: '',\n                quantity: '',\n                unit: '',\n                warrantyPeriod: '',\n                expectedLife: '',\n                purchaseDocumentNo: '',\n                contractNo: '',\n                purchasePerson: '',\n                image: '',\n                deliveryDate: '',\n                acceptanceDate: '',\n                acceptanceResult: '',\n                acceptanceNotes: '',\n                remark: '',\n                status: -2,\n                cancelReason: '',\n                refuseReason: '',\n                promptMessage: '',\n                createTime: '',\n                createBy: '',\n                updateTime: '',\n                updateBy: ''\n              };\n              _this4.status = '';\n              _this4.purchaseId = '';\n            } else {\n              _this4.$message.error(res.data.msg);\n            }\n\n            _this4.$router.back();\n          }).catch(function (err) {\n            _this4.$message.error('请求出错了：' + err.message);\n          });\n        } else {\n          // 如果所有手动校验都通过，但仍然 valid 为 false，可能是其他字段的问题\n          return _this4.$message.error('表单校验失败，请检查输入内容');\n        }\n      });\n    }\n  }, {\n    key: \"rules\",\n    get: function get() {\n      return {\n        equipmentName: {\n          required: true,\n          validator: function validator(rule, value, callback) {\n            if (!value) {\n              callback(new Error('请输入设备名称'));\n            } else {\n              var reg = /^([A-Za-z0-9\\u4e00-\\u9fa5]){2,20}$/;\n\n              if (!reg.test(value)) {\n                callback(new Error('设备名称输入不符，请输入2-20个字符'));\n              } else {\n                callback();\n              }\n            }\n          },\n          trigger: 'blur'\n        },\n        equipmentType: {\n          required: true,\n          message: '请选择设备类型',\n          trigger: 'change'\n        },\n        modelNumber: {\n          required: true,\n          message: '请输入设备型号',\n          trigger: 'blur'\n        },\n        specification: {\n          required: true,\n          message: '请输入规格参数',\n          trigger: 'blur'\n        },\n        manufacturer: {\n          required: true,\n          message: '请输入生产厂家',\n          trigger: 'blur'\n        },\n        supplier: {\n          required: true,\n          message: '请输入供应商',\n          trigger: 'blur'\n        },\n        quantity: {\n          required: true,\n          validator: function validator(rule, value, callback) {\n            if (!value) {\n              callback(new Error('请输入采购数量'));\n            } else {\n              var reg = /^[1-9]\\d*$/; // 正整数\n\n              if (!reg.test(value)) {\n                callback(new Error('采购数量必须是正整数'));\n              } else {\n                callback();\n              }\n            }\n          },\n          trigger: 'blur'\n        },\n        unit: {\n          required: true,\n          message: '请输入单位',\n          trigger: 'blur'\n        },\n        warrantyPeriod: {\n          required: true,\n          validator: function validator(rule, value, callback) {\n            if (!value) {\n              callback();\n            } else {\n              var reg = /^[1-9]\\d*$/; // 正整数\n\n              if (!reg.test(value)) {\n                callback(new Error('保修期必须是正整数'));\n              } else {\n                callback();\n              }\n            }\n          },\n          trigger: 'blur'\n        },\n        expectedLife: {\n          required: true,\n          validator: function validator(rule, value, callback) {\n            if (!value) {\n              callback();\n            } else {\n              var reg = /^[1-9]\\d*$/; // 正整数\n\n              if (!reg.test(value)) {\n                callback(new Error('预期使用寿命必须是正整数'));\n              } else {\n                callback();\n              }\n            }\n          },\n          trigger: 'blur'\n        },\n        remark: {\n          required: true,\n          validator: function validator(rule, value, callback) {\n            if (value && value.length > 100) {\n              callback(new Error('备注不能超过100个字符'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        },\n        purchaseDate: {\n          required: true,\n          message: '请选择采购日期',\n          trigger: 'blur'\n        },\n        purchaseAmount: {\n          required: true,\n          validator: function validator(rule, value, callback) {\n            if (!value) {\n              callback();\n            } else {\n              var reg = /^[0-9]+(\\.[0-9]{1,2})?$/; // 正数且最多两位小数\n\n              if (!reg.test(value)) {\n                callback(new Error('采购金额必须是正数，最多两位小数'));\n              } else {\n                callback();\n              }\n            }\n          },\n          trigger: 'blur'\n        },\n        purchaseDocumentNo: {\n          required: true,\n          message: '请输入采购单据编号',\n          trigger: 'blur'\n        },\n        contractNo: {\n          required: true,\n          message: '请输入合同编号',\n          trigger: 'blur'\n        },\n        purchasePerson: {\n          required: true,\n          message: '请输入采购负责人',\n          trigger: 'blur'\n        },\n        deliveryDate: {\n          required: true,\n          message: '请选择交付日期',\n          trigger: 'blur'\n        },\n        acceptanceDate: {\n          required: true,\n          message: '请选择验收日期',\n          trigger: 'blur'\n        },\n        acceptanceResult: {\n          required: true,\n          message: '请选择验收结果',\n          trigger: 'change'\n        },\n        acceptanceNotes: {\n          required: true,\n          validator: function validator(rule, value, callback) {\n            if (value && value.length > 100) {\n              callback(new Error('验收备注不能超过100个字符'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        },\n        cancelReason: {\n          required: true,\n          validator: function validator(rule, value, callback) {\n            if (value && value.length > 100) {\n              callback(new Error('取消采购单原因不能超过100个字符'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        },\n        refuseReason: {\n          required: true,\n          validator: function validator(rule, value, callback) {\n            if (value && value.length > 100) {\n              callback(new Error('审核拒绝原因不能超过100个字符'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        },\n        promptMessage: {\n          required: true,\n          validator: function validator(rule, value, callback) {\n            if (value && value.length > 100) {\n              callback(new Error('催促通知不能超过100个字符'));\n            } else {\n              callback();\n            }\n          },\n          trigger: 'blur'\n        },\n        createTime: {\n          required: true,\n          message: '请选择创建时间',\n          trigger: 'blur'\n        },\n        createBy: {\n          required: true,\n          message: '请输入创建人',\n          trigger: 'blur'\n        },\n        updateTime: {\n          required: true,\n          message: '请选择更新时间',\n          trigger: 'blur'\n        },\n        updateBy: {\n          required: true,\n          message: '请输入更新人',\n          trigger: 'blur'\n        }\n      };\n    }\n  }, {\n    key: \"isDisabled\",\n    get: function get() {\n      var _this5 = this;\n\n      return function (fieldName) {\n        // 只对初始非空字段禁用\n        return _this5.initiallyNonEmptyFields.includes(fieldName);\n      };\n    }\n  }]);\n\n  return default_1;\n}(Vue);\n\ndefault_1 = __decorate([Component({\n  name: 'addShop',\n  components: {\n    HeadLable: HeadLable,\n    ImageUpload: ImageUpload\n  }\n})], default_1);\nexport default default_1;",{"version":3,"sources":["G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\purchasingOffer\\purchase\\addPurchase.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport HeadLable from '@/components/HeadLable/index.vue'\r\nimport ImageUpload from '@/components/ImgUpload/index.vue'\r\nimport { confirmPurchasingForm, queryPurchaseDetailById, submitPurchasingForm } from '@/api/purchase'\r\nimport { status } from 'nprogress'\r\nimport { number } from 'echarts'\r\n\r\n@Component({\r\n  name: 'addShop',\r\n  components: {\r\n    HeadLable,\r\n    ImageUpload\r\n  }\r\n})\r\nexport default class extends Vue {\r\n  private value: string = ''\r\n  private purchaseId: string = ''\r\n  private status: string = ''\r\n  private initiallyNonEmptyFields: string[] = []; // 存储初始非空字段名\r\n  private ruleForm = {\r\n    purchaseId: '', // 采购ID\r\n    equipmentType: '', // 设备类型\r\n    equipmentName: '', // 设备名称\r\n    modelNumber: '', // 型号\r\n    specification: '', // 规格参数\r\n    manufacturer: '', // 生产厂家\r\n    supplier: '', // 供应商\r\n    purchaseDate: '', // 采购日期\r\n    purchaseAmount: '', // 采购金额\r\n    quantity: '', // 采购数量\r\n    unit: '', // 单位\r\n    warrantyPeriod: '', // 保修期(月)\r\n    expectedLife: '', // 预期使用寿命(月)\r\n    purchaseDocumentNo: '', // 采购单据编号\r\n    contractNo: '', // 合同编号\r\n    purchasePerson: '', // 采购负责人\r\n    image: '', // 采购设备图像\r\n    status: 0,\r\n    deliveryDate: '', // 交付日期\r\n    acceptanceDate: '', // 验收日期\r\n    acceptanceResult: '', // 验收结果\r\n    acceptanceNotes: '', // 验收备注\r\n    remark: '', // 备注\r\n    cancelReason: '', // 取消采购单原因\r\n    refuseReason: '', // 审核拒绝原因\r\n    promptMessage: '', // 催促通知\r\n    createTime: '', // 创建时间\r\n    createBy: '', // 创建人\r\n  }\r\n  get rules() {\r\n    return {\r\n      equipmentName: {\r\n        required: true,\r\n        validator: (rule, value, callback) => {\r\n          if (!value) {\r\n            callback(new Error('请输入设备名称'));\r\n          } else {\r\n            const reg = /^([A-Za-z0-9\\u4e00-\\u9fa5]){2,20}$/;\r\n            if (!reg.test(value)) {\r\n              callback(new Error('设备名称输入不符，请输入2-20个字符'));\r\n            } else {\r\n              callback();\r\n            }\r\n          }\r\n        },\r\n        trigger: 'blur'\r\n      },\r\n      equipmentType: {\r\n        required: true,\r\n        message: '请选择设备类型',\r\n        trigger: 'change'\r\n      },\r\n      modelNumber: {\r\n        required: true,\r\n        message: '请输入设备型号',\r\n        trigger: 'blur'\r\n      },\r\n      specification: {\r\n        required: true,\r\n        message: '请输入规格参数',\r\n        trigger: 'blur'\r\n      },\r\n      manufacturer: {\r\n        required: true,\r\n        message: '请输入生产厂家',\r\n        trigger: 'blur'\r\n      },\r\n      supplier: {\r\n        required: true,\r\n        message: '请输入供应商',\r\n        trigger: 'blur'\r\n      },\r\n      quantity: {\r\n        required: true,\r\n        validator: (rule, value, callback) => {\r\n          if (!value) {\r\n            callback(new Error('请输入采购数量'));\r\n          } else {\r\n            const reg = /^[1-9]\\d*$/; // 正整数\r\n            if (!reg.test(value)) {\r\n              callback(new Error('采购数量必须是正整数'));\r\n            } else {\r\n              callback();\r\n            }\r\n          }\r\n        },\r\n        trigger: 'blur'\r\n      },\r\n      unit: {\r\n        required: true,\r\n        message: '请输入单位',\r\n        trigger: 'blur'\r\n      },\r\n      warrantyPeriod: {\r\n        required: true,\r\n        validator: (rule, value, callback) => {\r\n          if (!value) {\r\n            callback();\r\n          } else {\r\n            const reg = /^[1-9]\\d*$/; // 正整数\r\n            if (!reg.test(value)) {\r\n              callback(new Error('保修期必须是正整数'));\r\n            } else {\r\n              callback();\r\n            }\r\n          }\r\n        },\r\n        trigger: 'blur'\r\n      },\r\n      expectedLife: {\r\n        required: true,\r\n        validator: (rule, value, callback) => {\r\n          if (!value) {\r\n            callback();\r\n          } else {\r\n            const reg = /^[1-9]\\d*$/; // 正整数\r\n            if (!reg.test(value)) {\r\n              callback(new Error('预期使用寿命必须是正整数'));\r\n            } else {\r\n              callback();\r\n            }\r\n          }\r\n        },\r\n        trigger: 'blur'\r\n      },\r\n      remark: {\r\n        required: true,\r\n        validator: (rule, value, callback) => {\r\n          if (value && value.length > 100) {\r\n            callback(new Error('备注不能超过100个字符'));\r\n          } else {\r\n            callback();\r\n          }\r\n        },\r\n        trigger: 'blur'\r\n      },\r\n      purchaseDate: {\r\n        required: true,\r\n        message: '请选择采购日期',\r\n        trigger: 'blur'\r\n      },\r\n      purchaseAmount: {\r\n        required: true,\r\n        validator: (rule, value, callback) => {\r\n          if (!value) {\r\n            callback();\r\n          } else {\r\n            const reg = /^[0-9]+(\\.[0-9]{1,2})?$/; // 正数且最多两位小数\r\n            if (!reg.test(value)) {\r\n              callback(new Error('采购金额必须是正数，最多两位小数'));\r\n            } else {\r\n              callback();\r\n            }\r\n          }\r\n        },\r\n        trigger: 'blur'\r\n      },\r\n      purchaseDocumentNo: {\r\n        required: true,\r\n        message: '请输入采购单据编号',\r\n        trigger: 'blur'\r\n      },\r\n      contractNo: {\r\n        required: true,\r\n        message: '请输入合同编号',\r\n        trigger: 'blur'\r\n      },\r\n      purchasePerson: {\r\n        required: true,\r\n        message: '请输入采购负责人',\r\n        trigger: 'blur'\r\n      },\r\n      deliveryDate: {\r\n        required: true,\r\n        message: '请选择交付日期',\r\n        trigger: 'blur'\r\n      },\r\n      acceptanceDate: {\r\n        required: true,\r\n        message: '请选择验收日期',\r\n        trigger: 'blur'\r\n      },\r\n      acceptanceResult: {\r\n        required: true,\r\n        message: '请选择验收结果',\r\n        trigger: 'change'\r\n      },\r\n      acceptanceNotes: {\r\n        required: true,\r\n        validator: (rule, value, callback) => {\r\n          if (value && value.length > 100) {\r\n            callback(new Error('验收备注不能超过100个字符'));\r\n          } else {\r\n            callback();\r\n          }\r\n        },\r\n        trigger: 'blur'\r\n      },\r\n      cancelReason: {\r\n        required: true,\r\n        validator: (rule, value, callback) => {\r\n          if (value && value.length > 100) {\r\n            callback(new Error('取消采购单原因不能超过100个字符'));\r\n          } else {\r\n            callback();\r\n          }\r\n        },\r\n        trigger: 'blur'\r\n      },\r\n      refuseReason: {\r\n        required: true,\r\n        validator: (rule, value, callback) => {\r\n          if (value && value.length > 100) {\r\n            callback(new Error('审核拒绝原因不能超过100个字符'));\r\n          } else {\r\n            callback();\r\n          }\r\n        },\r\n        trigger: 'blur'\r\n      },\r\n      promptMessage: {\r\n        required: true,\r\n        validator: (rule, value, callback) => {\r\n          if (value && value.length > 100) {\r\n            callback(new Error('催促通知不能超过100个字符'));\r\n          } else {\r\n            callback();\r\n          }\r\n        },\r\n        trigger: 'blur'\r\n      },\r\n      createTime: {\r\n        required: true,\r\n        message: '请选择创建时间',\r\n        trigger: 'blur'\r\n      },\r\n      createBy: {\r\n        required: true,\r\n        message: '请输入创建人',\r\n        trigger: 'blur'\r\n      },\r\n      updateTime: {\r\n        required: true,\r\n        message: '请选择更新时间',\r\n        trigger: 'blur'\r\n      },\r\n      updateBy: {\r\n        required: true,\r\n        message: '请输入更新人',\r\n        trigger: 'blur'\r\n      }\r\n    };\r\n  }\r\n  get isDisabled() {\r\n    return (fieldName: string) => {\r\n      // 只对初始非空字段禁用\r\n      return this.initiallyNonEmptyFields.includes(fieldName);\r\n    };\r\n  }\r\n\r\n  created() {\r\n    // 获取路由参数\r\n    const purchaseId = this.$route.query.purchaseId;\r\n    const status = this.$route.query.status;\r\n\r\n    // 确保 purchaseId 是字符串\r\n    if (Array.isArray(purchaseId)) {\r\n      this.purchaseId = purchaseId[0]; // 如果是数组，取第一个元素\r\n    } else {\r\n      this.purchaseId = purchaseId || ''; // 如果是字符串或 undefined，直接赋值\r\n    }\r\n\r\n    // 确保 status 是字符串\r\n    if (Array.isArray(status)) {\r\n      this.status = status[0] || ''; // 如果是数组，取第一个元素\r\n    } else {\r\n      this.status = status || ''; // 如果是字符串或 undefined，直接赋值\r\n    }\r\n    console.log(this.purchaseId, this.status);\r\n    this.init();\r\n  }\r\n\r\n  private async init() {\r\n    console.log(this.purchaseId);\r\n    queryPurchaseDetailById({ purchaseId: this.purchaseId }).then((response) => {\r\n      console.log(\"你好\");\r\n      // 将获取到的数据赋值给 ruleForm\r\n      this.ruleForm = response.data.data;\r\n      this.initiallyNonEmptyFields = Object.keys(this.ruleForm).filter(\r\n        key => this.ruleForm[key] !== null &&\r\n          this.ruleForm[key] !== undefined &&\r\n          this.ruleForm[key] !== ''\r\n      );\r\n      console.log(this.ruleForm);\r\n    }).catch((error) => {\r\n      console.error('获取采购信息失败', error);\r\n    });\r\n  }\r\n  // 图片上传成功后的回调\r\n  private handleImageSuccess(response: any, file: any) {\r\n    if (response && response.data && response.data.url) {\r\n      this.ruleForm.image = response.data.url; // 将返回的图片URL赋值给ruleForm.image\r\n      this.$message.success('图片上传成功');\r\n    } else {\r\n      this.$message.error('图片上传失败，请稍后重试');\r\n    }\r\n  }\r\n\r\n  // 上传前的校验\r\n  private beforeImageUpload(file: File) {\r\n    const isJPGorPNG = file.type === 'image/jpeg' || file.type === 'image/png';\r\n    const isLt2M = file.size / 1024 / 1024 < 2;\r\n\r\n    if (!isJPGorPNG) {\r\n      this.$message.error('上传图片只能是 JPG 或 PNG 格式!');\r\n    }\r\n    if (!isLt2M) {\r\n      this.$message.error('上传图片大小不能超过 2MB!');\r\n    }\r\n    return isJPGorPNG && isLt2M;\r\n  }\r\n  // 删除套餐菜品\r\n  delDishHandle(index: any) {\r\n\r\n  }\r\n\r\n  public confirmPurchasingForm(formName: any) {\r\n    ; (this.$refs[formName] as any).validate((valid: any) => {\r\n      if (valid) {\r\n\r\n        confirmPurchasingForm({\r\n          purchaseId: this.ruleForm.purchaseId,\r\n          status: this.status,\r\n          manufacturer: this.ruleForm.manufacturer,\r\n          supplier: this.ruleForm.supplier,\r\n          purchaseAmount: this.ruleForm.purchaseAmount,\r\n          contractNo: this.ruleForm.contractNo,\r\n          image: this.ruleForm.image,\r\n          deliveryDate: this.ruleForm.deliveryDate,\r\n          acceptanceDate: this.ruleForm.acceptanceDate,\r\n          acceptanceResult: this.ruleForm.acceptanceResult,\r\n          acceptanceNotes: this.ruleForm.acceptanceNotes,\r\n          remark: this.ruleForm.remark\r\n        })\r\n          .then(res => {\r\n            if (res && res.data && res.data.code === 1) {\r\n              this.$message.success('操作成功！')\r\n              this.$router.back();\r\n\r\n                ; (this as any).$refs.ruleForm.resetFields()\r\n              this.ruleForm = {\r\n                purchaseId: '', // 采购ID\r\n                equipmentType: '', // 设备类型\r\n                equipmentName: '', // 设备名称\r\n                modelNumber: '', // 型号\r\n                specification: '', // 规格参数\r\n                manufacturer: '', // 生产厂家\r\n                supplier: '', // 供应商\r\n                purchaseDate: '', // 采购日期\r\n                purchaseAmount: '', // 采购金额\r\n                quantity: '', // 采购数量\r\n                unit: '', // 单位\r\n                warrantyPeriod: '', // 保修期(月)\r\n                expectedLife: '', // 预期使用寿命(月)\r\n                purchaseDocumentNo: '', // 采购单据编号\r\n                contractNo: '', // 合同编号\r\n                purchasePerson: '', // 采购负责人\r\n                image: '', // 采购设备图像\r\n                deliveryDate: '', // 交付日期\r\n                acceptanceDate: '', // 验收日期\r\n                acceptanceResult: '', // 验收结果\r\n                acceptanceNotes: '', // 验收备注\r\n                remark: '', // 备注\r\n                status: -2,\r\n                cancelReason: '', // 取消采购单原因\r\n                refuseReason: '', // 审核拒绝原因\r\n                promptMessage: '', // 催促通知\r\n                createTime: '', // 创建时间\r\n                createBy: '', // 创建人\r\n                updateTime: '', // 更新时间\r\n                updateBy: '', // 更新人\r\n              } as any\r\n              this.status = ''\r\n              this.purchaseId = ''\r\n            } else {\r\n              this.$message.error(res.data.msg)\r\n            }\r\n          })\r\n          .catch(err => {\r\n            this.$message.error('请求出错了：' + err.message)\r\n          })\r\n      } else {\r\n\r\n        // 如果所有手动校验都通过，但仍然 valid 为 false，可能是其他字段的问题\r\n\r\n        return this.$message.error('表单校验失败，请检查输入内容');\r\n      }\r\n    })\r\n\r\n  }\r\n\r\n\r\n\r\n  //提交审核采购单\r\n  public submitForm(formName: any) {\r\n    ; (this.$refs[formName] as any).validate((valid: any) => {\r\n      if (valid) {\r\n        this.ruleForm.status = 2;\r\n        this.ruleForm.purchaseId = this.purchaseId;\r\n        let params = { ...this.ruleForm } as any\r\n\r\n        submitPurchasingForm( params )\r\n          .then(res => {\r\n            if (res && res.data && res.data.code === 1) {\r\n              this.$message.success('操作成功！')\r\n\r\n                ; (this as any).$refs.ruleForm.resetFields()\r\n              this.ruleForm = {\r\n                purchaseId: '', // 采购ID\r\n                equipmentType: '', // 设备类型\r\n                equipmentName: '', // 设备名称\r\n                modelNumber: '', // 型号\r\n                specification: '', // 规格参数\r\n                manufacturer: '', // 生产厂家\r\n                supplier: '', // 供应商\r\n                purchaseDate: '', // 采购日期\r\n                purchaseAmount: '', // 采购金额\r\n                quantity: '', // 采购数量\r\n                unit: '', // 单位\r\n                warrantyPeriod: '', // 保修期(月)\r\n                expectedLife: '', // 预期使用寿命(月)\r\n                purchaseDocumentNo: '', // 采购单据编号\r\n                contractNo: '', // 合同编号\r\n                purchasePerson: '', // 采购负责人\r\n                image: '', // 采购设备图像\r\n                deliveryDate: '', // 交付日期\r\n                acceptanceDate: '', // 验收日期\r\n                acceptanceResult: '', // 验收结果\r\n                acceptanceNotes: '', // 验收备注\r\n                remark: '', // 备注\r\n                status: -2,\r\n                cancelReason: '', // 取消采购单原因\r\n                refuseReason: '', // 审核拒绝原因\r\n                promptMessage: '', // 催促通知\r\n                createTime: '', // 创建时间\r\n                createBy: '', // 创建人\r\n                updateTime: '', // 更新时间\r\n                updateBy: '', // 更新人\r\n              } as any\r\n              this.status = ''\r\n              this.purchaseId = ''\r\n            } else {\r\n              this.$message.error(res.data.msg)\r\n            }\r\n            this.$router.back();\r\n          })\r\n          .catch(err => {\r\n            this.$message.error('请求出错了：' + err.message)\r\n          })\r\n      } else {\r\n\r\n        // 如果所有手动校验都通过，但仍然 valid 为 false，可能是其他字段的问题\r\n\r\n        return this.$message.error('表单校验失败，请检查输入内容');\r\n      }\r\n    })\r\n  }\r\n}\r\n"],"sourceRoot":""}]}