{"remainingRequest":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\layout\\components\\Navbar\\index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"G:\\device-management\\project-sky-admin-vue-ts\\src\\layout\\components\\Navbar\\index.vue","mtime":1748612658507},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.regexp.to-string\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/inherits\"));\n\nvar _tslib = require(\"tslib\");\n\nvar _vuePropertyDecorator = require(\"vue-property-decorator\");\n\nvar _app = require(\"@/store/modules/app\");\n\nvar _user = require(\"@/store/modules/user\");\n\nvar _index = _interopRequireDefault(require(\"@/components/Breadcrumb/index.vue\"));\n\nvar _index2 = _interopRequireDefault(require(\"@/components/Hamburger/index.vue\"));\n\nvar _users = require(\"@/api/users\");\n\nvar _jsCookie = _interopRequireDefault(require(\"js-cookie\"));\n\nvar _inform = require(\"@/api/inform\");\n\nvar _password = _interopRequireDefault(require(\"../components/password.vue\"));\n\n// 接口\n// 修改密码弹层\nvar default_1 =\n/*#__PURE__*/\nfunction (_Vue) {\n  (0, _inherits2.default)(default_1, _Vue);\n\n  function default_1() {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, default_1);\n    _this = (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(default_1).apply(this, arguments));\n    _this.storeId = _this.getStoreId;\n    _this.restKey = 0;\n    _this.websocket = null;\n    _this.newOrder = '';\n    _this.message = '';\n    _this.audioIsPlaying = false;\n    _this.audioPaused = false;\n    _this.statusValue = true;\n    _this.shopShow = false;\n    _this.dialogVisible = false;\n    _this.status = 1;\n    _this.setStatus = 1;\n    _this.dialogFormVisible = false;\n    _this.ountUnread = 0;\n    _this.roleId = parseInt(localStorage.getItem('roleId') || '0'); // 从 localStorage 中读取\n\n    _this.isDarkTheme = false;\n    _this.helpDialogVisible = false;\n    _this.userInfoDialogVisible = false;\n    _this.userRoleName = '管理员'; // 示例数据，实际应从用户信息中获取\n\n    _this.userDepartment = '技术部'; // 示例数据，实际应从用户信息中获取\n\n    _this.lastLoginTime = new Date().toLocaleString(); // 示例数据，实际应从用户信息中获取\n\n    return _this;\n  }\n\n  (0, _createClass2.default)(default_1, [{\n    key: \"getuserInfo\",\n    value: function getuserInfo() {\n      return _user.UserModule.userInfo;\n    }\n  }, {\n    key: \"mounted\",\n    value: function mounted() {\n      document.addEventListener('click', this.handleClose);\n      this.getStatus();\n      this.getCountUnread(); // 获取未读消息数量\n    }\n  }, {\n    key: \"created\",\n    value: function created() {\n      this.webSocket();\n    }\n  }, {\n    key: \"onload\",\n    value: function onload() {}\n  }, {\n    key: \"destroyed\",\n    value: function destroyed() {\n      this.websocket.close(); //离开路由之后断开websocket连接\n    } // 添加新订单提示弹窗\n\n  }, {\n    key: \"webSocket\",\n    value: function webSocket() {// ... 现有代码保持不变 ...\n      // ... existing code ...\n    }\n  }, {\n    key: \"toggleSideBar\",\n    value: function toggleSideBar() {\n      _app.AppModule.ToggleSideBar(false);\n    } // 退出\n\n  }, {\n    key: \"logout\",\n    value: function () {\n      var _logout = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.$store.dispatch('LogOut').then(function () {\n                  _this2.$router.replace({\n                    path: '/login'\n                  });\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function logout() {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }() // 获取未读消息\n\n  }, {\n    key: \"getCountUnread\",\n    value: function () {\n      var _getCountUnread2 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        var _ref, data;\n\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return (0, _inform.getCountUnread)();\n\n              case 2:\n                _ref = _context2.sent;\n                data = _ref.data;\n\n                if (data.code === 1) {\n                  this.ountUnread = data.data;\n\n                  _app.AppModule.StatusNumber(data.data);\n                } else {\n                  this.$message.error(data.msg);\n                }\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function getCountUnread() {\n        return _getCountUnread2.apply(this, arguments);\n      }\n\n      return getCountUnread;\n    }() // 营业状态\n\n  }, {\n    key: \"getStatus\",\n    value: function () {\n      var _getStatus2 = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var _ref2, data;\n\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return (0, _users.getStatus)();\n\n              case 2:\n                _ref2 = _context3.sent;\n                data = _ref2.data;\n                this.status = data.data;\n                this.setStatus = this.status;\n\n              case 6:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function getStatus() {\n        return _getStatus2.apply(this, arguments);\n      }\n\n      return getStatus;\n    }() // 下拉菜单显示\n\n  }, {\n    key: \"toggleShow\",\n    value: function toggleShow() {\n      this.shopShow = true;\n    } // 下拉菜单隐藏\n\n  }, {\n    key: \"mouseLeaves\",\n    value: function mouseLeaves() {\n      this.shopShow = false;\n    } // 触发空白处下来菜单关闭\n\n  }, {\n    key: \"handleClose\",\n    value: function handleClose() {} // clearTimeout(this.leave)\n    // this.shopShow = false\n    // 跳转到消息中心\n\n  }, {\n    key: \"goToMessageCenter\",\n    value: function goToMessageCenter() {\n      this.$router.push('/sectionLeader/inform');\n      this.ountUnread = 0; // 清空未读消息数量\n    } // 修改密码\n\n  }, {\n    key: \"handlePwd\",\n    value: function handlePwd() {\n      this.dialogFormVisible = true;\n    } // 关闭密码编辑弹层\n\n  }, {\n    key: \"handlePwdClose\",\n    value: function handlePwdClose() {\n      this.dialogFormVisible = false;\n    } // 切换主题\n\n  }, {\n    key: \"toggleTheme\",\n    value: function toggleTheme() {\n      this.isDarkTheme = !this.isDarkTheme; // 这里可以添加实际的主题切换逻辑\n\n      document.body.classList.toggle('dark-theme');\n      this.$message.success(\"\\u5DF2\\u5207\\u6362\\u5230\".concat(this.isDarkTheme ? '深色' : '浅色', \"\\u6A21\\u5F0F\"));\n    } // 打开帮助中心\n\n  }, {\n    key: \"openHelpCenter\",\n    value: function openHelpCenter() {\n      this.helpDialogVisible = true;\n    } // 查看个人信息\n\n  }, {\n    key: \"viewUserInfo\",\n    value: function viewUserInfo() {\n      this.userInfoDialogVisible = true;\n    }\n  }, {\n    key: \"sidebar\",\n    get: function get() {\n      return _app.AppModule.sidebar;\n    }\n  }, {\n    key: \"device\",\n    get: function get() {\n      return _app.AppModule.device.toString();\n    }\n  }, {\n    key: \"realName\",\n    get: function get() {\n      return _user.UserModule.userInfo.realName ? _user.UserModule.userInfo.realName : JSON.parse(_jsCookie.default.get('user_info')).realName;\n    }\n  }, {\n    key: \"getStoreId\",\n    get: function get() {\n      var storeId = '';\n\n      if (_user.UserModule.storeId) {\n        storeId = _user.UserModule.storeId;\n      } else if (_user.UserModule.userInfo.stores != null) {\n        storeId = _user.UserModule.userInfo.stores[0].storeId;\n      }\n\n      return storeId;\n    }\n  }]);\n  return default_1;\n}(_vuePropertyDecorator.Vue);\n\ndefault_1 = (0, _tslib.__decorate)([(0, _vuePropertyDecorator.Component)({\n  name: 'Navbar',\n  components: {\n    Breadcrumb: _index.default,\n    Hamburger: _index2.default,\n    Password: _password.default\n  }\n})], default_1);\nvar _default = default_1;\nexports.default = _default;",{"version":3,"sources":["G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\layout\\components\\Navbar\\index.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from 'vue-property-decorator'\nimport { AppModule } from '@/store/modules/app'\nimport { UserModule } from '@/store/modules/user'\nimport Breadcrumb from '@/components/Breadcrumb/index.vue'\nimport Hamburger from '@/components/Hamburger/index.vue'\nimport { getStatus, setStatus } from '@/api/users'\nimport Cookies from 'js-cookie'\nimport { debounce, throttle } from '@/utils/common'\nimport { setNewData, getNewData } from '@/utils/cookies'\n\n// 接口\nimport { getCountUnread } from '@/api/inform'\n// 修改密码弹层\nimport Password from '../components/password.vue'\n\n@Component({\n  name: 'Navbar',\n  components: {\n    Breadcrumb,\n    Hamburger,\n    Password,\n  },\n})\nexport default class extends Vue {\n  private storeId = this.getStoreId\n  private restKey: number = 0\n  private websocket = null\n  private newOrder = ''\n  private message = ''\n  private audioIsPlaying = false\n  private audioPaused = false\n  private statusValue = true\n  private audioUrl: './../../../assets/preview.mp3'\n  private shopShow = false\n  private dialogVisible = false\n  private status = 1\n  private setStatus = 1\n  private dialogFormVisible = false\n  private ountUnread = 0\n  private roleId =  parseInt(localStorage.getItem('roleId') || '0'); // 从 localStorage 中读取\n  private isDarkTheme = false\n  private helpDialogVisible = false\n  private userInfoDialogVisible = false\n  private userRoleName = '管理员' // 示例数据，实际应从用户信息中获取\n  private userDepartment = '技术部' // 示例数据，实际应从用户信息中获取\n  private lastLoginTime = new Date().toLocaleString() // 示例数据，实际应从用户信息中获取\n  \n  get sidebar() {\n    return AppModule.sidebar\n  }\n\n  get device() {\n    return AppModule.device.toString()\n  }\n\n  getuserInfo() {\n    return UserModule.userInfo\n  }\n\n  get realName() {\n    return (UserModule.userInfo as any).realName\n      ? (UserModule.userInfo as any).realName\n      : JSON.parse(Cookies.get('user_info') as any).realName\n  }\n\n  get getStoreId() {\n    let storeId = ''\n    if (UserModule.storeId) {\n      storeId = UserModule.storeId\n    } else if ((UserModule.userInfo as any).stores != null) {\n      storeId = (UserModule.userInfo as any).stores[0].storeId\n    }\n    return storeId\n  }\n  \n  mounted() {\n    document.addEventListener('click', this.handleClose)\n    this.getStatus()\n    this.getCountUnread() // 获取未读消息数量\n  }\n  \n  created() {\n    this.webSocket()\n  }\n  \n  onload() {\n  }\n  \n  destroyed() {\n    this.websocket.close() //离开路由之后断开websocket连接\n  }\n\n  // 添加新订单提示弹窗\n  webSocket() {\n    // ... 现有代码保持不变 ...\n    // ... existing code ...\n  }\n\n  private toggleSideBar() {\n    AppModule.ToggleSideBar(false)\n  }\n  \n  // 退出\n  private async logout() {\n    this.$store.dispatch('LogOut').then(() => {\n      this.$router.replace({ path: '/login' })\n    })\n  }\n  \n  // 获取未读消息\n  async getCountUnread() {\n    const { data } = await getCountUnread()\n    if (data.code === 1) {\n      this.ountUnread = data.data\n      AppModule.StatusNumber(data.data)\n    } else {\n      this.$message.error(data.msg)\n    }\n  }\n  \n  // 营业状态\n  async getStatus() {\n    const { data } = await getStatus()\n    this.status = data.data\n    this.setStatus = this.status\n  }\n  \n  // 下拉菜单显示\n  toggleShow() {\n    this.shopShow = true\n  }\n  \n  // 下拉菜单隐藏\n  mouseLeaves() {\n    this.shopShow = false\n  }\n  \n  // 触发空白处下来菜单关闭\n  handleClose() {\n    // clearTimeout(this.leave)\n    // this.shopShow = false\n  }\n  \n  // 跳转到消息中心\n  goToMessageCenter() {\n    this.$router.push('/sectionLeader/inform');\n    this.ountUnread = 0; // 清空未读消息数量\n  }\n  \n  // 修改密码\n  handlePwd() {\n    this.dialogFormVisible = true\n  }\n  \n  // 关闭密码编辑弹层\n  handlePwdClose() {\n    this.dialogFormVisible = false\n  }\n  \n  // 切换主题\n  toggleTheme() {\n    this.isDarkTheme = !this.isDarkTheme;\n    // 这里可以添加实际的主题切换逻辑\n    document.body.classList.toggle('dark-theme');\n    this.$message.success(`已切换到${this.isDarkTheme ? '深色' : '浅色'}模式`);\n  }\n  \n  // 打开帮助中心\n  openHelpCenter() {\n    this.helpDialogVisible = true;\n  }\n  \n  // 查看个人信息\n  viewUserInfo() {\n    this.userInfoDialogVisible = true;\n  }\n}\n"],"sourceRoot":""}]}