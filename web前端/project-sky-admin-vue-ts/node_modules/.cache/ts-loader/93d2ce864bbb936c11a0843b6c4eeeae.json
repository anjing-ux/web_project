{"remainingRequest":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\layout\\components\\Sidebar\\index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"G:\\device-management\\project-sky-admin-vue-ts\\src\\layout\\components\\Sidebar\\index.vue","mtime":1748231781087},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es7.object.get-own-property-descriptors\");\n\nrequire(\"core-js/modules/es6.object.keys\");\n\nvar _defineProperty2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/defineProperty\"));\n\nrequire(\"core-js/modules/es6.array.find\");\n\nvar _toConsumableArray2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/toConsumableArray\"));\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nrequire(\"core-js/modules/es6.function.name\");\n\nrequire(\"core-js/modules/es6.regexp.replace\");\n\nrequire(\"regenerator-runtime/runtime\");\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/createClass\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/getPrototypeOf\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"G:\\\\device-management\\\\project-sky-admin-vue-ts\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/inherits\"));\n\nvar _tslib = require(\"tslib\");\n\nvar _vuePropertyDecorator = require(\"vue-property-decorator\");\n\nvar _app = require(\"@/store/modules/app\");\n\nvar _user = require(\"@/store/modules/user\");\n\nvar _SidebarItem = _interopRequireDefault(require(\"./SidebarItem.vue\"));\n\nvar _variables = _interopRequireDefault(require(\"@/styles/_variables.scss\"));\n\nvar _jsCookie = _interopRequireDefault(require(\"js-cookie\"));\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { (0, _defineProperty2.default)(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar default_1 =\n/*#__PURE__*/\nfunction (_Vue) {\n  (0, _inherits2.default)(default_1, _Vue);\n\n  function default_1() {\n    (0, _classCallCheck2.default)(this, default_1);\n    return (0, _possibleConstructorReturn2.default)(this, (0, _getPrototypeOf2.default)(default_1).apply(this, arguments));\n  }\n\n  (0, _createClass2.default)(default_1, [{\n    key: \"logout\",\n    // 登出方法\n    value: function () {\n      var _logout = (0, _asyncToGenerator2.default)(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var _this = this;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.$store.dispatch('LogOut').then(function () {\n                  _this.$router.replace({\n                    path: '/login'\n                  }); // 跳转到登录页面\n\n                });\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function logout() {\n        return _logout.apply(this, arguments);\n      }\n\n      return logout;\n    }()\n  }, {\n    key: \"roleId\",\n    // 用户角色\n    get: function get() {\n      console.log(\"角色登录id为\");\n      console.log(\"角色登录id为\" + _user.UserModule.roleId);\n      return _user.UserModule.roleId; // 从 Vuex 的 UserModule 中获取用户角色\n    } // 当前用户的名称\n\n  }, {\n    key: \"name\",\n    get: function get() {\n      return _user.UserModule.userInfo.name ? _user.UserModule.userInfo.name : JSON.parse(_jsCookie.default.get('user_info')).name; // 从 Vuex 或 Cookie 中获取用户名\n    }\n  }, {\n    key: \"defOpen\",\n    get: function get() {\n      var _this2 = this;\n\n      console.log(\"角色登录id为\", this.roleId);\n      var path = ['/']; // 默认路径\n\n      this.routes.forEach(function (n, i) {\n        if (n.meta && n.meta.roleId === _this2.roleId) {\n          path.splice(0, 1, n.path); // 根据用户角色动态设置默认展开路径\n        }\n      });\n      console.log(\"默认展开路径为\", path);\n      return path;\n    } // 默认激活的菜单路径\n\n  }, {\n    key: \"defAct\",\n    get: function get() {\n      return this.$route.path; // 当前路由路径\n    } // 获取侧边栏的状态\n\n  }, {\n    key: \"sidebar\",\n    get: function get() {\n      return _app.AppModule.sidebar; // 从 Vuex 的 AppModule 中获取侧边栏状态\n    }\n  }, {\n    key: \"routes\",\n    get: function get() {\n      // 获取所有路由配置\n      var routes = JSON.parse(JSON.stringify((0, _toConsumableArray2.default)(this.$router.options.routes)));\n      console.log('1-=-=routes=-=-=', routes); // 获取当前用户的角色ID\n\n      var currentRoleId = this.roleId;\n      console.log('2-=-=currentRoleId=-=-=', currentRoleId);\n      var menu = []; // 找到工区长对应的顶级路由\n\n      if (currentRoleId === 1) {\n        menu = routes.find(function (item) {\n          return item.path === '/purchasingOffer';\n        });\n      } else if (currentRoleId === 2) {\n        menu = routes.find(function (item) {\n          return item.path === '/sectionLeader';\n        });\n      } else if (currentRoleId === 3) {\n        menu = routes.find(function (item) {\n          return item.path === '/teamLeader';\n        });\n      } else if (currentRoleId === 4) {\n        menu = routes.find(function (item) {\n          return item.path === '/WarehouseManager';\n        });\n      } else if (currentRoleId === 5) {\n        menu = routes.find(function (item) {\n          return item.path === '/director';\n        });\n      } // 如果找到工区长对应的顶级路由，并且有子路由\n\n\n      var menuList = [];\n\n      if (menu && menu.children) {\n        // 为每个子路由的 path 前缀加上顶级路由的路径\n        menuList = menu.children.map(function (child) {\n          return _objectSpread({}, child, {\n            path: \"\".concat(menu.path, \"/\").concat(child.path) // 动态拼接路径\n\n          });\n        });\n      }\n\n      console.log('3-=-=menuList=-=-=', menuList);\n      return menuList;\n    } // 获取样式变量\n\n  }, {\n    key: \"variables\",\n    get: function get() {\n      return _variables.default; // 从 SCSS 文件中导入的样式变量\n    } // 判断侧边栏是否折叠\n\n  }, {\n    key: \"isCollapse\",\n    get: function get() {\n      return !this.sidebar.opened; // 根据侧边栏状态判断是否折叠\n    }\n  }]);\n  return default_1;\n}(_vuePropertyDecorator.Vue);\n\ndefault_1 = (0, _tslib.__decorate)([(0, _vuePropertyDecorator.Component)({\n  name: 'SideBar',\n  components: {\n    SidebarItem: _SidebarItem.default\n  }\n})], default_1);\nvar _default = default_1;\nexports.default = _default;",{"version":3,"sources":["G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\layout\\components\\Sidebar\\index.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator';\r\nimport { AppModule } from '@/store/modules/app';\r\nimport { UserModule } from '@/store/modules/user';\r\nimport SidebarItem from './SidebarItem.vue';\r\nimport variables from '@/styles/_variables.scss';\r\nimport { getSidebarStatus, setSidebarStatus } from '@/utils/cookies';\r\nimport Cookies from 'js-cookie';\r\n\r\n@Component({\r\n  name: 'SideBar',\r\n  components: {\r\n    SidebarItem\r\n  }\r\n})\r\nexport default class extends Vue {\r\n  // 用户角色\r\n  get roleId() {\r\n    console.log(\"角色登录id为\");\r\n    console.log(\"角色登录id为\" + UserModule.roleId);\r\n    return UserModule.roleId; // 从 Vuex 的 UserModule 中获取用户角色\r\n  }\r\n\r\n  // 当前用户的名称\r\n  get name() {\r\n    return (UserModule.userInfo as any).name\r\n      ? (UserModule.userInfo as any).name\r\n      : JSON.parse(Cookies.get('user_info') as any).name; // 从 Vuex 或 Cookie 中获取用户名\r\n  }\r\n\r\n  get defOpen() {\r\n  console.log(\"角色登录id为\", this.roleId);\r\n  let path = ['/']; // 默认路径\r\n  this.routes.forEach((n: any, i: number) => {\r\n    if (n.meta && n.meta.roleId === this.roleId) {\r\n      path.splice(0, 1, n.path); // 根据用户角色动态设置默认展开路径\r\n    }\r\n  });\r\n  console.log(\"默认展开路径为\", path);\r\n  return path;\r\n}\r\n\r\n  // 默认激活的菜单路径\r\n  get defAct() {\r\n    return this.$route.path; // 当前路由路径\r\n  }\r\n\r\n  // 获取侧边栏的状态\r\n  get sidebar() {\r\n    return AppModule.sidebar; // 从 Vuex 的 AppModule 中获取侧边栏状态\r\n  }\r\n\r\n  get routes() {\r\n  // 获取所有路由配置\r\n  let routes = JSON.parse(JSON.stringify([...(this.$router as any).options.routes]));\r\n  console.log('1-=-=routes=-=-=', routes);\r\n\r\n  // 获取当前用户的角色ID\r\n  const currentRoleId = this.roleId;\r\n  console.log('2-=-=currentRoleId=-=-=', currentRoleId);\r\n\r\n  let menu: any = [];\r\n  // 找到工区长对应的顶级路由\r\n  if (currentRoleId === 1) {\r\n    menu = routes.find(item => item.path === '/purchasingOffer');\r\n  }else if (currentRoleId === 2) {\r\n    menu = routes.find(item => item.path === '/sectionLeader');\r\n  }else if (currentRoleId === 3) {\r\n    menu = routes.find(item => item.path === '/teamLeader');\r\n  }else if (currentRoleId === 4) {\r\n    menu = routes.find(item => item.path === '/WarehouseManager');\r\n  }else if (currentRoleId === 5) {\r\n    menu = routes.find(item => item.path === '/director');\r\n  }\r\n  \r\n\r\n  // 如果找到工区长对应的顶级路由，并且有子路由\r\n  let menuList = [];\r\n  if (menu && menu.children) {\r\n    // 为每个子路由的 path 前缀加上顶级路由的路径\r\n    menuList = menu.children.map(child => {\r\n      return {\r\n        ...child,\r\n        path: `${menu.path}/${child.path}` // 动态拼接路径\r\n      };\r\n    });\r\n  }\r\n\r\n  console.log('3-=-=menuList=-=-=', menuList);\r\n  return menuList;\r\n}\r\n\r\n\r\n\r\n  // 获取样式变量\r\n  get variables() {\r\n    return variables; // 从 SCSS 文件中导入的样式变量\r\n  }\r\n\r\n  // 判断侧边栏是否折叠\r\n  get isCollapse() {\r\n    return !this.sidebar.opened; // 根据侧边栏状态判断是否折叠\r\n  }\r\n\r\n  // 登出方法\r\n  private async logout() {\r\n    this.$store.dispatch('LogOut').then(() => { // 调用 Vuex 的 LogOut 动作\r\n      this.$router.replace({ path: '/login' }); // 跳转到登录页面\r\n    });\r\n  }\r\n}\r\n"],"sourceRoot":""}]}