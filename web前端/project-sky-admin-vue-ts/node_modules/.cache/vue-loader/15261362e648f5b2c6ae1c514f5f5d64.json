{"remainingRequest":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\director\\deviceReview\\faultClear\\faultClear.vue?vue&type=template&id=28119f47&scoped=true&","dependencies":[{"path":"G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\director\\deviceReview\\faultClear\\faultClear.vue","mtime":1748956014708},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n  <div class=\"dashboard-container\">\n    <TabChange :order-statics=\"orderStatics\" :default-activity=\"defaultActivity\" @tabChange=\"change\" />\n    <div class=\"container\" :class=\"{ hContainer: tableData.length }\">\n      <!-- 搜索项 -->\n      <div class=\"tableBar\">\n        <label style=\"margin-right: 10px\">设备名称：</label>\n        <el-input v-model=\"deviceName\" placeholder=\"请填写设备名称：\" style=\"width: 15%\" clearable\n          @clear=\"init(faultStatus)\" @keyup.enter.native=\"initFun(faultStatus)\" />\n        <label style=\"margin-right: 10px; margin-left: 20px\">故障类型：</label>\n        <el-select v-model=\"faultType\" style=\"width: 14%\" placeholder=\"请选择\" clearable @clear=\"init\">\n          <el-option label=\"一般\" value=\"1\" />\n          <el-option label=\"重要\" value=\"2\" />\n          <el-option label=\"紧急\" value=\"3\" />\n        </el-select>\n        <label style=\"margin-left: 20px\">报修时间：</label>\n        <el-date-picker v-model=\"valueTime\" clearable value-format=\"yyyy-MM-dd HH:mm:ss\" range-separator=\"至\"\n          :default-time=\"['00:00:00', '23:59:59']\" type=\"daterange\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"\n          style=\"width: 25%; margin-left: 10px\" @clear=\"init(faultStatus)\" />\n        <el-button class=\"normal-btn continue\" @click=\"init(faultStatus, true)\">\n          查询\n        </el-button>\n      </div>\n      <el-table v-if=\"tableData.length\" :data=\"tableData\" stripe class=\"tableBox\">\n        <el-table-column key=\"faultCode\" prop=\"faultCode\" label=\"故障编号\" />\n        <el-table-column key=\"deviceName\" prop=\"deviceName\" label=\"设备名称\" />\n        <el-table-column key=\"faultType\" prop=\"faultType\" label=\"故障类型\">\n          <template slot-scope=\"{ row }\">\n            <span>{{ getFaultType(row) }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column key=\"faultLevel\" prop=\"faultLevel\" label=\"故障等级\">\n          <template slot-scope=\"{ row }\">\n            <span>{{ getFaultLevel(row) }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column key=\"verifyStep\" prop=\"verifyStep\" label=\"状态信息\">\n          <template slot-scope=\"{ row }\">\n            <span>{{ getFaultStatus(row) }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column prop=\"reportTime\" label=\"报修时间\">\n  <template slot-scope=\"{ row }\">\n    {{ formatDateToDay(row.reportTime) }}\n  </template>\n</el-table-column>\n        <el-table-column key=\"reporterName\" prop=\"reporterName\" label=\"报修人姓名\" />\n        <el-table-column key=\"processorName\" prop=\"processorName\" label=\"处理人姓名\" />\n        <el-table-column v-if=\"[4].includes(faultStatus)\" key=\"closeTime\" prop=\"closeTime\" label=\"销号时间\" />\n        <el-table-column prop=\"btn\" label=\"操作\" align=\"center\"\n          :class-name=\"faultStatus === 0 ? 'operate' : 'otherOperate'\" :min-width=\"[0, 3, 4].includes(faultStatus)\n            ? 130\n            : [1, 2].includes(faultStatus)\n              ? 140\n              : 'auto'\n            \">\n              \">\n            <template slot-scope=\"{ row }\">\n              <!-- <el-divider direction=\"vertical\" /> -->\n              <div class=\"befor\">\n              <el-button type=\"text\" class=\"blueBug non\" @click=\"showAuditDetail(row.faultId)\">\n                  审核详情\n                </el-button>\n              </div>\n              \n              <div class=\"middle\">\n                <el-button type=\"text\" class=\"blueBug non\" @click=\"goDetail(row.faultId, row.verifyStep, row)\">\n                  详情\n                </el-button>\n              </div>\n\n              <div class=\"after\">\n              <el-button v-if=\"[3].includes(row.verifyStep)\" type=\"text\" class=\"blueBug non\" @click=\"handleSign(row.faultId)\">\n                  签字\n                </el-button>\n              </div>\n            </template>\n        </el-table-column>\n      </el-table>\n      <Empty v-else :is-search=\"isSearch\" />\n      <el-pagination v-if=\"counts > 10\" class=\"pageList\" :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"pageSize\"\n        layout=\"total, sizes, prev, pager, next, jumper\" :total=\"counts\" @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\" />\n    </div>\n\n    <!-- 查看弹框部分 -->\n    <el-dialog title=\"故障详细信息\" :visible.sync=\"dialogVisible\" width=\"53%\" :before-close=\"handleClose\"\n      class=\"order-dialog\">\n      <el-scrollbar style=\"height: 100%\">\n        <!-- 顶部信息 -->\n        <div class=\"order-top\">\n          <div>\n            <div style=\"display: inline-block\">\n              <label style=\"font-size: 16px\">故障编号：</label>\n              <div class=\"order-num\">\n                {{ diaForm.faultCode }}\n              </div>\n            </div>\n            <div style=\"display: inline-block\" class=\"order-status\" :class=\"{ status3: true }\">\n              {{\n                faultStatusList.filter((item) => item.value === dialogFaultStatus).length > 0 \n                ? faultStatusList.filter((item) => item.value === dialogFaultStatus)[0].label \n                : '未知状态'\n              }}\n            </div>\n          </div>\n          <p><label>创建时间：</label>{{ diaForm.createTime }}</p>\n        </div>\n\n        <!-- 中间信息 -->\n        <div class=\"order-middle\">\n          <!-- 故障信息 -->\n          <div class=\"dish-label\">故障信息</div>\n          <div class=\"user-info\">\n            <div class=\"user-info-box\">\n              <div class=\"user-name\">\n                <label>报修人姓名：</label>\n                <span>{{ diaForm.reporterName }}</span>\n              </div>\n\n              <div class=\"user-phone\">\n                <label>报修人电话：</label>\n                <span>{{ diaForm.reporterPhone }}</span>\n              </div>\n\n              <div class=\"user-getTime\">\n                <label>报修时间：</label>\n                <span>{{ diaForm.reportTime }}</span>\n              </div>\n\n              <div class=\"user-name\">\n                <label>故障等级：</label>\n                <span>{{ getFaultLevelText(diaForm.faultLevel) }}</span>\n              </div>\n            </div>\n\n            <div class=\"user-remark\">\n              <div>故障描述：</div>\n              <span>{{ diaForm.faultDesc }}</span>\n            </div>\n            \n            <!-- 新增处理描述和维修措施 -->\n            <div class=\"user-remark\" v-if=\"diaForm.processDesc\">\n              <div>处理描述：</div>\n              <span>{{ diaForm.processDesc }}</span>\n            </div>\n            \n            <div class=\"user-remark\" v-if=\"diaForm.measures\">\n              <div>维修措施：</div>\n              <span>{{ diaForm.measures }}</span>\n            </div>\n            \n            <!-- 新增修复前后照片 -->\n            <div class=\"user-remark\" v-if=\"diaForm.beforePhoto\">\n              <div>修复前照片：</div>\n              <div class=\"photo-container\">\n                <div v-for=\"(photo, index) in diaForm.beforePhoto.split(',')\" :key=\"'before-'+index\" class=\"photo-item\">\n                  <img :src=\"photo\" alt=\"修复前照片\" />\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"user-remark\" v-if=\"diaForm.afterPhoto\">\n              <div>修复后照片：</div>\n              <div class=\"photo-container\">\n                <div v-for=\"(photo, index) in diaForm.afterPhoto.split(',')\" :key=\"'after-'+index\" class=\"photo-item\">\n                  <img :src=\"photo\" alt=\"修复后照片\" />\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"dish-label\">设备信息</div>\n          <!-- 设备信息 -->\n          <div class=\"user-info\">\n            <div class=\"user-info-box\">\n              <div class=\"user-name\">\n                <label>设备编号：</label>\n                <span>{{ diaForm.deviceCode }}</span>\n              </div>\n\n              <div class=\"user-name\">\n                <label>设备名称：</label>\n                <span>{{ diaForm.deviceName }}</span>\n              </div>\n              \n              <!-- 新增工区和班组信息 -->\n              <div class=\"user-name\" v-if=\"diaForm.areaId\">\n                <label>工区：</label>\n                <span>{{ getAreaName(diaForm.areaId) }}</span>\n              </div>\n              \n              <div class=\"user-name\" v-if=\"diaForm.teamId\">\n                <label>班组：</label>\n                <span>{{ getTeamName(diaForm.teamId) }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <!-- 底部信息 -->\n        <div class=\"order-bottom\">\n          <div class=\"amount-label\">处理信息</div>\n          <div class=\"amount-info\">\n            <div class=\"user-remark\">\n              <div class=\"approver-time\">\n                <div>处理人：</div>\n                <span>{{ diaForm.processorName }}</span>\n              </div>\n              <div class=\"approver-time\">\n                <div>接单时间：</div>\n                <span>{{ diaForm.processTime }}</span>\n              </div>\n              <div class=\"approver-time\">\n                <div>完成时间：</div>\n                <span>{{ diaForm.completeTime }}</span>\n              </div>\n            </div>\n            \n            <!-- 新增审核不通过原因 -->\n            <div v-if=\"diaForm.refuseReason\" class=\"orderCancel\">\n              <div>审核不通过原因：</div>\n              <span>{{ diaForm.refuseReason }}</span>\n            </div>\n          </div>\n        </div>\n\n      </el-scrollbar>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogVisible = false\">返 回</el-button>\n      </span>\n    </el-dialog>\n\n<!-- 签字弹窗 -->\n<el-dialog title=\"签字确认\" :visible.sync=\"signDialogVisible\" width=\"50%\">\n  <!-- 一审二审信息容器 -->\n  <div class=\"reviewer-section\">\n    <div class=\"reviewer-row\">\n      <div class=\"reviewer-item\">\n        <label>一审人ID：</label>\n        <div>{{ diaForm.firstReviewerId || 'N/A' }}</div>\n      </div>\n      <div class=\"reviewer-item\">\n        <label>一审人姓名：</label>\n        <span>{{ diaForm.firstReviewerName || 'N/A' }}</span>\n      </div>\n    </div>\n    \n    <div class=\"reviewer-row\">\n      <div class=\"reviewer-item\">\n        <label>二审人ID：</label>\n        <div>{{ diaForm.secondReviewerId || 'N/A' }}</div>\n      </div>\n      <div class=\"reviewer-item\">\n        <label>二审人姓名：</label>\n        <span>{{ diaForm.secondReviewerName || 'N/A' }}</span>\n      </div>\n    </div>\n  </div>\n\n  <!-- 评分和签名区域 -->\n  <div class=\"sign-section\">\n    <div class=\"rate-section\">\n      <label>满意度评分：</label>\n      <el-rate v-model=\"satisfactionScore\" show-text :texts=\"['很差', '较差', '一般', '满意', '非常满意']\"></el-rate>\n    </div>\n    \n    <div class=\"sign-controls\">\n      <label>电子签名：</label>\n      <el-button size=\"small\" @click=\"handleReset\">重签</el-button>\n      <el-button size=\"small\" @click=\"handleGenerate\">确认签名</el-button>\n    </div>\n    \n    <vue-esign\n      ref=\"esign\"\n      :width=\"600\"\n      :height=\"200\"\n      :lineWidth=\"2\"\n      lineColor=\"#000000\"\n      bgColor=\"#f5f5f5\"\n    />\n    \n    <div v-if=\"signatureImg\" class=\"sign-preview\">\n      <label>签名预览：</label>\n      <img :src=\"signatureImg\" alt=\"签名预览\"/>\n    </div>\n  </div>\n  \n  <span slot=\"footer\" class=\"dialog-footer\">\n    <el-button @click=\"signDialogVisible = false\">取消</el-button>\n    <el-button type=\"primary\" @click=\"submitSign\">提交</el-button>\n  </span>\n</el-dialog>\n\n<!-- 审核详情弹窗 -->\n<el-dialog \n    title=\"审核详情\" \n    :visible.sync=\"auditDialogVisible\" \n    width=\"60%\"\n    class=\"audit-dialog\"\n  >\n    <el-scrollbar style=\"height: 100%\">\n      <!-- 顶部信息 -->\n      <div class=\"audit-top\">\n        <div>\n          <div style=\"display: inline-block\">\n            <label style=\"font-size: 16px\">故障编号：</label>\n            <div class=\"audit-num\">\n              {{ auditForm.faultId || 'N/A' }}\n            </div>\n          </div>\n          <div style=\"display: inline-block\" class=\"audit-status\" :class=\"getStatusClass(auditForm.verifyStep)\">\n            {{ getVerifyStepText(auditForm.verifyStep) }}\n          </div>\n        </div>\n        <p><label>创建时间：</label>{{ auditForm.createTime || 'N/A' }}</p>\n      </div>\n\n      <!-- 审核信息 -->\n      <div class=\"audit-section\">\n        <div class=\"section-title\">审核信息</div>\n        \n        <div class=\"audit-info-box\">\n          <div class=\"info-row\">\n            <div class=\"info-item\">\n              <label>审核步骤：</label>\n              <span>{{ getVerifyStepText(auditForm.verifyStep) }}</span>\n            </div>\n            <div class=\"info-item\">\n              <label>审核状态：</label>\n              <span>{{ auditForm.verifyStatus || '通过' }}</span>\n            </div>\n          </div>\n          \n          <div class=\"info-row\">\n            <div class=\"info-item\">\n              <label>审核人：</label>\n              <span>{{ auditForm.operatorName || 'N/A' }}</span>\n            </div>\n            <div class=\"info-item\">\n              <label>审核时间：</label>\n              <span>{{ auditForm.verifyTime || 'N/A' }}</span>\n            </div>\n          </div>\n          \n          <div class=\"info-row\" v-if=\"auditForm.verifyOpinion\">\n            <div class=\"info-item full-width\">\n              <label>审核意见：</label>\n              <span>{{ auditForm.verifyOpinion }}</span>\n            </div>\n          </div>\n          \n          <div class=\"info-row\">\n            <div class=\"info-item full-width\">\n              <label>满意度评分：</label>\n              <el-rate\n                v-model=\"auditForm.satisfactionScore\"\n                disabled\n                show-text\n                :texts=\"['很差', '较差', '一般', '满意', '非常满意']\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 签名信息 -->\n      <div class=\"signature-section\" v-if=\"auditForm.signature\">\n        <div class=\"section-title\">电子签名</div>\n        <div class=\"signature-box\">\n          <img :src=\"auditForm.signature\" alt=\"电子签名\" class=\"signature-img\" />\n          <div class=\"signature-info\">\n            <p>签名人：{{ auditForm.operatorName || 'N/A' }}</p>\n            <p>签名时间：{{ auditForm.verifyTime || 'N/A' }}</p>\n          </div>\n        </div>\n      </div>\n\n      <!-- 审核流程 -->\n      <div class=\"process-section\">\n        <div class=\"section-title\">审核流程</div>\n        <el-steps :active=\"getActiveStep(auditForm.verifyStep)\" finish-status=\"success\">\n          <el-step title=\"班组长审核\" :description=\"getStepDescription(1)\"></el-step>\n          <el-step title=\"工区长审核\" :description=\"getStepDescription(2)\"></el-step>\n          <el-step title=\"主管领导审核\" :description=\"getStepDescription(3)\"></el-step>\n        </el-steps>\n      </div>\n    </el-scrollbar>\n    \n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"auditDialogVisible = false\">关闭</el-button>\n    </span>\n  </el-dialog>\n    \n  </div>\n",null]}