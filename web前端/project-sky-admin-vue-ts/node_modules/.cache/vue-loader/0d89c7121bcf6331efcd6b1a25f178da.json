{"remainingRequest":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\teamLeader\\deviceReview\\faultClear\\index.vue?vue&type=template&id=7cdb6b80&scoped=true&","dependencies":[{"path":"G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\teamLeader\\deviceReview\\faultClear\\index.vue","mtime":1748954066201},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div class=\"dashboard-container\">\n  <TabChange :order-statics=\"orderStatics\" :default-activity=\"defaultActivity\" @tabChange=\"change\" />\n  <div class=\"container\" :class=\"{ hContainer: tableData.length }\">\n    <!-- 搜索项 -->\n    <div class=\"tableBar\">\n      <label style=\"margin-right: 10px\">设备名称：</label>\n      <el-input v-model=\"deviceName\" placeholder=\"请填写设备名称：\" style=\"width: 15%\" clearable\n        @clear=\"init(faultStatus)\" @keyup.enter.native=\"initFun(faultStatus)\" />\n      <label style=\"margin-right: 10px; margin-left: 20px\">故障类型：</label>\n      <el-select v-model=\"faultType\" style=\"width: 14%\" placeholder=\"请选择\" clearable @clear=\"init\">\n        <el-option label=\"一般\" value=\"1\" />\n        <el-option label=\"重要\" value=\"2\" />\n        <el-option label=\"紧急\" value=\"3\" />\n      </el-select>\n      <label style=\"margin-left: 20px\">报修时间：</label>\n      <el-date-picker v-model=\"valueTime\" clearable value-format=\"yyyy-MM-dd HH:mm:ss\" range-separator=\"至\"\n        :default-time=\"['00:00:00', '23:59:59']\" type=\"daterange\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"\n        style=\"width: 25%; margin-left: 10px\" @clear=\"init(faultStatus)\" />\n      <el-button class=\"normal-btn continue\" @click=\"init(faultStatus, true)\">\n        查询\n      </el-button>\n      <el-button type=\"primary\" style=\"margin-left: 200px\" @click=\"addFaultReport\">\n        故障报修\n      </el-button>\n    </div>\n    <el-table v-if=\"tableData.length\" :data=\"tableData\" stripe class=\"tableBox\">\n      <el-table-column key=\"faultCode\" prop=\"faultCode\" label=\"故障编号\" />\n      <el-table-column key=\"deviceName\" prop=\"deviceName\" label=\"设备名称\" />\n      <el-table-column key=\"faultType\" prop=\"faultType\" label=\"故障类型\">\n        <template slot-scope=\"{ row }\">\n          <span>{{ getFaultType(row) }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column key=\"faultLevel\" prop=\"faultLevel\" label=\"故障等级\">\n        <template slot-scope=\"{ row }\">\n          <span>{{ getFaultLevel(row) }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column v-if=\"[0].includes(faultStatus)\" key=\"status\" prop=\"status\" label=\"状态信息\">\n        <template slot-scope=\"{ row }\">\n          <span>{{ getFaultStatus(row) }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column key=\"reportTime\" prop=\"reportTime\" label=\"报修时间\" />\n      <el-table-column key=\"reporterName\" prop=\"reporterName\" label=\"报修人姓名\" />\n      <el-table-column v-if=\"[1, 2, 3].includes(faultStatus)\" key=\"processorName\" prop=\"processorName\" label=\"处理人姓名\" />\n      <el-table-column v-if=\"[2, 3].includes(faultStatus)\" key=\"completeTime\" prop=\"completeTime\" label=\"完成时间\" />\n      <el-table-column v-if=\"[4].includes(faultStatus)\" key=\"closeTime\" prop=\"closeTime\" label=\"关闭时间\" />\n      <el-table-column prop=\"btn\" label=\"操作\" align=\"center\"\n        :class-name=\"faultStatus === 1 ? 'operate' : 'otherOperate'\" :min-width=\"[-1, 0].includes(faultStatus)\n          ? 130\n          : [1, 2].includes(faultStatus)\n            ? 140\n            : 'auto'\n          \">\n        <template slot-scope=\"{ row }\">\n          <div class=\"before\">\n            <el-button type=\"text\" class=\"blueBug non\" @click=\"goDetail(row.faultId, row.status, row)\">\n              查看\n            </el-button>\n          </div>\n          <div class=\"middle\">\n            <el-button v-if=\"[2].includes(row.status) && [1].includes(row.verifyStep)\" type=\"text\" class=\"delBut\"\n              @click=\"auditFault2(row)\">\n              审核\n            </el-button>\n          </div>\n          <div class=\"after\">\n            <el-button type=\"text\" class=\"greenBug non\" @click=\"viewTaskInfo(row)\">\n              查看任务信息\n            </el-button>\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n    <Empty v-else :is-search=\"isSearch\" />\n    <el-pagination v-if=\"counts > 10\" class=\"pageList\" :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"pageSize\"\n      layout=\"total, sizes, prev, pager, next, jumper\" :total=\"counts\" @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\" />\n  </div>\n\n  <!-- 查看弹框部分 -->\n  <el-dialog title=\"故障详细信息\" :visible.sync=\"dialogVisible\" width=\"53%\" :before-close=\"handleClose\"\n    class=\"order-dialog\">\n    <el-scrollbar style=\"height: 100%\">\n      <!-- 顶部信息 -->\n      <div class=\"order-top\">\n        <div>\n          <div style=\"display: inline-block\">\n            <label style=\"font-size: 16px\">故障编号：</label>\n            <div class=\"order-num\">\n              {{ diaForm.faultCode }}\n            </div>\n          </div>\n          <div style=\"display: inline-block\" class=\"order-status\" :class=\"{ status3: true }\">\n            {{\n              faultStatusList.filter((item) => item.value === dialogFaultStatus).length > 0 \n              ? faultStatusList.filter((item) => item.value === dialogFaultStatus)[0].label \n              : '未知状态'\n            }}\n          </div>\n        </div>\n        <p><label>创建时间：</label>{{ diaForm.createTime }}</p>\n      </div>\n\n      <!-- 中间信息 -->\n      <div class=\"order-middle\">\n        <!-- 故障信息 -->\n        <div class=\"dish-label\">故障信息</div>\n        <div class=\"user-info\">\n          <div class=\"user-info-box\">\n            <div class=\"user-name\">\n              <label>报修人姓名：</label>\n              <span>{{ diaForm.reporterName }}</span>\n            </div>\n\n            <div class=\"user-phone\">\n              <label>报修人电话：</label>\n              <span>{{ diaForm.reporterPhone }}</span>\n            </div>\n\n            <div class=\"user-getTime\">\n              <label>报修时间：</label>\n              <span>{{ diaForm.reportTime }}</span>\n            </div>\n\n            <div class=\"user-name\">\n              <label>故障等级：</label>\n              <span>{{ getFaultLevelText(diaForm.faultLevel) }}</span>\n            </div>\n          </div>\n\n          <div class=\"user-remark\">\n            <div>故障描述：</div>\n            <span>{{ diaForm.faultDesc }}</span>\n          </div>\n          \n          <!-- 新增处理描述和维修措施 -->\n          <div class=\"user-remark\" v-if=\"diaForm.processDesc\">\n            <div>处理描述：</div>\n            <span>{{ diaForm.processDesc }}</span>\n          </div>\n          \n          <div class=\"user-remark\" v-if=\"diaForm.measures\">\n            <div>维修措施：</div>\n            <span>{{ diaForm.measures }}</span>\n          </div>\n          \n          <!-- 新增修复前后照片 -->\n          <div class=\"user-remark\" v-if=\"diaForm.beforePhoto\">\n            <div>修复前照片：</div>\n            <div class=\"photo-container\">\n              <div v-for=\"(photo, index) in diaForm.beforePhoto.split(',')\" :key=\"'before-'+index\" class=\"photo-item\">\n                <el-image :src=\"photo\" alt=\"修复前照片\" :preview-src-list=\"diaForm.beforePhoto.split(',')\" fit=\"cover\" />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"user-remark\" v-if=\"diaForm.afterPhoto\">\n            <div>修复后照片：</div>\n            <div class=\"photo-container\">\n              <div v-for=\"(photo, index) in diaForm.afterPhoto.split(',')\" :key=\"'after-'+index\" class=\"photo-item\">\n                <el-image :src=\"photo\" alt=\"修复后照片\" :preview-src-list=\"diaForm.afterPhoto.split(',')\" fit=\"cover\" />\n              </div>\n            </div>\n          </div>\n\n        </div>\n\n        <div class=\"dish-label\">设备信息</div>\n        <!-- 设备信息 -->\n        <div class=\"user-info\">\n          <div class=\"user-info-box\">\n            <div class=\"user-name\">\n              <label>设备编号：</label>\n              <span>{{ diaForm.deviceCode }}</span>\n            </div>\n\n            <div class=\"user-name\">\n              <label>设备名称：</label>\n              <span>{{ diaForm.deviceName }}</span>\n            </div>\n            \n            <!-- 新增工区和班组信息 -->\n            <div class=\"user-name\" v-if=\"diaForm.areaId\">\n              <label>工区：</label>\n              <span>{{ getAreaName(diaForm.areaId) }}</span>\n            </div>\n            \n            <div class=\"user-name\" v-if=\"diaForm.teamId\">\n              <label>班组：</label>\n              <span>{{ getTeamName(diaForm.teamId) }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 底部信息 -->\n      <div class=\"order-bottom\">\n        <div class=\"amount-label\">处理信息</div>\n        <div class=\"amount-info\">\n          <div class=\"user-remark\">\n            <div class=\"approver-time\">\n              <div>处理人：</div>\n              <span>{{ diaForm.processorName }}</span>\n            </div>\n            <div class=\"approver-time\">\n              <div>接单时间：</div>\n              <span>{{ diaForm.processTime }}</span>\n            </div>\n            <div class=\"approver-time\">\n              <div>完成时间：</div>\n              <span>{{ diaForm.completeTime }}</span>\n            </div>\n          </div>\n          \n          <!-- 新增审核不通过原因 -->\n          <div v-if=\"diaForm.refuseReason\" class=\"orderCancel\">\n            <div>审核不通过原因：</div>\n            <span>{{ diaForm.refuseReason }}</span>\n          </div>\n        </div>\n      </div>\n\n    </el-scrollbar>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"dialogVisible = false\">返 回</el-button>\n    </span>\n  </el-dialog>\n  \n  <!-- 审核确认弹窗 -->\n  <el-dialog title=\"审核通过确认\" :visible.sync=\"clearDialogVisible\" width=\"42%\"\n    :before-close=\"() => ((clearDialogVisible = false), (remark = ''))\" class=\"cancelDialog\">\n    <el-form label-width=\"90px\">\n      <el-form-item label=\"审核备注：\">\n        <el-input v-model.trim=\"remark\" type=\"textarea\" placeholder=\"请填写审核备注（限50字内）\" maxlength=\"50\" />\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"; (clearDialogVisible = false), (remark = '')\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"passAudit\">确 定</el-button>\n    </span>\n  </el-dialog>\n  \n  <!-- 审核弹窗 -->\n  <el-dialog title=\"故障审核\" :visible.sync=\"auditDialogVisible\" width=\"53%\" :before-close=\"handleAuditClose\"\n    class=\"order-dialog\">\n    <el-scrollbar style=\"height: 100%\">\n      <!-- 顶部信息 -->\n      <div class=\"order-top\">\n        <div>\n          <div style=\"display: inline-block\">\n            <label style=\"font-size: 16px\">故障编号：</label>\n            <div class=\"order-num\">\n              {{ diaForm.faultCode }}\n            </div>\n          </div>\n          <div style=\"display: inline-block\" class=\"order-status\" :class=\"{ status3: true }\">\n            {{\n              faultStatusList.filter((item) => item.value === dialogFaultStatus).length > 0 \n              ? faultStatusList.filter((item) => item.value === dialogFaultStatus)[0].label \n              : '未知状态'\n            }}\n          </div>\n        </div>\n        <p><label>创建时间：</label>{{ diaForm.createTime }}</p>\n      </div>\n\n      <!-- 中间信息 -->\n      <div class=\"order-middle\">\n        <!-- 故障信息 -->\n        <div class=\"dish-label\">故障信息</div>\n        <div class=\"user-info\">\n          <div class=\"user-info-box\">\n            <div class=\"user-name\">\n              <label>报修人姓名：</label>\n              <span>{{ diaForm.reporterName }}</span>\n            </div>\n\n            <div class=\"user-phone\">\n              <label>报修人电话：</label>\n              <span>{{ diaForm.reporterPhone }}</span>\n            </div>\n\n            <div class=\"user-getTime\">\n              <label>报修时间：</label>\n              <span>{{ diaForm.reportTime }}</span>\n            </div>\n\n            <div class=\"user-name\">\n              <label>故障等级：</label>\n              <span>{{ getFaultLevelText(diaForm.faultLevel) }}</span>\n            </div>\n          </div>\n\n          <div class=\"user-remark\">\n            <div>故障描述：</div>\n            <span>{{ diaForm.faultDesc }}</span>\n          </div>\n          \n          <!-- 处理描述和维修措施 -->\n          <div class=\"user-remark\" v-if=\"diaForm.processDesc\">\n            <div>处理描述：</div>\n            <span>{{ diaForm.processDesc }}</span>\n          </div>\n          \n          <div class=\"user-remark\" v-if=\"diaForm.measures\">\n            <div>维修措施：</div>\n            <span>{{ diaForm.measures }}</span>\n          </div>\n          \n          <!-- 修复前后照片 --> \n          <div class=\"user-remark\" v-if=\"diaForm.beforePhoto\">\n            <div>修复前照片：</div>\n            <div class=\"photo-container\">\n              <div v-for=\"(photo, index) in diaForm.beforePhoto.split(',')\" :key=\"'before-'+index\" class=\"photo-item\">\n                <el-image :src=\"photo\" alt=\"修复前照片\" :preview-src-list=\"diaForm.beforePhoto.split(',')\" fit=\"cover\" />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"user-remark\" v-if=\"diaForm.afterPhoto\">\n            <div>修复后照片：</div>\n            <div class=\"photo-container\">\n              <div v-for=\"(photo, index) in diaForm.afterPhoto.split(',')\" :key=\"'after-'+index\" class=\"photo-item\">\n                <el-image :src=\"photo\" alt=\"修复后照片\" :preview-src-list=\"diaForm.afterPhoto.split(',')\" fit=\"cover\" />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class=\"dish-label\">设备信息</div>\n        <!-- 设备信息 -->\n        <div class=\"user-info\">\n          <div class=\"user-info-box\">\n            <div class=\"user-name\">\n              <label>设备编号：</label>\n              <span>{{ diaForm.deviceCode }}</span>\n            </div>\n\n            <div class=\"user-name\">\n              <label>设备名称：</label>\n              <span>{{ diaForm.deviceName }}</span>\n            </div>\n            \n            <!-- 工区和班组信息 -->\n            <div class=\"user-name\" v-if=\"diaForm.areaId\">\n              <label>工区：</label>\n              <span>{{ getAreaName(diaForm.areaId) }}</span>\n            </div>\n            \n            <div class=\"user-name\" v-if=\"diaForm.teamId\">\n              <label>班组：</label>\n              <span>{{ getTeamName(diaForm.teamId) }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 底部信息 -->\n      <div class=\"order-bottom\">\n        <div class=\"amount-label\">处理信息</div>\n        <div class=\"amount-info\">\n          <div class=\"user-remark\">\n            <div class=\"approver-time\">\n              <div>处理人：</div>\n              <span>{{ diaForm.processorName }}</span>\n            </div>\n            <div class=\"approver-time\">\n              <div>接单时间：</div>\n              <span>{{ diaForm.processTime }}</span>\n            </div>\n            <div class=\"approver-time\">\n              <div>完成时间：</div>\n              <span>{{ diaForm.completeTime }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </el-scrollbar>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"auditDialogVisible = false\">返 回</el-button>\n      <el-button @click=\"refuseFault(row)\">审核不通过</el-button>\n      <el-button type=\"primary\" @click=\"confirmPassAudit(row)\">审核通过</el-button>\n      <el-button type=\"primary\" @click=\"viewTaskInfo(row)\">查看任务信息</el-button>\n    </span>\n  </el-dialog>\n  \n  <!-- 审核不通过原因弹窗 -->\n  <el-dialog title=\"审核不通过原因\" :visible.sync=\"refuseDialogVisible\" width=\"42%\"\n    :before-close=\"() => ((refuseDialogVisible = false), (refuseReason = ''))\" class=\"cancelDialog\">\n    <el-form label-width=\"140px\">\n      <el-form-item label=\"审核不通过原因：\">\n        <el-select v-model=\"refuseReason\" placeholder=\"请选择审核不通过原因\">\n          <el-option v-for=\"(item, index) in refuseFaultList\" :key=\"index\" :label=\"item.label\"\n            :value=\"item.label\" />\n        </el-select>\n      </el-form-item>\n      <el-form-item v-if=\"refuseReason === '自定义原因'\" label=\"原因：\">\n        <el-input v-model.trim=\"remark\" type=\"textarea\" placeholder=\"请填写您审核不通过的原因（限20字内）\"\n          maxlength=\"20\" />\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"; (refuseDialogVisible = false), (refuseReason = '')\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"confirmRefuse\">确 定</el-button>\n    </span>\n  </el-dialog>\n  \n  <!-- 查看任务信息弹窗 -->\n  <el-dialog title=\"故障处理任务信息\" :visible.sync=\"taskDialogVisible\" width=\"53%\" :before-close=\"handleTaskClose\"\n    class=\"order-dialog\">\n    <el-scrollbar style=\"height: 100%\">\n      <!-- 顶部信息 -->\n      <div class=\"order-top\">\n        <div>\n          <div style=\"display: inline-block\">\n            <label style=\"font-size: 16px\">任务编号：</label>\n            <div class=\"order-num\">\n              {{ taskForm.taskCode }}\n            </div>\n          </div>\n          <div style=\"display: inline-block\" class=\"order-status\" :class=\"{ status3: true }\">\n            {{ getTaskStatusText(taskForm.status) }}\n          </div>\n        </div>\n        <p><label>创建时间：</label>{{ taskForm.createTime }}</p>\n      </div>\n\n      <!-- 中间信息 -->\n      <div class=\"order-middle\">\n        <!-- 任务基本信息 -->\n        <div class=\"dish-label\">任务基本信息</div>\n        <div class=\"user-info\">\n          <div class=\"user-info-box\">\n            <div class=\"user-name\">\n              <label>任务名称：</label>\n              <span>{{ taskForm.taskName }}</span>\n            </div>\n            \n            <div class=\"user-getTime\">\n              <label>开始时间：</label>\n              <span>{{ taskForm.startTime }}</span>\n            </div>\n            \n            <div class=\"user-getTime\">\n              <label>结束时间：</label>\n              <span>{{ taskForm.endTime }}</span>\n            </div>\n            \n            <div class=\"user-name\">\n              <label>执行人：</label>\n              <span>{{ taskForm.executorName }}</span>\n            </div>\n            \n            <div class=\"user-getTime\">\n              <label>完成时间：</label>\n              <span>{{ taskForm.completeTime }}</span>\n            </div>\n            \n            <div class=\"user-getTime\">\n              <label>关闭时间：</label>\n              <span>{{ taskForm.closeTime }}</span>\n            </div>\n          </div>\n        </div>\n\n        <!-- 关联故障信息 -->\n        <div class=\"dish-label\">关联故障信息</div>\n        <div class=\"user-info\">\n          <div class=\"user-info-box\">\n            <div class=\"user-name\">\n              <label>故障编号：</label>\n              <span>{{ taskForm.faultCode }}</span>\n            </div>\n            \n            <div class=\"user-name\">\n              <label>设备编号：</label>\n              <span>{{ taskForm.deviceCode }}</span>\n            </div>\n            \n            <div class=\"user-name\">\n              <label>设备名称：</label>\n              <span>{{ taskForm.deviceName }}</span>\n            </div>\n          </div>\n        </div>\n        \n        <!-- 工区班组信息 -->\n        <div class=\"dish-label\">所属信息</div>\n        <div class=\"user-info\">\n          <div class=\"user-info-box\">\n            <div class=\"user-name\">\n              <label>工区：</label>\n              <span>{{ getAreaName(taskForm.areaId) }}</span>\n            </div>\n            \n            <div class=\"user-name\">\n              <label>班组：</label>\n              <span>{{ getTeamName(taskForm.teamId) }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </el-scrollbar>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"taskDialogVisible = false\">返 回</el-button>\n    </span>\n  </el-dialog>\n</div>\n",null]}