{"remainingRequest":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\sectionLeader\\purchase\\index.vue?vue&type=template&id=272ef95b&scoped=true&","dependencies":[{"path":"G:\\device-management\\project-sky-admin-vue-ts\\src\\views\\sectionLeader\\purchase\\index.vue","mtime":1745852505240},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"G:\\device-management\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n<div class=\"dashboard-container\">\n  <TabChange :order-statics=\"orderStatics\" :default-activity=\"defaultActivity\" @tabChange=\"change\" />\n  <div class=\"container\" :class=\"{ hContainer: tableData.length }\">\n    <!-- 搜索项 -->\n    <div class=\"tableBar\">\n      <label style=\"margin-right: 10px\">设备名称：</label>\n      <el-input v-model=\"equipmentName\" placeholder=\"请填写设备名称：\" style=\"width: 15%\" clearable\n        @clear=\"init(purchaseStatus)\" @keyup.enter.native=\"initFun(purchaseStatus)\" />\n      <label style=\"margin-right: 10px; margin-left: 20px\">设备类型：</label>\n      <el-select v-model=\"equipmentType\" style=\"width: 14%\" placeholder=\"请选择\" clearable @clear=\"init\">\n        <el-option label=\"客服设备\" value=\"1\" />\n        <el-option label=\"机电设备\" value=\"2\" />\n        <el-option label=\"消防设备\" value=\"3\" />\n        <el-option label=\"电梯设备\" value=\"4\" />\n      </el-select>\n      <label style=\"margin-left: 20px\">创建时间：</label>\n      <el-date-picker v-model=\"valueTime\" clearable value-format=\"yyyy-MM-dd HH:mm:ss\" range-separator=\"至\"\n        :default-time=\"['00:00:00', '23:59:59']\" type=\"daterange\" start-placeholder=\"开始日期\" end-placeholder=\"结束日期\"\n        style=\"width: 25%; margin-left: 10px\" @clear=\"init(purchaseStatus)\" />\n      <el-button class=\"normal-btn continue\" @click=\"init(purchaseStatus, true)\">\n        查询\n      </el-button>\n      <el-button type=\"primary\" style=\"margin-left: 150px\" @click=\"sendPurchaseInfo('add')\">\n        下发采购信息\n      </el-button>\n    </div>\n    <el-table v-if=\"tableData.length\" :data=\"tableData\" stripe class=\"tableBox\">\n      <el-table-column key=\"purchaseId\" prop=\"purchaseId\" label=\"采购ID\" />\n      <el-table-column key=\"equipmentName\" prop=\"equipmentName\" label=\"设备名称\" />\n      <el-table-column v-if=\"[-1].includes(purchaseStatus)\" key=\"status\" prop=\"status\" label=\"采购状态\">\n        <template slot-scope=\"{ row }\">\n          <span>{{ getPurchaseType(row) }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column key=\"quantity\" prop=\"quantity\" label=\"采购数量\" show-overflow-tooltip />\n      <el-table-column key=\"equipmentType\" prop=\"设备类型\" label=\"设备类型\">\n        <template slot-scope=\"{ row }\">\n          <span>{{ getEquimentType(row) }}</span>\n        </template>\n      </el-table-column>\n      <el-table-column key=\"createTime\" prop=\"createTime\" label=\"创建时间\" />\n      <el-table-column key=\"createBy\" prop=\"createBy\" label=\"创建人\"\n        :class-name=\"purchaseStatus === 6 ? 'address' : ''\" />\n      <el-table-column v-if=\"[2, 3].includes(purchaseStatus)\" key=\"expectedLife\" prop=\"expectedLife\" label=\"预期使用寿命(月)\"\n        class-name=\"orderTime\" min-width=\"110\" />\n      <el-table-column v-if=\"[2, 3].includes(purchaseStatus)\" key=\"purchaseAmount\" prop=\"purchaseAmount\"\n        class-name=\"cancelTime\" label=\"采购金额\" min-width=\"110\" />\n      <el-table-column v-if=\"[4].includes(purchaseStatus)\" key=\"remark\" prop=\"remark\" label=\"备注\"\n        class-name=\"cancelReason\" :min-width=\"[4].includes(purchaseStatus) ? 80 : 'auto'\" />\n      <el-table-column v-if=\"[4].includes(purchaseStatus)\" key=\"deliveryDate\" prop=\"deliveryDate\" label=\"交付日期\" />\n      <el-table-column v-if=\"[5].includes(purchaseStatus)\" key=\"remark\" prop=\"refuseReason\" label=\"驳回原因\"\n        class-name=\"cancelReason\" :min-width=\"[5].includes(purchaseStatus) ? 80 : 'auto'\" />\n        <el-table-column v-if=\"[6].includes(purchaseStatus)\" key=\"remark\" prop=\"cancelReason\" label=\"取消原因\"\n        class-name=\"cancelReason\" :min-width=\"[5].includes(purchaseStatus) ? 80 : 'auto'\" />\n      <el-table-column prop=\"btn\" label=\"操作\" align=\"center\"\n        :class-name=\"purchaseStatus === 0 ? 'operate' : 'otherOperate'\" :min-width=\"[-1, 0].includes(purchaseStatus)\n          ? 130\n          : [1, 2].includes(purchaseStatus)\n            ? 140\n            : 'auto'\n          \">\n        <template slot-scope=\"{ row }\">\n          <!-- <el-divider direction=\"vertical\" /> -->\n          <div class=\"before\">\n            <el-button v-if=\"[-1, 0].includes(row.status)\" type=\"text\" class=\"delBut\" @click=\"cancelPurchase(row)\">\n              取消\n            </el-button>\n          </div>\n          <div class=\"middle\">\n            <el-button v-if=\"[0, 1].includes(row.status)\" type=\"text\" class=\"delBut\" @click=\"\">\n              催促\n            </el-button>\n          </div>\n          <div class=\"after\">\n            <el-button type=\"text\" class=\"blueBug non\" @click=\"goDetail(row.purchaseId, row.status, row)\">\n              查看\n            </el-button>\n            <el-button v-if=\"[2].includes(row.status)\" type=\"text\" class=\"delBut\"\n              @click=\"goDetail(row.purchaseId, row.status, row)\">\n              审核\n            </el-button>\n          </div>\n        </template>\n      </el-table-column>\n    </el-table>\n    <Empty v-else :is-search=\"isSearch\" />\n    <el-pagination v-if=\"counts > 10\" class=\"pageList\" :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"pageSize\"\n      layout=\"total, sizes, prev, pager, next, jumper\" :total=\"counts\" @size-change=\"handleSizeChange\"\n      @current-change=\"handleCurrentChange\" />\n  </div>\n\n  <!-- 查看弹框部分 -->\n  <el-dialog title=\"采购单信息\" :visible.sync=\"dialogVisible\" width=\"53%\" :before-close=\"handleClose\" class=\"order-dialog\">\n    <el-scrollbar style=\"height: 100%\">\n      <div class=\"order-top\">\n        <div>\n          <div style=\"display: inline-block\">\n            <label style=\"font-size: 16px\">采购ID：</label>\n            <div class=\"order-num\">\n              {{ diaForm.purchaseId }}\n            </div>\n          </div>\n          <div style=\"display: inline-block\" class=\"order-status\" :class=\"{ status3: true }\">\n            {{\n              purchaseList.filter((item) => item.value === dialogPurchaseStatus)[0]\n                .label\n            }}\n          </div>\n        </div>\n        <p><label>创建时间：</label>{{ diaForm.createTime }}</p>\n      </div>\n\n      <div class=\"order-middle\">\n        <div class=\"dish-label\">采购单基本信息</div>\n        <div class=\"user-info\">\n          <div class=\"user-info-box\">\n            <div class=\"user-name\">\n              <label>创建人：</label>\n              <span>{{ diaForm.createBy }}</span>\n            </div>\n\n            <div class=\"user-name\">\n              <label>更新人：</label>\n              <span>{{ diaForm.updateBy }}</span>\n            </div>\n            <div class=\"user-phone\">\n              <label>创建时间</label>\n              <span>{{ diaForm.createTime }}</span>\n            </div>\n            <div v-if=\"[2, 3, 4, 5, 6].includes(dialogPurchaseStatus)\">\n              <div class=\"user-getTime\">\n                <label>采购日期:</label>\n                <span>{{ diaForm.purchaseDate }}</span>\n              </div>\n\n              <div class=\"dish-all-amount\">\n                <label>采购金额</label>\n                <span>￥{{ diaForm.purchaseAmount }}</span>\n              </div>\n\n              <div>\n                <label>采购数量:</label>\n                <span>{{ diaForm.quantity }}</span>\n              </div>\n\n              <div>\n                <label>采购单据编号:</label>\n                <span>{{ diaForm.purchaseDocumentNo }}</span>\n              </div>\n\n              <div>\n                <label>合同编号:</label>\n                <span>{{ diaForm.contractNo }}</span>\n              </div>\n\n              <div>\n                <label>采购负责人:</label>\n                <span>{{ diaForm.purchasePerson }}</span>\n              </div>\n\n              <div>\n                <label>采购设备图像:</label>\n                <img v-if=\"diaForm.image\" :src=\"diaForm.image\" alt=\"采购设备图像\" style=\"width: 100px; height: 100px;\">\n                <span v-else>无图像</span>\n              </div>\n\n              <div>\n                <label>交付日期:</label>\n                <span>{{ diaForm.deliveryDate }}</span>\n              </div>\n\n              <div>\n                <label>验收日期:</label>\n                <span>{{ diaForm.acceptanceDate }}</span>\n              </div>\n\n              <div>\n                <label>验收结果:</label>\n                <span>\n                  {{ diaForm.acceptanceResult === 1 ? '合格' :\n                    diaForm.acceptanceResult === 2 ? '不合格' :\n                      diaForm.acceptanceResult === 3 ? '部分合格' : '未知' }}\n                </span>\n              </div>\n\n\n            </div>\n\n            <!--  <div class=\"user-address\">\n              <label>地址：</label>\n              <span>{{ diaForm.address }}</span>\n            </div> -->\n          </div>\n\n\n          <div class=\"user-remark\">\n            <div>验收备注</div>\n            <span>{{ diaForm.acceptanceNotes }}</span>\n          </div>\n\n        </div>\n\n        <div class=\"dish-info\">\n          <div class=\"dish-label\">采购设备信息</div>\n          <div class=\"user-info-box\">\n            <div>\n              <label>设备类型:</label>\n              <span>\n                {{ diaForm.equipmentType === 1 ? '客服设备' :\n                  diaForm.equipmentType === 2 ? '机电设备' :\n                    diaForm.equipmentType === 3 ? '消防设备' :\n                      diaForm.equipmentType === 4 ? '电梯设备' : '未知' }}\n              </span>\n            </div>\n\n            <div>\n              <label>设备名称:</label>\n              <span>{{ diaForm.equipmentName }}</span>\n            </div>\n\n            <div>\n              <label>型号:</label>\n              <span>{{ diaForm.modelNumber }}</span>\n            </div>\n\n            <div>\n              <label>规格参数:</label>\n              <span>{{ diaForm.specification }}</span>\n            </div>\n\n            <div>\n              <label>生产厂家:</label>\n              <span>{{ diaForm.manufacturer }}</span>\n            </div>\n\n            <div>\n              <label>供应商:</label>\n              <span>{{ diaForm.supplier }}</span>\n            </div>\n\n            <div>\n              <label>单位:</label>\n              <span>{{ diaForm.unit }}</span>\n            </div>\n\n            <div>\n              <label>保修期(月):</label>\n              <span>{{ diaForm.warrantyPeriod }}</span>\n            </div>\n\n            <div>\n              <label>预期使用寿命(月):</label>\n              <span>{{ diaForm.expectedLife }}</span>\n            </div>\n\n          </div>\n\n        </div>\n      </div>\n\n      <div class=\"order-bottom\">\n        <div class=\"amount-info\">\n          <div class=\"amount-label\">备注消息信息</div>\n          <!-- <div class=\"amount-list\">\n          </div> -->\n          <div class=\"user-remark\" :class=\"{ orderCancel: true }\">\n            <div>备注：</div>\n            <span>{{ diaForm.remark }}</span>\n          </div>\n          <div v-if=\"[5].includes(dialogPurchaseStatus)\" class=\"orderCancel\">\n            <div>取消原因：</div>\n            <span>{{ diaForm.cancelReason }}</span>\n          </div>\n          <div v-if=\"[6].includes(dialogPurchaseStatus)\" class=\"orderCancel\">\n            <div>审核拒绝原因：</div>\n            <span>{{ diaForm.refuseReason }}</span>\n          </div>\n          <div v-if=\"diaForm.cancelReason\" class=\"orderCancel\">\n            <div>催促通知:</div>\n            <span>{{ diaForm.cancelReason }}</span>\n          </div>\n\n        </div>\n\n      </div>\n    </el-scrollbar>\n    <span v-if=\"dialogPurchaseStatus !== 6\" slot=\"footer\" class=\"dialog-footer\">\n      <!--  <el-checkbox v-if=\"dialogPurchaseStatus === 2 && purchaseStatus === 2\" v-model=\"isAutoNext\">处理完自动跳转下一条</el-checkbox> -->\n      <el-button v-if=\"dialogPurchaseStatus === 2\"\n        @click=\"refusePurchase(row)/* , (isTableOperateBtn = false) */\">审核不通过</el-button>\n      <el-button v-if=\"dialogPurchaseStatus === 2\" type=\"primary\"\n        @click=\"passPurchase(row)/* , (isTableOperateBtn = false) */\">审核通过</el-button>\n\n      <el-button v-if=\"true\" @click=\"dialogVisible = false\">返 回</el-button>\n      <!-- <el-button v-if=\"dialogPurchaseStatus === 3\" type=\"primary\" @click=\"cancelOrDeliveryOrComplete(3, row.id)\">派\n        送</el-button>\n      <el-button v-if=\"dialogPurchaseStatus === 4\" type=\"primary\" @click=\"cancelOrDeliveryOrComplete(4, row.id)\">完\n        成</el-button> -->\n      <el-button v-if=\"[0].includes(dialogPurchaseStatus)\" type=\"primary\"\n        @click=\"cancelPurchase(row)\">取消采购单</el-button>\n    </span>\n  </el-dialog>\n  <!-- 拒单，取消弹窗 -->\n  <el-dialog :title=\"cancelDialogTitle + '原因'\" :visible.sync=\"cancelDialogVisible\" width=\"42%\"\n    :before-close=\"() => ((cancelDialogVisible = false), (cancelReason = ''))\" class=\"cancelDialog\">\n    <el-form label-width=\"90px\" v-if=\" cancelDialogTitle === '取消'\">\n      <el-form-item :label=\"cancelDialogTitle + '原因：'\">\n        <el-select v-model=\"cancelReason\" :placeholder=\"'请选择' + cancelDialogTitle + '原因'\">\n          <el-option v-for=\"(item, index) in cancelPurchaseList\" :key=\"index\" :label=\"item.label\"\n            :value=\"item.label\" />\n        </el-select>\n      </el-form-item>\n      <el-form-item v-if=\"cancelReason === '自定义原因'\" label=\"原因：\">\n        <el-input v-model.trim=\"cancelReason\" type=\"textarea\" :placeholder=\"'请填写您' + cancelDialogTitle + '的原因（限20字内）'\"\n          maxlength=\"20\" />\n      </el-form-item>\n    </el-form>\n\n    <el-form label-width=\"140px\" v-if=\" cancelDialogTitle === '审核不通过'\">\n      <el-form-item :label=\"cancelDialogTitle + '原因：'\">\n        <el-select v-model=\"refuseReason\" :placeholder=\"'请选择' + cancelDialogTitle + '原因'\">\n          <el-option v-for=\"(item, index) in refusePurchaseList\" :key=\"index\" :label=\"item.label\"\n            :value=\"item.label\" />\n        </el-select>\n      </el-form-item>\n      <el-form-item v-if=\"refuseReason === '自定义原因'\" label=\"原因：\">\n        <el-input v-model.trim=\"refuseReason\" type=\"textarea\" :placeholder=\"'请填写您' + cancelDialogTitle + '的原因（限20字内）'\"\n          maxlength=\"20\" />\n      </el-form-item>\n    </el-form>\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <el-button @click=\"; (cancelDialogVisible = false), (cancelReason = '')\">取 消</el-button>\n      <el-button type=\"primary\" @click=\"confirmCancel\">确 定</el-button>\n    </span>\n  </el-dialog>\n</div>\n",null]}