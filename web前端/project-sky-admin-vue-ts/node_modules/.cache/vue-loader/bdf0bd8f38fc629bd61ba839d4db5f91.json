{"remainingRequest":"D:\\my_web_project\\web实验作业\\源代码文件\\源代码文件\\web前端\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\my_web_project\\web实验作业\\源代码文件\\源代码文件\\web前端\\project-sky-admin-vue-ts\\src\\views\\director\\device\\deviceInfo.vue?vue&type=script&lang=ts&","dependencies":[{"path":"D:\\my_web_project\\web实验作业\\源代码文件\\源代码文件\\web前端\\project-sky-admin-vue-ts\\src\\views\\director\\device\\deviceInfo.vue","mtime":1747905996000},{"path":"D:\\my_web_project\\web实验作业\\源代码文件\\源代码文件\\web前端\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\my_web_project\\web实验作业\\源代码文件\\源代码文件\\web前端\\project-sky-admin-vue-ts\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\my_web_project\\web实验作业\\源代码文件\\源代码文件\\web前端\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js","mtime":499162500000},{"path":"D:\\my_web_project\\web实验作业\\源代码文件\\源代码文件\\web前端\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\my_web_project\\web实验作业\\源代码文件\\源代码文件\\web前端\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator';\r\nimport Empty from '@/components/Empty/index.vue';\r\nimport { getDeviceList,queryDeviceById } from '@/api/device';\r\n\r\n@Component({\r\n  components: {\r\n    Empty\r\n  }\r\n})\r\nexport default class DeviceInfo extends Vue {\r\n  private deviceName = '';\r\n  private deviceType = '';\r\n  private status = '';\r\n  private tableData: any[] = [];\r\n  private counts = 0;\r\n  private page = 1;\r\n  private pageSize = 10;\r\n  private isSearch = false;\r\n  private detailDialog = false;\r\n  private detailForm: any = {};\r\n\r\n  created() {\r\n    this.init();\r\n  }\r\n\r\n  private async init(isSearch?: boolean) {\r\n    this.isSearch = isSearch === true;\r\n    const params = {\r\n      page: this.page,\r\n      pageSize: this.pageSize,\r\n      deviceName: this.deviceName || undefined,\r\n      deviceType: this.deviceType || undefined,\r\n      status: this.status || undefined\r\n    };\r\n    const res = await getDeviceList(params);\r\n    if (res.data.code === 1) {\r\n      this.tableData = res.data.data.records;\r\n      this.counts = res.data.data.total;\r\n    }\r\n    \r\n  }\r\n\r\n  private initFun() {\r\n    this.init(true);\r\n  }\r\n\r\n  private async getDetail(row: any) {\r\n    try {\r\n      const res = await queryDeviceById(row.deviceId);\r\n      if (res.data.code === 1) {\r\n        this.detailForm = res.data.data;\r\n      } else {\r\n        this.$message.error(res.data.msg || '获取设备详情失败');\r\n      }\r\n      \r\n      // 显示详情对话框\r\n      this.detailDialog = true;\r\n    } catch (error) {\r\n      console.error('获取设备详情失败:', error);\r\n      this.$message.error('获取设备详情失败，请重试');\r\n      // 出错时仍然显示基本信息\r\n      this.detailForm = { ...row };\r\n      this.detailDialog = true;\r\n    }\r\n  }\r\n\r\n  private viewDeviceRecord(deviceId: number) {\r\n    // 跳转到设备履历页面\r\n    this.$router.push({\r\n      path: '/director/device/record',\r\n      query: { deviceId: deviceId.toString() }\r\n    });\r\n  }\r\n\r\n  private handleClose() {\r\n    this.detailDialog = false;\r\n  }\r\n\r\n  private getStatusText(status: number) {\r\n    const statusMap: { [key: number]: string } = {\r\n      0: '报废',\r\n      1: '正常',\r\n      2: '维修中',\r\n      3: '停用',\r\n      4: '仓库存放'\r\n    };\r\n    return statusMap[status] || '未知';\r\n  }\r\n\r\n  private getMaintenanceTypeText(type: number) {\r\n    const typeMap: { [key: number]: string } = {\r\n      1: '自维',\r\n      2: '托管',\r\n      3: '技服'\r\n    };\r\n    return typeMap[type] || '未知';\r\n  }\r\n\r\n  private handleSizeChange(val: number) {\r\n    this.pageSize = val;\r\n    this.init();\r\n  }\r\n\r\n  private handleCurrentChange(val: number) {\r\n    this.page = val;\r\n    this.init();\r\n  }\r\n}\r\n",{"version":3,"sources":["deviceInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoMA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"deviceInfo.vue","sourceRoot":"src/views/director/device","sourcesContent":["<template>\r\n  <div class=\"dashboard-container\">\r\n    <div class=\"container\">\r\n      <div class=\"tableBar\">\r\n        <label style=\"margin-right: 10px\">设备名称：</label>\r\n        <el-input v-model=\"deviceName\" placeholder=\"请填写设备名称\" style=\"width: 14%\" clearable @clear=\"init\"\r\n          @keyup.enter.native=\"initFun\" />\r\n        <label style=\"margin-right: 10px; margin-left: 20px\">设备类型：</label>\r\n        <el-select v-model=\"deviceType\" style=\"width: 14%\" placeholder=\"请选择\" clearable @clear=\"init\">\r\n          <el-option label=\"客服设备\" value=\"客服\" />\r\n          <el-option label=\"机电设备\" value=\"机电\" />\r\n          <el-option label=\"消防设备\" value=\"消防\" />\r\n          <el-option label=\"电梯设备\" value=\"电梯\" />\r\n        </el-select>\r\n        <label style=\"margin-right: 10px; margin-left: 20px\">设备状态：</label>\r\n        <el-select v-model=\"status\" style=\"width: 14%\" placeholder=\"请选择\" clearable @clear=\"init\">\r\n          <el-option label=\"正常\" :value=\"1\" />\r\n          <el-option label=\"维修中\" :value=\"2\" />\r\n          <el-option label=\"停用\" :value=\"3\" />\r\n          <el-option label=\"报废\" :value=\"0\" />\r\n          <el-option label=\"仓库存放\" :value=\"4\" />\r\n        </el-select>\r\n        <el-button class=\"normal-btn continue\" @click=\"init(true)\">\r\n          查询\r\n        </el-button>\r\n      </div>\r\n      <el-table v-if=\"tableData.length\" :data=\"tableData\" stripe class=\"tableBox\">\r\n        <el-table-column prop=\"deviceId\" label=\"设备ID\" />\r\n        <el-table-column prop=\"deviceCode\" label=\"设备编号\" />\r\n        <el-table-column prop=\"deviceName\" label=\"设备名称\" />\r\n        <el-table-column prop=\"deviceType\" label=\"设备类型\" />\r\n        <el-table-column prop=\"model\" label=\"设备型号\" />\r\n        <el-table-column prop=\"brand\" label=\"品牌\" />\r\n        <el-table-column prop=\"status\" label=\"设备状态\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ getStatusText(scope.row.status) }}</span>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"installLocation\" label=\"安装位置\" />\r\n        <el-table-column prop=\"installDate\" label=\"安装日期\" />\r\n        <el-table-column label=\"操作\" width=\"250\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" size=\"small\" class=\"blueBug\" @click=\"getDetail(scope.row)\">\r\n              查看详情\r\n            </el-button>\r\n            <el-button type=\"text\" size=\"small\" class=\"blueBug\" @click=\"viewDeviceRecord(scope.row.deviceId)\">\r\n              查看设备履历\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <Empty v-else :is-search=\"isSearch\" />\r\n      <el-pagination v-if=\"counts > 10\" class=\"pageList\" :page-sizes=\"[10, 20, 30, 40]\" :page-size=\"pageSize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\" :total=\"counts\" @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\" />\r\n    </div>\r\n\r\n    <!-- 查看详情弹框 -->\r\n    <el-dialog title=\"设备详细信息\" :visible.sync=\"detailDialog\" width=\"53%\" :before-close=\"handleClose\"\r\n      class=\"order-dialog\">\r\n      <el-scrollbar style=\"height: 100%\">\r\n        <!-- 顶部信息 -->\r\n        <div class=\"order-top\">\r\n          <div>\r\n            <div style=\"display: inline-block\">\r\n              <label style=\"font-size: 16px\">设备ID：</label>\r\n              <div class=\"order-num\">\r\n                {{ detailForm.deviceId }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <p><label>设备编号：</label>{{ detailForm.deviceCode }}</p>\r\n        </div>\r\n\r\n        <!-- 中间信息 -->\r\n        <div class=\"order-middle\">\r\n          <!-- 基本信息 -->\r\n          <div class=\"dish-label\">基本信息</div>\r\n          <div class=\"user-info\">\r\n            <div class=\"user-info-box\">\r\n              <div class=\"user-name\">\r\n                <label>设备名称：</label>\r\n                <span>{{ detailForm.deviceName }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-name\">\r\n                <label>设备类型：</label>\r\n                <span>{{ detailForm.deviceType }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-phone\">\r\n                <label>设备型号：</label>\r\n                <span>{{ detailForm.model }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-getTime\">\r\n                <label>品牌：</label>\r\n                <span>{{ detailForm.brand }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-name\">\r\n                <label>制造商：</label>\r\n                <span>{{ detailForm.manufacturer }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-name\">\r\n                <label>生产日期：</label>\r\n                <span>{{ detailForm.productionDate }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-name\">\r\n                <label>采购日期：</label>\r\n                <span>{{ detailForm.purchaseDate }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-name\">\r\n                <label>保修期(月)：</label>\r\n                <span>{{ detailForm.warrantyPeriod }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n        <!-- 位置信息 -->\r\n        <div class=\"dish-label\">位置信息</div>\r\n          <div class=\"user-info\">\r\n            <div class=\"user-info-box\">\r\n              <div class=\"user-name\">\r\n                <label>安装日期：</label>\r\n                <span>{{ detailForm.installDate }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-name\">\r\n                <label>安装位置：</label>\r\n                <span>{{ detailForm.installLocation }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-name\">\r\n                <label>工区ID：</label>\r\n                <span>{{ detailForm.areaId }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-name\">\r\n                <label>班组ID：</label>\r\n                <span>{{ detailForm.teamId }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-name\">\r\n                <label>设备状态：</label>\r\n                <span>{{ getStatusText(detailForm.status) }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 维保信息 -->\r\n          <div class=\"dish-label\">维保信息</div>\r\n          <div class=\"user-info\">\r\n            <div class=\"user-info-box\">\r\n              <div class=\"user-name\">\r\n                <label>维保方式：</label>\r\n                <span>{{ getMaintenanceTypeText(detailForm.maintenanceType) }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-name\">\r\n                <label>维保单位：</label>\r\n                <span>{{ detailForm.maintenanceCompany }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-name\">\r\n                <label>维保联系人：</label>\r\n                <span>{{ detailForm.maintenanceContact }}</span>\r\n              </div>\r\n\r\n              <div class=\"user-name\">\r\n                <label>维保联系电话：</label>\r\n                <span>{{ detailForm.maintenancePhone }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 备注信息 -->\r\n          <div class=\"dish-label\">备注信息</div>\r\n          <div class=\"user-info\">\r\n            <div class=\"user-info-box\">\r\n              <div class=\"user-name\">\r\n                <label>备注：</label>\r\n                <span>{{ detailForm.remark }}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-scrollbar>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue } from 'vue-property-decorator';\r\nimport Empty from '@/components/Empty/index.vue';\r\nimport { getDeviceList,queryDeviceById } from '@/api/device';\r\n\r\n@Component({\r\n  components: {\r\n    Empty\r\n  }\r\n})\r\nexport default class DeviceInfo extends Vue {\r\n  private deviceName = '';\r\n  private deviceType = '';\r\n  private status = '';\r\n  private tableData: any[] = [];\r\n  private counts = 0;\r\n  private page = 1;\r\n  private pageSize = 10;\r\n  private isSearch = false;\r\n  private detailDialog = false;\r\n  private detailForm: any = {};\r\n\r\n  created() {\r\n    this.init();\r\n  }\r\n\r\n  private async init(isSearch?: boolean) {\r\n    this.isSearch = isSearch === true;\r\n    const params = {\r\n      page: this.page,\r\n      pageSize: this.pageSize,\r\n      deviceName: this.deviceName || undefined,\r\n      deviceType: this.deviceType || undefined,\r\n      status: this.status || undefined\r\n    };\r\n    const res = await getDeviceList(params);\r\n    if (res.data.code === 1) {\r\n      this.tableData = res.data.data.records;\r\n      this.counts = res.data.data.total;\r\n    }\r\n    \r\n  }\r\n\r\n  private initFun() {\r\n    this.init(true);\r\n  }\r\n\r\n  private async getDetail(row: any) {\r\n    try {\r\n      const res = await queryDeviceById(row.deviceId);\r\n      if (res.data.code === 1) {\r\n        this.detailForm = res.data.data;\r\n      } else {\r\n        this.$message.error(res.data.msg || '获取设备详情失败');\r\n      }\r\n      \r\n      // 显示详情对话框\r\n      this.detailDialog = true;\r\n    } catch (error) {\r\n      console.error('获取设备详情失败:', error);\r\n      this.$message.error('获取设备详情失败，请重试');\r\n      // 出错时仍然显示基本信息\r\n      this.detailForm = { ...row };\r\n      this.detailDialog = true;\r\n    }\r\n  }\r\n\r\n  private viewDeviceRecord(deviceId: number) {\r\n    // 跳转到设备履历页面\r\n    this.$router.push({\r\n      path: '/director/device/record',\r\n      query: { deviceId: deviceId.toString() }\r\n    });\r\n  }\r\n\r\n  private handleClose() {\r\n    this.detailDialog = false;\r\n  }\r\n\r\n  private getStatusText(status: number) {\r\n    const statusMap: { [key: number]: string } = {\r\n      0: '报废',\r\n      1: '正常',\r\n      2: '维修中',\r\n      3: '停用',\r\n      4: '仓库存放'\r\n    };\r\n    return statusMap[status] || '未知';\r\n  }\r\n\r\n  private getMaintenanceTypeText(type: number) {\r\n    const typeMap: { [key: number]: string } = {\r\n      1: '自维',\r\n      2: '托管',\r\n      3: '技服'\r\n    };\r\n    return typeMap[type] || '未知';\r\n  }\r\n\r\n  private handleSizeChange(val: number) {\r\n    this.pageSize = val;\r\n    this.init();\r\n  }\r\n\r\n  private handleCurrentChange(val: number) {\r\n    this.page = val;\r\n    this.init();\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dashboard {\r\n  &-container {\r\n    margin: 30px;\r\n\r\n    .container {\r\n      background: #fff;\r\n      position: relative;\r\n      z-index: 1;\r\n      padding: 30px 28px;\r\n      border-radius: 4px;\r\n\r\n      //查询黑色按钮样式\r\n      .normal-btn {\r\n        padding: 10px 30px;\r\n        background: #333;\r\n        color: #fff;\r\n        border-radius: 5px;\r\n        border: 0;\r\n        font-size: 14px;\r\n        margin-left: 20px;\r\n      }\r\n\r\n      .tableBar {\r\n        margin-bottom: 20px;\r\n        display: flex;\r\n        justify-content: flex-start;\r\n        align-items: center;\r\n      }\r\n\r\n      .tableBox {\r\n        width: 100%;\r\n        border: solid 2px #f3f4f7;\r\n        border-radius: 2px;\r\n      }\r\n\r\n      .pageList {\r\n        text-align: center;\r\n        margin-top: 20px;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n.order-dialog {\r\n  .order-top {\r\n    padding-bottom: 20px;\r\n    border-bottom: 2px solid #f3f4f7;\r\n\r\n    .order-num {\r\n      display: inline-block;\r\n      font-size: 16px;\r\n      color: #333;\r\n      font-weight: bold;\r\n    }\r\n  }\r\n\r\n  .order-middle {\r\n    padding-top: 20px;\r\n\r\n    .dish-label {\r\n      font-size: 16px;\r\n      color: #333;\r\n      font-weight: bold;\r\n      margin-bottom: 10px;\r\n    }\r\n\r\n    .user-info {\r\n      margin-bottom: 20px;\r\n\r\n      .user-info-box {\r\n        display: flex;\r\n        flex-wrap: wrap;\r\n\r\n        div {\r\n          margin-right: 40px;\r\n          margin-bottom: 10px;\r\n\r\n          label {\r\n            color: #666;\r\n            margin-right: 5px;\r\n          }\r\n\r\n          span {\r\n            color: #333;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}